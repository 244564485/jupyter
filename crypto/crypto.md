
# 数字货币量化投资

加密货币量化投资的基础设施还不够完善，纯技术 / 平台提供方预计会有较好的风险收益比。
加密货币量化投资的基础设施还不够完善，纯技术 / 平台提供方预计会有较好的风险收益比。随着衍生工具成熟和市值提升，加密货币量化会有不错的发展。
应用量化投资方法在数字货币市场进行投资是近年来常见的模式，数字货币市场波动大、7*24 小时连续交易、定价偏离机会多和交易所做市需求等特点是量化交易天然存在的土壤。许多传统量化机构已经入场，但是受限于数字货币市场特性、规模以及相应的基础设施不够完善，盈利可持续性比较强的量化策略规模仍较小。
本文对比了所有类型的量化投资策略，并按照主动和被动两大类型进行分类。主动类型中趋势类策略和波动类策略是两大主要类型的策略。
大部分策略都可以在数字货币市场进行应用，数字货币市场也存在自己特色的套利方法。被动管理和指数增强型在传统市场渐渐兴起，数字货币交易可以借鉴其思想。此外我们这里简要分类了数字货币量化投资所面临的风险以及一个成熟量化策略需要的风控手段，并列举了量化交易平台所需要的基础设施和必备模块。
此外评估一个量化团队实力需要从多方面入手，策略层面一般属于高度机密，可以从团队背景、架构、风控和合规、各类指标等层面进行动态审视。
数字货币量化投资的基础设施还不够完善，纯技术 / 平台提供方预计会有较好的风险收益比。预计数字货币量化投资前景较好，原因包括衍生工具会不断成熟、市值提升、传统量化团队涌入以及高波动性将持续等方面。
市场投资概述
量化投资的兴起
量化投资的兴起和数理金融学发展密不可分，美国经济学家 Markowitz 在 20 世纪五十年代建立的均值-方差模型可以说是量化投资的开端，随后在 60 年代，William Sharpe 等四人在现代投资组合理论（MPT）的基础上上发展出了资本市场定价模型（CAPM），成为度量金融风险和收益的基本模型。另一个值得注意的方向是是 Fama 等人在 60 年代发展起来的有效市场假说，影响力持续至今。此外 Fama 和 French 在 90 年代还发展出了三因子模型，成为后来因子分析模式的开端。
随着衍生产品的不断发展，在上个世纪 70 年代美国经济学家 Black 和 Scholes 建立了期权定价模型（BSM model），又迅速地应用于金融市场，帮助金融衍生产品迅速的发展，反过来推动金融数学理论往前推进了一大步。
80 年代， 「金融工程」 这个概念被提出，形成新的学科形态并开始广泛吸收和研究相关成果。90 年代最重要的进展是金融风险管理方向，VaR 风险管理模型被广泛使用，已经被全球金融机构所广泛使用，是最重要的风险度量矩阵之一。
中国的量化投资历史不长，也只发展了短短 10 年左右时间，和海外量化人才回归以及衍生品市场开始起步的时间点有关。在过去十年，和量化基金同时发展的还有被动投资。被动投资起初并不算做量化范畴，但是 ETF 产品的出现需要借助量化手段，特别是近几年出现的指数增强或者叫 Smart Beta 类产品，是基于原有指数基础上对各种影响因子进行分解，并重新配置资产，需要较强的量化平台支持。
量化投资在美国市场已经成为不可忽视的力量，2018 年量化对冲金规模已经占到所有对冲基金规模的 1/3。而中国的公募基金里，只有大约 1% 为量化基金，偏股型基金里约 5% 为量化类型，这也和公募基金的投资限制有很大关系。而在私募基金行业中，量化类型的私募基金占比已经达到了 20%，其中股票市场中性（31%）、CTA 趋势（29%）和股票多空（18%）为使用最多的三类量化策略。


数字货币市场适合量化投资策略
1.数字货币市场的特性，非常适合量化策略的使用，原因在于：
2.数字货币本身波动较传统金融市场产品大很多，适合多种卖出波动率的量化投资策略。
3.市场发展比较早期，产品都很初步，比如期货、期权产品，流动性低、定价有效性差，出现错误定价的机会多，量化投资可以很好地捕捉其中的定价偏离机会。
4.交易时间长，7*24 小时交易，不适合人工盯盘和交易，而更有利于发挥量化系统在盯盘、预警和捕捉交易机会的优势。
5.交易所也有做市需求。数字货币交易对繁多，而流动性难以匹配，大部分交易所都有流动性需求，也衍生出了做市商这一交易所生态的必备角色，这也是大部分量化团队赖以生存的手段之一。
6.基于以上原因，大量的拥有传统金融优势的量化团队涌入数字货币市场，带来成熟的交易理念和系统，发掘交易机会。可以说量化交易策略的存在，使得数字货币市场的成熟化加快。
量化策略分类与市场应用
量化投资也分成主动和被动类型，主动类型追求绝对收益，通过承担各类风险因子，从而追求在任何市况下都可以获得超额稳定收益的结构，数字货币的量化投资策略也大部分是以主动投资为主。
被动投资量化策略主要是追求和各类指数相似的回报，承担的是大盘系统性风险以及各类细分行业或风格风险，以获得配置回报，近年来加入因子分析的指数增强型量化策略获得青睐，交易员可以增加某一类风险的暴露从而获得超越指数的回报。
然而由于缺乏行业认可指数的存在，数字货币的被动量化投资非常少见，因此也是未来一个潜在的发力方向。

主动量化概述
主动量化投资策略，基本分成分成趋势类型和波动类型两类。因为无论是传统金融还是数字货币市场，市场的走势都可以分解成两种，一种是趋势市，一种是波动市。其余走势都可以看作是这两类走势的叠加。量化策略的意义，就是在趋势市中抓住单边机会，在波动市找到不合理的定价的机会。
无论采取哪类策略，重要的是判断目前是趋势市还是波动市。因为从历年统计里看，量化对冲基金在牛市业绩差于 long-only 基金或者 long-short 基金，而在波动市或者熊市可以跑赢后两者，原因在于不同市场条件下，各类收益贡献的比重差别很大，所以判断市况是第一位的。
除要考虑趋势和波动外，具体到交易层面，还需要考虑冲击成本。量化交易特别是高频量化，成交量都较大，持续的交易对市场本身就是一种影响，也会改变盈利的结构，甚至会直接冲击盈利到变成亏损，当市场深度不够的时候，对订单的分析和下单的拆解也变得重要。算法交易在这方面具有很大优势，我们也会在后面介绍。
主动量化策略
趋势类策略
趋势判断主要是要判断目前是什么样的市场，是向上还是向下，以及什么样的标的更适合这样的市场。如果判断错误则风险非常之高，但是对应的判断正确的收益也极大。
量化选股（币）
量化择时
量化选股（币）
量化选股或者选币，就是构建一系列标的（多空）组合，无论是股还是币。量化选股（币）有很多种类型，最广泛应用的就是多因子模型，其基本原理在于拆解可以构成标的物上涨和下跌的因素，也可以说是因子分析。
即在构建投资组合的时候，不是以标的物本身进行分类（比如某行业分配多少权重），而是按照因子进行分类，某一类因子给予多少权重。当然股票和数字货币也有不同，股票的因子会更多，因为涉及到很多基本面的因素，数字货币情绪面（如推特的讨论）或者事件驱动类型（减半、重大升级、合作）的因子更多，但是关键在于，找到合适的因子进行模拟和回测。
容易犯的错误比如，把一些看似重要、但实际并不重要的因子，分配过多的权重，而增加了风险，所以还需要对因子的有效性进行检验。
股票的常见的因子包括：估值、成长（比如净利润增加率）、资本结构（比如外资持有）、动量。换手率、资金流入、行业轮动等。
数字货币常见因子包括：市值、成交量、动量、社交平台（讨论数、follow 量）、特殊事件（升级、Coinbase 上币等）、宏观流动性等。
可以看出，基本面投资其实和量化投资有相通之处，使用量化方法去进行基本面投资，也是 A 股一些基金经理喜欢的策略，甚至基本面本身，只要是基于数据的，也可以算作量化的一种。其他一些量化选股模型还包括风格轮动、行业轮动、资金流等模型，有些也可以统一在多因子模型下，这里就不赘述。
量化择时
量化择时是一种估计走势的方法，其实也可以算作因子分析的一种，是以市场方向的判断作为主要利润来源，但是风险也较大。
量化择时起初就来源于比较简单的技术分析手段（如均线、量能等）分析，一般分成趋势择时指标、市场情绪择时指标、牛熊线指标、市场异常指标、以及一些根据特殊指标进行调整的方法（时变夏普比率、分形方法等）。
波动类策略
波动类策略是试图不承担系统性风险的做法，无论系统是向上，向下还是波动，希望把系统风险排除在外。比如著名的阿尔法策略，就是把系统风险贝塔，通过衍生产品对冲掉，剩下的只是个股、个券，个币的收益。波动类策略在牛市中仍然跑不过长仓基金，熊市和波动市则可以获得超额收益，属于长期稳健型的方法。
衍生品套利（期货、期权）
统计套利
数字货币特有的套利
衍生品套利（期货、期权）
在衍生品市场比较发达的产品上，可以使用这种套利方法。对于期货而言，分成期现套利和跨期套利两种。比如在现货市场上买进低价格的现货，在期货市场上卖出高价值的期货，以获取价格回归的利润。基本依据是期货到了结算日，价格会回归现货价格。跨期套利就是不同期限的期货之间进行买卖套利。可以看出，期货的套利是一种市场中性方法，需要市场不断地波动从而产生定价偏差机会出现，平稳的市场很难产生套利机会。
对于期权而言，情况比期货要复杂，因为期权的收益结构与标的物价格相比，不是线性的，所以根据不同类型的期权组合，可以构建出很多复杂类型的套利模型，传统市场上根据收益结构图，给出了非常形象的名字，比如蝶式套利、飞鹰套利、跨式套利、转换套利、垂直套利、水平套利、反向转换套利、双限套利等。目前数字货币的期权市场刚刚发展了两年左右，成交量还较小，集中在 Deribit、CME 等大型交易所，但毫无疑问期权会是一个很大的潜在市场。
统计套利
统计套利是指通过对相关投资标的的历史统计规律进行研究，发现其相对应的长期均衡关系（协整关系），当某一对品种的价值偏离到一定程度后，开始买入向下偏离的，卖出向上偏离的，甚至只进行单边操作，在长期均衡关系回归以后获利了结。统计套利的标的可以从最简单的配对交易 (两个标的之间)，到一系列标的投资，关键在于寻找出标的之间的协整关系。
比如对于数字货币市场，有人曾做过莱特币 / 比特币，以太坊 / 比特币之间的配对交易，就是计算出一对数字货币比值的长期历史均值，然后买入低估的那个，如果可以做空，在衍生品市场卖出，最后以求得价值的回归。
数字货币特有的套利
此处介绍的是数字货币特有的套利模式，也就是说这类套利机会的存在，只存在数字货币交易所或者数字货币交易对之间。当然这些模式在其他产品上也曾经出现过，比如外汇的三角套利，但在数字货币交易上有了更新的应用，在此也一并归入数字货币特有的套利模式中。
跨交易所套利
早期曾出现在不同交易所的相同交易对，价格不一致且持续存在的情况，于是可以在高价交易所卖出，在低价交易所买入同一个交易对获利。
比如在两个交易所都挂牌的数字货币，可以在两边同时进行操作。比如交易员在 A 交易所存有 ETH，在 B 交易所存有 BTC，A 交易所的 ETH/BTC 价格高于 B 交易所，则可以在 A 交易所卖出 ETH 获得 BTC，在 B 交易做通 BTC 买入 ETH，这样可以免除交易所之间转账手续费，然后 ETH 和 BTC 都获得了同步的增长。
交易所内多数字货币对套利
需要交易所内有多个数字货币对，且互为计价货币和标价货币，比如 BTC/USDT, ETH/USDT, ETH/BTC 三个对，在某一时刻，肯定会出现不一致的情况，在计算手续费后，可以进行三角套利，卖出较高的，买入较低的。
比如
BTC/USDT=8000, ETH/USDT=200, ETH/BTC=0.2542, 显然 ETH/BTC 被高估了，那可以同时卖出 ETH/BTC，并买入 ETH/USDT，这样 ETH 和 BTC 的基础头寸大致不变，但是 BTC 的量增加了。或者是，用 USDT 买入 ETH，卖出 ETH/BTC, 得到 BTC 后卖出 BTC/USDT，用 USDT 买入 ETH，循环往复。
以上跨交易所套利和交易所内多数字货币对套利结合，进行跨交易所三角套利，但是就更复杂，因为要考虑转账手续费、转账时间和交易机会的存续性等因素。跨交易对三角套利起源于外汇市场，但是外汇市场参与人多，套利机会较少。早年数字货币套利的交易机会也很多，现在也开始变少，原因就是量化套利的人越来越多。
法币交易对套利
这是一种结合外汇和数字货币的三角或多角套利模式，就是当不同法币交易对，比如 BTC/JPY, BTC/KWR，JPY/KWR 之间出现价差的时候，可以进行跨数字货币和外汇的套利。
但是这种套利需要交易者有多国的银行账户和法币出入金渠道，不是简单交易策略的问题，而且也要考虑合规成本，目前各国也开始追踪数字货币的洗钱、黑市交易。早前有团队比较擅长这种模式，但是能持续做下去的并不多，以后估计也不会成为主流模式。
被动量化策略类分类
被动投资（含指数增强）
被动投资其实就是指数投资，现在数字货币市场也没有受认可的指数，大部分的指数都是各类公司自己编制，缺乏一致性和认可度。比特币的市值仍然占据 60% 以上，编制一个大盘指数也只是将前几大数字货币按照一定的权重配置一遍，收获的大盘收益主要还是比特币的收益。
指数增强是另外一个有意思的方向，但对于数字货币市场目前不会很实用。比如相对收益是一个很流行的概念，是相对一个大盘指数的收益，现在没有一个数字货币的大盘收益指数，因此意义不大。
我们可以借鉴的是，通过一个相对合理的篮子，加入我们的主观判断和因子的调整，获得一个比比特币收益高，但是比山寨币收益稳健的组合，然后通过不断地调仓，保持收益的稳定性。但这仍取决于我们想获得什么样的收益。
指数投资或者是指数增强，仍然是属于趋势投资，基本逻辑是未来数字货币市场会上升。
资产配置
资产配置是这些年兴起的概念，多使用于传统的跨资产类别投资，如在股票、贵金属、期货、固定收益、货币市场基金等方向，方法如等权重投资、全天候投资等。
数字货币其实可以成为全天候投资中的一个新的配置类型，例如其按照增长和通胀把经济周期分成四个象限，每个象限配置一系列最受益资产，数字货币可以成为这一揽子配置货币里面的一个部分。但是由于风险较高，权重不会太大。
现在借助量化手段，全天候策略可以自动的根据输入信息进行权重调配，这也是结合了基本面和量化的数量型方法。
算法交易
算法交易也诞生于美国，和金融市场的电子化密不可分。在 20 世纪 70 年代大量的交易所开始把委托指令流改成使用计算机系统进行自动化处理，这样每一笔的交易订单都可以被计算机程序所捕获，从而获得下单的时间、价格、数量等多方面信息，为算法交易提供了最主要的数据来源。算法交易的兴起，使得市场订单中很大部分的订单都按照算法执行，也显著提升了市场信息传播效率。
算法交易的核心就在于对交易所订单的拆解分析和对市场的状态的有效评估，从而不断调整算法，降低时间成本和冲击成本等。算法交易的主要策略都在于对订单价格、交易量和成本的分析，一般策略包括 TWAP、VWAP、MVWAP、VP、Step、IS 等几个常见类型。
中国资本市场使用算法交易起步较晚，但是电子交易系统非常先进，只是在相关技术研究和市场制度上有一些落后，不利于算法交易的展开，监管方面也有一些限制。
算法交易既可以是被动的，也可以是主动的，也可以是综合主动被动到一起。被动型算法交易主要是执行既定算法内容，核心是减少冲击成本和价格滑动。主动性算法交易更加复杂，需要进一步判断市场状况，除降低成本外，也在分析订单过程中逐步寻找市场机会。也可以把二者结合起来。
风险归类与风控措施
风险归类
应用量化投资到数字货币市场的风险有两类：
一类是所有类型投资策略都要面对的数字货币风险，如市场风险、尾部事件、流动性风险等。
市场风险：数字货币本身的波动性，既是盈利来源，也是风险的来源。由于数字货币缺乏财务基本面，没有利息，也没有预期现金流，使得估值完全由预期和流动性定价，较一般金融产品波动更大。基于数字货币的衍生产品，继续把这种波动放大了好几倍。目前期货和期权市场，大部分也是基于比特币，小部分基于以太坊，其他币种的衍生品几乎没有，就是因为风险过大交易所都可能难以管理。
尾部风险：数字货币市场特有的尾部风险，是数字货币目前的基础设施不够完全导致的。总而言之就是流动性看似较大，但比较分裂，操控市场或者影响市场所需要的资金量其实很小。巨大的波动容易抽干流动性。可归因于是基础设施的缺乏，使得量化交易的量做不到太大。而这种情况，预计还会持续几年，直到新型的基础设施慢慢取代现有的设施。
流动性风险：前面已说明流动性是数字货币的定价来源之一。黄金本身就是流动性的池子，比特币也慢慢有向流动性池子发展的趋势。但是由于市值很小，所以相对黄金，很容易受到流动性的干扰，而且还兼具风险资产特征。典型的例子就是 3.12 的暴跌，以及暴跌后的迅速反弹，主因是流动性，次因是风险偏好。此外很多数字货币交易对的流动性也不稳定，不同交易所的交易对和上下币规则都略有不同，这对小币种的流动性干扰较大。
另一类是量化投资策略所特有的风险，如量化模型设计风险，数据的完整性风险，硬件故障等市场外黑天鹅风险，模型拟合、回测与未来的关系（市场条件变化），过拟合等多类风险，可以分成两类：
属于经验性的，如策略不够聪明、回测不到位、拟合没做好（如过拟合）、参数有问题、基础模型缺乏证明支持等。
属于技术性的，如缺乏足够的数据、硬件支撑，API 数据接口问题，网络延迟问题等。
风控措施
策略风控
策略主导的多指标风控原则
策略模型是一个负责从下单到平仓的一整套程序，大部分的策略模型，是把风控的模块包含进去了，如什么时候应该止损，什么时候应该停掉策略。
这部分模型是由量化策略员直接负责的。其中的各类指标，还要和和风控等部门协商。
此外就是一个团队基本能承担的风险是有上限的，当运用多策略模型时，单一策略又需要分配风险指标，所以策略模型的外在限制比较多，而这些可以内化为一个个多指标的风控程序。
高级算法过滤
除此以外，有些量化团队还专门设立独立的算法风控，比如使用自然语言处理 NLP、 关系网络、知识图谱等多类技术手段，去寻找和勾勒市场上并非显而易见，但是会有实质影响的风险。
相当于在策略和交易部门之外，单独设立一个算法为主导的风控监控体系，负责监控整体的风险暴露并和策略交易团队沟通。
风控预警和日志
预警属于前置的风控，即一般的风险提示、预警线、平仓线提示等。日志属于后置的风控，把风险事件和风控事件记录下来，以备日后查阅，并方便改进风控和策略模型。
合规风控
传统金融市场，比如 A 股会要求下单次数、撤单次数、下单和撤单之间的时间差等。预计以后合规的数字货币交易市场可能也会有类似要求，比如可交易 / 不可以交易什么类型的数字货币。这就需要修改策略模型，尤其是高频交易模型，以符合监管要求。
人工干预风控
主要是指策略启停、手工下单、系统急刹，以及各类人为定义的风控规则，目的是防止策略出现黑天鹅，尤其是自动交易类型的。历史上比如 2012 年骑士资本因为自动分单系统升级后，提示模块的缺失，导致 45 分钟内发送了天量订单，导致亏损 4. 6 亿美元。就是非常需要人工干预的情形。
量化模块虽然非常严谨，但是系统的 bug 非常难以避免，尤其是涉及升级、负责人员的更替、系统年代久远、缺乏开发日志及注释等多种情况的出现，都会导致出现 bug。此时就需要赋予高级风控和管理人员进行手工干预甚至启停的功能，并配合风控预警等模块进行干预。
基础设施和交易平台
我们认为量化交易至少需要以下 5 类基础设施：
1.交易场所：现货交易所、衍生品交易所、OTC 交易所，以及主经纪商
2.交易产品：各种数字货币交易对、数字货币期货、数字货币期权
3.数字货币管理系统：包括冷热钱包、托管、保险等
4.法币银行通道和资金管理系统
5.量化交易系统
数据 API 接口：包括实时交易所数据、链上数据和其他宏观数据
数据库：历史行情数据库和历史其他类型数据库
监控系统：捕获行情数据和特殊事件
回测平台和仿真交易平台：对策略进行历史和实时验证
策略开发平台：可以自行开发策略或者使用成熟的策略开发平台
多账户管理系统：多账户资金管理、风险权重分配
核心模块：量化策略策交易引擎
交易系统：订单发送、执行、成交报告
交易平台的开发步骤：

典型的量化平台可以分成三大模块：1 行情数据模块；2 行情计算模块；3 量化交易模块。下图为一整套量化交易平台模块之间协作流程示意图，其中量化交易引擎为核心模块，包含算法描述、监听脚本、第三方库等部分，并匹配监听各类事件，驱动量化策略执行。
参考招商证券量化交易系统
量化团队评估方法和行业格局
量化策略比较隐秘。如何评估和建立对量化团队的评价标准，是一项非常复杂的工作。量化策略是如同食品行业的秘方一样，隐秘而又被行业冠以神秘色彩。
业绩选择性披露。量化团队的生存线就在于领先的量化策略，其披露一般是有限的。市场上所见的量化团队神话，也存在选择性披露的情况。比如数学家西蒙斯设立的大奖章基金（员工内部基金）虽然收益最好，但是有外部投资人的其他下属基金却表现一般。
某些基金在某一年大赚，但是之后就泯然于行业，因此那种基业长青的基金很少，无论量化还是非量化。
不能过于看重团队背景。仅以团队背景去做评估也会碰到意外情况，最著名的例子就是长期资本管理公司 LTCM 的失败，是诺贝尔奖级别的量化公司倒闭的先例。
多种指标配合。以业绩去看也会有问题，业绩都是后视的，存在幸存者偏差，之前的业绩并不代表之后的业绩。如何评估带有一定的运气成分。
尤其是以外部投资人的角度去参与，也很难看明白单一模块，以及各个模块之间的联动特征，即便借助代码审计。此外最大回撤和夏普比率、索提诺比率等衡量风险控制的指标也需要注意。
动态评价。因此评价良量化团队首先要动态的看问题，不能唯业绩论。不同市场下不同策略收益差别很大，这里面还有一定的运气成分（或是还难以被数学描述的部分）。
所以需要保持客观、并不断地跟踪。每个公司都会宣称自己的风控模块完备，但直到出现风险事件，才知道谁的风控最优。
根据我们对行业的理解，目前数字货币量化投资盈利最丰厚的是两类策略：
1.做市商策略：目前数字货币量化交易最强的团队还是来自于传统量化基金，他们的主要策略就是做市商策略，即通过在不同的交易所提供流动性，而在其他交易所完成头寸的 cover，利用的是现货交易所之间的价格差，以及自身交易引擎可以瞬间捕捉机会的优势，策略体量比较大。
2.高频交易策略：这类策略的特点是盘子容量较小，但是收益比较稳定，优秀团队年化可以达到 30%-40% 以上，但是扩展需要整体数字市场的市值往上再走一步。这些团队的出身也是传统量化基金出身。
其他类型的策略，或者是风险较大（比如 CTA 类型的策略），或者就是很难效仿（比如法币套利策略），难有特别优秀且持续的案例出现。目前行业还缺乏成熟客观可靠的评价体系，也欣喜的看到一些同行在着手建立，希望可以看到更多更客观的评价标准。
行业应用的局限性
工具限制
金融工具是展开量化交易的基础。量化投资是和金融工具丰富程度密切相关的，有更多的金融工具，就有更多可以选的量化方法。
假设只在一个现货市场，开展纯粹的量化交易，则只能使用趋势判断型类的策略的，相反那些喜欢判断波动率类的策略则完全没有办法运作。
期货交易所 Bitmex 在 2016 年上线永续期货合约，2017 年 CME 和 CBOE 才开设期货，最大的期权交易所 Deribit 在 2018 年才建立。稍后现货交易所才跟进，纷纷加入了期货和期权产品。没有这些交易所和衍生产品，现货的风险对冲不掉，期货的风险也没法对冲。所以量化交易需要对应的交易场所和工具。
A 股市场，比如在 2015 年股灾后对股指期货开始加大监管，比如增加开仓限制，增加平仓手续费等，都导致最重要的对冲系统性风险的手段的缺失。
结果就是，A 股最流行的量化投资方法是因子模型，因子模型就是类似把各种股票的特征归因到各种因子，比如规模、动量、估值、价值、成长因素等，但反而海外流行的套利型策略就不多。原因就是 A 股的衍生工具还是太少，公募也限制做空，只能在做多的时候选用因子模型。
市场规模限制
量化策略容量是有限的，是因为市场本身规模就有限，如果量化策略规模过大，本身会扰动市场，导致交易利润变低。
比如期现或者跨期套利，期货市场近期成交的一般会好于远期成交，那捕捉价差的策略就要适应远期期货的成交，一旦超过这个限制，就变成单方面在近期的风险暴露。
而且数字货币市场的流动性，是分散在各个交易所里面的，一方面创造了跨交易所套利的机会，一方面也限制了套利的规模，策略要同时匹配不同交易所的成交量，不然就使得套利机会变得很薄。
竞争行为
有效的策略，可能知道的人越少越好。同一类型的策略，对于参数选择的不同，也会产生千差万别的效果。同一个市场机会，套利的人越多，可拿到的利润就越少。
这和在趋势性市场做多不同，做多的人越多，做多策略就越可能成功。套利策略是，使用的人越多就成功概率就越少。策略运行的有效时间也是有限的，一个成功策略运行久了，同行业也会纷纷效仿，导致一段时间之后就开始失效，所以没有万能不变的策略，需要不停的开发，但都需要成本。而目前数字货币市场可应用的策略还较少，也容易被同行所效仿。
面对极端市场各类策略也会失效
极端市场条件下策略也会失效。比如市场中性策略在极端条件下，可能会让中性发生偏移，变成单向风险暴露。比如当期货找不到对手方开仓或者平仓，表面上的中性策略就可能变成趋势策略。
极端市场可能会导致各种价格都已经失灵，仓位计算都可能失真，这都是难以化解的风险。所以如何应对数字货币的极端市场条件，也是一个量化策略特别需要关注的地方。
投资展望
本报告初步介绍量化投资的发展脉络和特征，并结合数字资产量化投资现状作了简要分析。
传统的的基本面投资是一类比较详细的指导原则，其大的框架和细的指标已经相对成熟，需要更迭的是对新兴行业的纳入。而量化投资策略的则是一大类投资策略的总和，而不是具体的指导原则。其各种细分领域都处在不断进化的过程中，不存在包打天下的量化策略和长时间有效的情况。
虽然量化投资策略已经形成比较固定的大类原则，但是理论和实战之间的差距也非常巨大。其特征就是会有不断的新的内容补充进来，并淘汰过时的策略和算法，而前沿策略（收益最高的那部分）则始终是部分头部量化团队黑箱而不可尽知。
还有一个值得观察的方向是，主观投资与量化投资处于融合过程，特别是传统股票投资。
一是如果市场上有足够的研究人员对某一标的物的评级，就可以通过量化方法进行排序整理，把一个主观评级信号变成一个量化信号；
二是在因子模型里面，本身也有很多基本面的因素，当然甚至也可以加入研究人员的主观判断作为某一项因子。
主观投资其实也经常使用量化方法，比如根据各类基本面指标进行排序、归因等，所以也是在相互学习。未来这类融合，也可以发生在数字货币市场。
数字货币适用于量化投资的原因前面已经提到，行业初期的跨交易所套利就是量化策略时段有效性的一个例子。目前最主要的原因还是全部的流动性分散在不同的池子，所以现货和现货之间的套利仍然会持续存在。
未来量化策略作用于数字货币的前景较大，原因在于：
1.期货期权等衍生产品的规模会很大，来源于各类人士的主观需求，如矿工套保、交易者获利、项目司库管理、金融服务需求等；
2.数字货币市场的规模还有很大提升空间，增长到一定程度就会有更多类型的衍生产品出现，而且随着成熟，基本面投资可能也会逐渐成为主流投资方法的一种，使得因子分析可以有更好的使用场景；
3.已经看到很多传统量化团队进入数字货币，这给整体不那么「专业」的数字货币量化提供新的弹药，鲶鱼的搅局会促使量化团队不断提升水平。
4.数字资产高波动的特性将持续很长时间，收益空间足够大，直到其主流化完成。
综上而言，在本行业发展量化投资，一方面需要不断地更新技术，改进交易策略，另一方面也需要行业自然发展的配合，目前的行业体量和各类工具仍不足以支撑完善的的量化策略，机构的进场将带来新的量化需求和行业水平的提升。一些专注于量化平台 / 策略开发的技术服务商在目前阶段或值得关注。


# 交易基础知识
场内交易：在交易平台上进行撮合，买卖价格公开，平台实时显示当前的报价，这个就叫做场内交易。
场外交易：除了在交易平台之外的交易，统称为场外交易市场，又叫做OTC交易市场，在交易平台之外还有一些其他的地方可以进行交易，这些市场没有集中的和统一的交易制度和撮合机制。
限价交易：限价交易即挂单交易，您可以自己设定买入价格，等市场价格波动到您设定的价格时即可成交。
市价交易：市价交易即不设定买入/卖出价格，可以保证及时成交，只需输入想买入的总数量即可。
指数交易：根据产品交易过程中的核心指标如订单数、买家数、支付件数、支付金额等，进行综合计算得出的数值。
量化交易：有时候也称自动化交易，是指以先进的数学模型替代人为的主观判断。极大地减少了投资者情绪波动的影响，避免在市场极度狂热或悲观的情况下做出非理性的投资决策。量化交易有很多种，包括跨平台搬砖、趋势交易、对冲等。
交易时间及涨跌限制
交易时间：7*24小时，全年无休市。
无涨跌停： 数字货币交易无涨跌停限制，股票有涨跌停限制，例如：5月28日比特币单日涨幅超20%。
交易单位：最小可买0.0001BTC(约0.6元)，没有股票最少买一手(100股)的买入限制。
随时交易：即T+0.股票是T+1交易，即当天买入股票，下一个交易日才可卖出。而数字货币是T+0交易，当天买入当天即可卖出。
提币与变现无时间限制：随时提币变现，资金流动性高。
成交的基本原则
限价交易：投资者可以设低于市场价格的买入价格，或高于市场价格的卖出价格的委托，当市场价格波动到其设定的价格时，即成交。当设定的价格和市价偏离较大时，容易出现无法成交的结果。
市价交易：以当时的市场价成交，在一定程度上可以保证投资者买卖指令及时成交，但与此同时，市价委托下单前投资者无法预知其交易价格，存在一定的不确定性。一般来说，行情波动越剧烈，市价交易的成交价格不确定性风险越大。
成交的基本原则：“价格优先，时间优先”原则。较高的买入价格优于较低的买入价格成交，较低的卖出价格优于较高的卖出价格成交，当委托价格一样时，挂单时间较早的委托单优于挂单时间较晚的委托单成交。
常见的专业名词详解
仓位：指投资人实有投资和实际投资资金的比例。
全仓：全部资金买入数字货币。
减仓：把部分数字货币卖出，但不全部卖出。
重仓：可用资金和数字货币相比，数字货币份额占多。
轻仓：可用资金和数字货币相比，可用资金份额占多。
空仓：把手里所持数字货币全部卖出，全部转为资金。
止盈：获得一定收益后，将所持数字货币卖出以保住盈利。
止损：亏损到一定程度后，将所持数字货币卖出，以防止亏损进一步扩大。
牛市：价格持续上升，前景乐观。
熊市：价格持续下跌，前景黯淡。
多头(做多)：买方，认为币价未来会上涨，买入币，待币价上涨后，高价卖出获利。
空头(做空)：卖方，认为币价未来会下跌，将手中持有的币(或向交易平台借币)卖出，待币价下跌后，低价买入获利。
建仓：买入数字货币。
补仓：分批买入数字货币，如：先买入1BTC，之后再买入1BTC。
全仓：将所有资金一次性全部买入数字货币。
反弹：币价下跌时，因下跌过快而价格回升调整。
盘整(横盘)：价格波动幅度较小，币价稳定。
阴跌：币价缓慢下滑。
跳水(瀑布)：币价快速下跌，幅度很大。
割肉：买入数字货币后，币价下跌，为避免亏损扩大而赔本卖出数字货币。或借币做空后，币价上涨，赔本买入数字货币。
套牢：预期币价上涨，不料买入后币价却下跌;或预期币价下跌，不料卖出后，币价却上涨。
解套：买入数字货币后，币价下跌造成暂时的账面损失，但之后币价回升，扭亏为盈。
踏空： 因看淡后市卖出数字货币后，币价却一路上涨，未能及时买入，因此未能赚得利润。
超买：币价持续上升到一定高度，买方力量基本用尽，币价即将下跌。
超卖：币价持续下跌到一定低点，卖方力量基本用尽，币价即将回升。
诱多： 币价盘整已久，下跌可能性较大，空头大多已卖出数字货币，突然空方将币价拉高，诱使多方以为币价将会上涨，纷纷买入，结果空方打压币价，使多方套牢。
诱空： 多头买入数字货币后，故意打压币价，使空头以为币价将会下跌，纷纷抛出，结果误入多头的陷阱。


一 什么是合约交易？
1 合约交易是指买卖双方对约定未来某个时间按指定价格接收一定数量的某种资产的协议进行交易。 合约交易的买卖对象是由交易所统一制定的标准化合约,交易所规定了其商品种类，交易时间，数量等标准化信息。合约代表了买卖双方所拥有的权利和义务。
简单点说就是 现在约好未来某个时间地点交易一定数量的某种商品。
2 合约交易是一种金融衍生品，相对于现货市场的交易，用户可以在期货合约交易中通过判断涨跌，选择买入做多或卖出做空合约，来获得价格上涨或者下跌带来的收益。
二 合约交易的作用？
标准化合约设计的初衷是为了对冲现货风险而设计的，为了锁定收益成本，对冲现货价格大幅波动的风险，从事大宗商品买卖的公司或个人会在期货市场下相同头寸的空单（多单），用来抵御风险。
比特币为代表的数字资产合约交易通常采取价差交割，在合约到期时，系统会对所有没有平仓位以交割价格进行交割结算。
三 合约交易的规则
1 交易时间
合约交易是7*24小时交易，只有在每周五16:00（UTC+8）结算或交割期间会中断交易。合约在交割前最后10分钟，只能平仓，不能开仓。
2 交易类型
交易类型分为两类，开仓和平仓。开仓和平仓，又分买入和卖出两个方向：
买入开多（看涨）是指当用户对指数看多、看涨时，新买入一定数量的某种合约。进行“买入开多”操作，撮合成功后将增加多头仓位。
卖出平多（多单平仓）是指用户对未来指数行情不再看涨而补回的卖出合约，与当前持有的买入合约对冲抵消退出市场。进行“卖出平多”操作，撮合成功后将减少多头仓位。
卖出开空（看跌）是指当用户对指数看空、看跌时，新卖出一定数量的某种合约。进行“卖出开空”操作，撮合成功后将增加空头仓位。
买入平空（空单平仓）是指用户对未来指数行情不再看跌而补回的买入合约，与当前持有的卖出合约对冲抵消退出市场。进行“买入平空”操作，撮合成功后将减少空头仓位。
3 下单方式
限价委托：用户需要自己指定下单的价格和数量。开仓和平仓都可以使用限价委托。
对手价下单：用户如果选择对手价下单，则用户只能输入下单数量，不能再输入下单价格。系统会在接收到此委托的一瞬间，读取当前最新的对手价格（如用户买入，则对手价为卖1价格；若为卖出，则对手价为买1价格），下达一个此对手价的限价委托。
4 仓位
用户开仓成交后，即拥有了仓位，同种合约同一方向上的仓位会合并。在一个合约账户中，最多只能有6个仓位，即当周合约多仓、当周合约空仓、次周合约多仓、次周合约空仓、季度合约多仓、季度合约空仓。
5 下单限制
平台对单个用户某个周期合约的持仓数量、单笔开仓/平仓的下单数量会做出限制，防止用户操纵市场。
当用户的持仓数量或委托数量过大，平台认为可能对系统和其他用户产生严重风险时，平台有权要求用户采用包括但不限于撤单，平仓等风控措施。平台有权采用包括但不限于限制总仓位数量，限制总委托数量，限制开仓，撤单，强行平仓等措施进行风险控制。
四 保证金
1 什么是保证金？
在虚拟合约市场上，用户只需根据合约价格，按一定比率交纳少量资金作为履行合约的财力担保，便可参与合约的买卖，这种资金就是虚拟合约保证金。
例如 你拿一个BTC 10倍看涨 ，这时候相当于你有10BTC，涨10个点，你就有2个BTC了（实际上是1.909个，具体算法后面讲）。但跌了，就先亏这一个BTC，这个BTC就是保证金。
2 什么是杠杆？
杠杆一种常见金融交易制度，即保证金制度。“杠杆”使投资者可交易金额被放大的同时，也使投资者获得的收益和承担的风险加大了。也就是放大了收益和风险。
3 保证金模式有两种：
1 全仓模式
用户开仓后,账户内的所有仓位持仓的风险和收益合并计算，持仓需要的保证金，会随着最新成交价的变化而变化。全仓保证金模式下，开仓的要求是开仓后的保证金率不能低于100%。
2 逐仓模式
每个合约的双向持仓将会独立计算其保证金和收益，只有开仓可用保证金大于等于开仓所需的保证金数量，用户才能进行委托。而逐仓保证金时，每个合约的开仓可用保证金可能不一致。
可以这么理解，全仓就是把所有的资金放在了一个池子里面，逐仓就是把部分资金放在了一个池子里，全仓爆仓的话 ，所有资金归零。逐仓爆仓的话，部分资金归零，但是逐仓比全仓更容易爆仓，主要是因为杠杆的原因，同样是10倍杠杆，如果全仓只下单一半资金的话，杠杆则等同于5倍 。
4 保证金计算公式
持仓保证金=（合约面值*持仓合约数量）/最新成交价/杠杆倍数
例如 现在BTC的最新价格为4000USD ，杠杆倍数为10， BTC的合约面值为100USD，买入开多40张，持仓保证金=（100*40）/4000/10=0.1BTC
也就是 在4000USD的价格 买入开多40张 ，下单0.1BTC 10倍杠杆，就相当于下单了1BTC。
5 保证金率：
保证金率是衡量用户资产风险的指标，保证金率越小，账户的风险越高。当保证金率小于等于0时，您的仓位将会被系统强制平仓。
保证金率 =（账户权益/占用保证金）* 100% - 调整系数
占用保证金 = 持仓保证金 + 冻结保证金
调整系数，为防止用户穿仓而设计。每一个品种的每一个杠杆倍数，都有一个对应的调整系数。如 BTC合约10倍杠杆调整系数为15%，20倍杠杆调整系数为 30%，5倍杠杆的调整系数为8%。
例如：
用户合约账户权益有2BTC，在价格为5000USD/BTC开多100张季度合约（合约面值为100USD），杠杆倍数为10倍，调整系数为15%，在不考虑成交手续费的情况下，该用户的强制平仓价为2537.5。
五 账户权益及盈亏计算
1 合约账户权益
合约账户权益，为该币种合约账户的总权益。
合约账户权益 = 账户余额 + 本周已实现盈亏+本周未实现盈亏
2 账户余额
账户余额是指用户在合约账户所持有的币种数量，即币币账户转入合约账户的币种数量。清 算时，用户交易所产生的的已实现盈亏将在该项上增减。
3 未实现盈亏
未实现盈亏，是用户当前持有的仓位的盈亏，未实现盈亏会随着最新成交价格变动而变化。
多仓未实现盈亏 =（1/持仓均价 - 1/最新成交价）* 多仓合约张数 * 合约面值
空仓未实现盈亏 =（1/最新成交价 - 1/持仓均价）* 空仓合约张数 * 合约面值
例如：
如用户持有100张BTC季度合约多仓仓位（合约面值为100USD），持仓均价为5000 USD/BTC。若当前最新价格为 8000USD/BTC，则现在的未实现盈亏=（1/5000-1/8000）*100*100 = 0.75BTC。
从公式的数学形态上来看，不是很容易理解算法。之前也有很多小伙伴不理解 ，明明是10倍开多，为什么涨了10个点 ，我的收益没有达到百分之100%，总觉得交易所是不是又坑我 。
我是这样理解的 ：
在比特币价格为4000USD的时候 ，你拿了一个比特币来期货这个大赌场玩，赌场就按照你拿了4000USD进来 ，比如你10倍梭哈压大（开多），价格涨了10% 到4400USD，此时 赌场要赔你 4000*10*0.1=4000USD。但你进赌场给的筹码是BTC，现在也要还BTC给你。此时比特币价格为4400，所以你得到的比特币是4000/4400=0.9090BTC。
收益率就是0.9090/1*100%=90.9%
从新整理：
持仓均价：4000USD
最新成交价：4400USD
涨跌幅：(4400-4000)/4400*100%=10%
多仓合约张数：1*10*4000/100=400张 （下单比特币个数*杠杆倍数*持仓均价/合约面值）
持仓价值：1*10*4000=40000USD （下单比特币个数*杠杆倍数*持仓均价）
开仓保证金：1BTC （开仓张数*合约面值/杠杆倍数/持仓均价）
USD收益：40000 * 10% =4000USD 持仓价值*涨跌幅
BTC收益：40000 * 10% /4400= 0.909BTC 持仓价值*涨跌幅/最新成交价
USD收益率：(4400-4000)/4400*100%=10% （ 涨跌幅）
BTC收益率：40000 * 10% /4400/1 *100% =90.9% (BTC收益/开仓保证金)
看完上面的公式有木有感觉更晕了 。
 
4 已实现盈亏
已实现盈亏，是用户已平仓仓位产生的盈亏，以及交易产生的手续费，并且尚未通过清算计算账户余额之中的盈亏。已实现盈亏在合约结算/交割前不能转出合约账户。
每笔平仓的已实现盈亏：
多仓已实现盈亏 =（1/持仓均价 - 1/平仓成交均价）* 平多仓合约张数 * 合约面值
空仓已实现盈亏 =（1/平仓成交均价 - 1/持仓均价）* 平空仓合约张数 * 合约面值
已实现盈亏与未实现盈亏 相对比 就是已经平仓结算的盈亏 ，所以计算公式的区别就是 按照最新价和平仓成交均价来计算的区别。
六 合约结算/交割问题
1 结算和交割的区别？
1 结算价格和交割价格计算方式不同
2 结算规则和交割规则不同
3 给用户感觉最大区别是： 结算后仓位还在，交割后就自动平仓了。
2 结算：
1 结算时间： 北京时间 每周周五16：00
2 结算价格：系统取该合约结算前最后一个小时的数量加权成交均价作为结算价格进行结算
3 结算规则：
当周无负债结算制度
系统采用当周无负债结算制度，当周交割合约不参与当周无负债结算。
当周无负债结算制度的意义在于将用户的盈利变为余额，使得盈利用户可以将盈利部分提走，结算并不会改变用户的实际盈亏情况，结算前与结算后用户的权益不会发生变化。
结算时将发生如下变化：
系统将根据结算价，计算用户需要结算的未实现盈亏，然后将未实现盈亏合并到已实现盈亏中，已实现盈亏在参与分摊后将转入账户余额
结算后，合约的持仓均价将变为此次的结算价格。此后的未实现盈亏将根据新的结算价格进行计算。
3 交割：
1 结算时间： 该合约最后一周的周五16:00（UTC+8）
2 结算价格：系统以交割前最后一小时BTC等币种美元指数的算术平均值作为交割价格。
3 交割规则：
合约在到期时，会进行交割。系统采用价差交割（现金交割）方式。
系统会将到期未平仓合约，以交割价格进行平仓。
平仓产生的盈亏计入已实现盈亏。
交割会产生手续费，此手续费也会计入已实现盈亏。
合约在交割前最后10分钟，只能平仓，不能开仓。
七 风险准备金
风险准备金，用于应付因强平单未能平出而产生的穿仓损失 。
每一个种合约品种，都有一个风险准备金。同一品种不同周期的合约共享同一个风险准备金。 如 BTC 周合约、次周合约、季度合约，共享同一个 BTC 风险准备金。
系统会在对用户进行强平仓时，接管用户的仓位，并在市场上进行平仓。平仓成交产生的盈利，会注入到相应品种的风险准备金。系统会在初始交易或者特殊情况下，手动划转到风险账户，部分资产用于增资风险准备金。
风险准备金使用：在进行每周结算以及交割时，如果有系统强平单未能平出，产生了穿仓亏损，则会由风险准备金优先进行赔偿，风险准备金不足以赔偿的部分，将进入分摊步骤进行分摊。
八 分摊机制
当市场行情波动较大，用户强制平仓后，按照强平价格无法成交时，导致亏损范围大于风险准备金。平台采用“分摊”制度，从本周盈利的账户中，每个账户按盈利等比分摊穿仓部分的损失。
1 全账户分摊制度
将所有强平单产生的穿仓亏损合并统计，并按照三个合约类型（即周，次周，季度合约）的盈利账户的所有收益作为分摊基数进行分摊。
分摊系数=穿仓亏损/所有盈利用户的收益之和
例：在周五进行结算/交割时，BTC当周，次周和季度合约的强平单一共有-120BTC的亏损。
首先用风险准备金进行填补，若填补完后还有-20BTC亏损。则需要由BTC合约盈利账户进行分摊。
假设盈利账户的所有收益为400000BTC，则分摊系数为20/400000=1/20000
某账户本周的当周，次周，与季度合约一共盈利2BTC，则该账户需要分摊的数量为2*(1/20000)=0.0001BTC
九 合约限价机制
为防止恶意操纵市 ，不同品种合约的开仓及平仓价格进行限制。
例如BTC季度合约限价
合约生成10分钟内(无基差限价时)：
最高价=现货指数（1 + 0.5%）；
最低价=现货指数（1 - 0.7%）；
合约生成了10分钟后（有基差限价时）：
如果（近10分钟基差平均值+现货指数）>现货指数 *（1 + 3%），则基差基准=现货指数 *（1 + 3%）；（）
如果（近10分钟基差平均值+现货指数）< 现货指数 *（1 – 4%），则基差基准=现货指数 *（1 – 4%）；
如果[现货指数 *（1 + 3%）]>（近10分钟基差平均值+现货指数）> 现货指数 *（1 – 4%）,则基差基准 =近10分钟基差平均值+现货指数
最高价=min (基差基准*（1+2.5%）,现货指数 *（1 + 3%）)
最低价=max (基差基准*（1-3.5%）,现货指数 *（1 - 4%）)
以上规则，开平仓都受限制，若开多或平空，当委托价高于最高买价，则将触发硬性限价；若开空或平多，当委托价低于最低卖价，则将触发硬性限价。
十 合约品种要素
 
 



委托类型/杠杆

如何调整杠杆
币安合约交易允许手动调整每个合约的杠杆。在选择合约时，可将鼠标移动在页面左上角并悬停在当前合约类别上（默认为BTCUSDT）。 
如需调整杠杆率，请转至订单输入字段并点击当前杠杆倍数（默认为 20 倍）。调整滑块或输入数值可设定杠杆率，然后点击[确认]即可。
值得注意的是，仓位越大您可以使用的杠杆倍数就越小。相反，仓位越小，可以使用的杠杆倍数就越大。
另外较高杠杆倍数会带来较高的强平风险。所以交易新手应该仔细考虑他们可用的杠杆倍数。 
标记价格与最新价格的区别
为了避免高波动时期出现价格飙升和不必要的强平，币安合约交易引入了“最新价格（Last Price）”和“标记价格（Mark Price）”。
最新价格很容易了解，它代表合约最新的成交价格。换句话说，交易历史中最近一笔交易的价格就是“最新价格”。它用来计算您实现的盈亏（PnL）。
“标记价格”是为了避免价格被操纵。它在计算时会结合资金数据和一揽子现货交易数据。而强平价格和未来盈亏将根据标记价格计算。
标记价格和最新价格有何区别
请注意，标记价格和最新价格可能是不同的。 
在设置使用止损价作为触发条件的订单类型时，可以选择将最新价格或标记价格作为触发条件。为此，请在订单输入字段底部的“触发条件”下拉菜单中选择希望使用的价格。
订单类型以及使用方式
币安合约中可以使用多种订单类型：
限价单
限价单是按特定限价在订单簿中挂出的订单。挂出限价单后，交易仅在市价达到限价（或更高价格）时达成。因此，通过限价单能够以较低的价格买入，或以高于当前市场价的价格出售。
市价单
市价单是以当前最佳价格进行买卖交易的订单。它是根据此前在订单簿发布的限价单执行的。在挂出市价单时，您需要支付市价单的吃单费用。
限价止损单
想要理解何为止损限价单，最简单的方式是将其拆解为止损价和限价。止损价就是触发限价单的价格，限价则是限价单在触发后的价格。这意味着，一旦达到设置的止损价，限价单将立即在订单簿中发布。
尽管止损价和限价可以相同，但并非必须如此。事实上，更安全的操作是在设置止损价（触发价格）时，如果是卖单则将其设置得比限价略高一些，如果是买单，则将其设置得比现价略低一些。这样可增加限价单成交的几率。
市价止损单
与止损限价单类似，止损市价单使用止损价作为触发器。然而，当达到止损价时，它会触发一个市价单。
限价止盈单
如果您已经充分理解止损限价单的定义，那止盈限价单就很好理解了。与止损限价单类似，它也包含触发价格（触发订单的价格）和限价（加入订单簿的限价单价格）。而止损限价单与止盈限价单之间的主要区别在于，止盈限价单只能用于减少未平仓头寸。 
止盈限价单可很好地用于管理风险，并将利润锁定在特定价格。它还可以与止损限价单等其他订单类型结合使用，以便更好地管理持仓。
请注意，限价单不属于 OCO 订单。比如说，如果您的止损限价单达到设定金额，同时您还持有一个有效的止盈限价单，则止盈限价单将始终有效，直至您手动将其取消。
您可以在订单输入字段中的“止盈止损限价”选项下设置止盈限价单。
市价止盈单
与止盈限价单类似，止盈市价单使用止盈价作为触发条件。在达到止盈价时会触发市价单。
您可以在订单输入字段中的“止盈止损市价”选项下设置止盈市价单。
跟踪止损单
跟踪止损单有助于锁定收益，同时限制未平仓头寸的潜在亏损。对于多头头寸，如果价格上涨，跟踪止损点也将随之上涨。反之，如果价格下跌，跟踪止损点便会停止移动。如果价格向相反方向移动特定的百分比（称为回调率），即会挂出卖单。空头头寸也是如此，但情况正好相反。跟踪止损点随市场向下移动，在市场开始上升时停止移动。如果价格向相反方向移动特定的百分比，即会挂出买单。
激活价格是触发跟踪止损单的价格。如果不指定激活价格，则当前的最新价格或标记价格将被默认为激活价格。您可以在订单输入字段的底部设置应使用哪种价格作为触发价格。 
回调率决定了跟踪止损点“跟踪”价格的百分比。因此，如果将回调率设为1%，并且交易按所选方向进行，则跟踪止损点将始终以1%的差距随价格变化。如果价格在交易的相反方向移动幅度超过1%，则挂出买单或卖单（具体取决于所选交易方向）。
如何使用合约交易计算器
您可在订单输入模块的顶部看到计算器图表。它允许您在做多或多空前进行相关数值计算。您可以调整每个选项卡下的杠杆滑块，以此来作为计算的基础。
计算器设有三个选项卡：
PNL – 使用此选项卡，根据目标入场价和脱手价以及头寸大小计算初始保证金、盈亏(PnL)以及股本回报率(ROE)。
目标价格 – 使用此选项卡，计算需要以何种价格退出头寸，以达到目标回报率。
平仓价格 – 使用此选项卡，根据个人钱包余额、预期进场价和头寸大小计算预估的平仓价格。 
如何使用双向持仓模式
在双向持仓模式下，可以在同一份合约中同时持有多头和空头头寸。这么做有什么好处呢？假设您因为看好比特币价格会长期上涨而持有未平仓的多头头寸，与此同时，您可能希望在较短的时间范围内快速做空。双向模式支持这种操作——在此情况下，快速做空不会影响的多头头寸。
默认的仓位模式为单向持仓。这就意味着对于单个合约您不能同时持有多空两个方向的仓位。如果您进行了此类操作，则两个方向的持仓将会相互抵消。所以在使用双向持仓模式时就需要手动启动。下面就是您需要进行的操作。
1. 转至屏幕右上方，然后选择[个人偏好]。
访问[头寸模式]选项卡，选择[双向持仓模式]。
如果您现在拥有未平仓的委托或仓位，则无法调整仓位模式。
什么是资金费率以及如何查看
资金费率确保永续期货合约的价格尽可能接近标的资产的（现货）价格。本质上来说，交易者将根据他们持仓情况“相互支付”，永续期货合约价格与现货价格之间的差价将决定哪一方获利。
资金费率为正时，做多向做空支付。资金费率为负时，则做空向做多支付。
如需详细了解该流程的原理，请阅读《什么是永续期货合约？》。
这意味着根据资金费率和您的未平持仓，您最终要么是付款的一方，要么是收款的一方。在币安合约交易平台，资金支付每8小时进行一次。您可在页面顶部标记价格旁边查看下个资金周期的所剩时间以及预计的资金费率。
如想查看之前每笔合约的资金费率，可将鼠标悬停在[合约信息]上方，并点击[资金费率历史]。
只挂单、有效时间以及只减仓
使用限价单时，您可在发布订单的同时设置附加指令。在币安合约中，此类指令可以是“只挂单”或“有效时间(TIF)”指令，它们决定了限价单的附加特性。您可在订单输入字段的底部查看。
“只挂单”意味着您的订单总是会先添加至订单簿，但永远不会与其中的既有订单成交。如果您只想支付挂单费用，就可以这样操作。
TIF指令则表示您可以设定订单有效的时间（在它们成交或失效前）。TIF指令有以下三种选择：
GTC（取消前有效）：订单将保持活动状态，直至其成交或取消。
IOC（立即成交或取消）：订单将立即执行（全部或部分执行）。如果只是部分执行，订单的未成交部分将会取消。
FOK（全部成交或取消）：订单必须立即全部成交。否则，订单根本不会执行。
当您处于单向持仓模式时，勾选“只减仓”（Reduce-Only）将确保新订单只会减少仓位，永远不会增加现有持仓。
持仓什么情况下会被强平
如果保证金余额跌至所需金额以下，将会发生平仓。保证金余额是币安合约账户余额，包括未实现的盈亏。也就是说，您的盈亏将导致保证金余额发生变化。如果使用全仓模式，该余额将作为全部仓位的保证金。如果使用逐仓模式，可将余额分配至各个仓位。
“维持保证金”表示维持仓位所需的最低保证金。金额取决于持仓量大小。仓位越大，需要的维持保证金越多。
您可以在右下角查看当前的保证金比率。如果保证金比率达到100%，所持仓位将被平仓。
当发生强平时，您的所有未平仓委托都将被取消。最合理的操作是通过追踪仓位来避免自动平仓，因为自动平仓会产生额外的手续费。如果您的仓位将要被强平，那么手动平仓将比自动平仓更加可取。
自动减仓及其影响
当交易者的账户规模低于0时，将用保险资金来弥补亏损。然而，在部分波动性异常剧烈的市场环境中，保险资金可能不足以弥补这些亏损，必须通过减少未平仓头寸来填补亏空。在这种情况下，您的未平仓头寸也会面临被减持的风险。
而减仓是按照特定队列顺序进行的，盈利能力最强、杠杆倍数最高的交易者会位于前列。将鼠标悬停在[仓位]选项卡并点击右边的[自动减仓](ADL) 可查看目前仓位在队列中的位置。





合约交易强行平仓规则
 
币安采用标记价格来避免因市场操控导致的强行平仓。风险和杠杆会根据用户的总风险进行调整; 总头寸越大，所需保证金越高，杠杆率越低。
强行平仓会发生在：
保证金余额=初始抵押资金+实现盈亏+未实现盈亏＜维持保证金
当被执行强行平仓时，账户中所有当前委托订单会被立刻取消。根据用户仓位风险等级，执行不同程度的强平操作，避免全部仓位被强平。 强平同时将会收取一笔 “爆仓清算”，因此，我们强烈建议用户在账户权益下降到维持保证金水平前，自行平仓以避免被强行平仓而产生额外的费用。
需要注意的是，我们采用FAK（Fill and Kill）的方式进行强平。 订单将尽可能多地成交，不成交的订单将会被自动取消。 与Fill or Kill订单不同，Fill or Kill订单要么全部成交，要么全部取消。剩余头寸将分配给风险保障基金或自动减仓。
当仓位较小的用户，发生强平事件时仓位将会被全部强平，对于被完全强平的用户而言，强平时会按照市场上的破产价格*进行清算。 当无法做到这一点，保险基金和/或交易对手清算将启动。
仓位较大的用户系统会优先取消当前委托订单，再通过强制减少仓位。若减仓后仍处于强平状态，那么全部仓位将被强平引擎以破产价格接管。
请注意：
*破产价格可能不在合约市场成交价格范围内。
**强行平仓的同时会通过邮件、短信和站内信告知用户，此功能作为风险提示无法保证及时发送或送达。因为个人网络拥堵和网络运营商的送达率不同，导致用户无法或延迟收短信提醒，我们无需因此对您承担任何形式的责任。
爆仓清算
用户爆仓时，保险金基金会收取一定比例的清算金，交易历史记录中标记为“爆仓清算”。但建议用户严格控制风险，避免爆仓。用户的强平价格并不会因此发生变化。
 
U本位合约	爆仓清算费率
BTCUSDT合约	2.00%
ETHUSDT合约、最高杠杆倍数为75倍的合约	3.00%
最高杠杆倍数为50倍的合约、DOGEUSDT 合约	4.00%
币本位合约	爆仓清算费率
BTCUSD合约	2.00%
ETHUSD合约	3.00%
最高杠杆倍数为20倍的合约、DOGEUSD 合约	4.00%
 
关于强平价格
当标记价格触及强平价格位置时，将发生强制平仓。建议用户密切关注标记价格与强平价格，避免其仓位被强平。
在双向持仓模式下，保证金模式选择了“全仓模式”，无论是“开多”或“开空”，持仓共享合约交易中同一强平价格。
 
如保证金模式选择了“逐仓模式”，根据对应仓位下保证金不同，将对应不同的强平价格。
币安通过复杂的风险引擎，在合约交易中提供了高杠杆。强平模式计算也相对复杂。相应地，您可以通过内置计算器来计算对应的强平价格



# 永续合约


多头和空头头寸持有人之间支付的资金费率 - 每 8 小时 - 取决于资金费率，当资金费率为正时，多头支付空头，当它为负时，空头支付多头。该机制旨在使期货合约价格尽可能接近指数价格。
1.比特币永续合约交易概念
OKEx永续合约是OKEx推出的以BTC等币种进行结算的虚拟合约产品，每一张合约代表100美元的BTC，投资者可以通过买入做多合约来获取虚拟数字货币价格上涨的收益，或通过卖出做空来获取虚拟数字货币收益。合约杠杆倍数为1～100倍。
与定期合约、交割合约的区别在于：
-到期日：每个交割合约存在固定的到期交割日，交割价格为交割前一小时的指数加权平均价；永续合约没有到期交割日，永不到期；
-资金费用：由于没有到期交割日，永续合约需要通过“资金费用机制”来让合约价格锚定现货价格；
-标记价格：永续合约使用标记价格计算用户的未实现盈亏，有效降低市场波动时不必要的频繁爆仓；
-每24小时结算：通过每24小时结算（香港时间16:00），将未实现盈亏转为已实现盈亏，提高资金使用灵活性；
-阶梯维持保证金率制度： 维持保证金率即用户维持当前仓位所需的最低保证金率。当保证金率低于维持保证金率+平仓手续费率时，即触发爆仓或强制部分减仓。对于不同仓位大小的用户，OKEx实行阶梯维持保证金率制度，即，用户的持仓仓位越大，维持保证金率越高，用户可选的最高杠杆倍数越低；
强制部分平仓：对于持仓仓位较大，处于level 3及以上档位的用户，当保证金率低于当前档位维持保证金率+平仓手续费率，但高于最低档位维持保证金率+平仓手续费率时，不会直接将全部仓位爆仓。系统将计算将仓位降低两个档位所需减仓张数，进行部分减仓。成功降档后，如果保证金率满足新档位的维持保证金率要求，部分减仓停止；如果依然不满足新档位的维持保证金率要求，将继续循环部分减仓流程。逐仓模式下，强制部分减仓过程中，该仓位被冻结无法进行相关操作；全仓模式下，强制部分减仓过程中，永续合约该币种账户被冻结无法进行相关操作。
2.合约要素：

全自动交易
如果说交割合约的期现套利，由于价差较大、交易周期较长，我们还可以通过手工交易来完成；永续合约的资金费策略，由于其价差小、机会转瞬即逝、对交易成本极其敏感、需要不断切换高资金费、高价差品种等特性，我们只有通过程序全自动执行这一系列低延时+高精度操作。
由于永续合约分成币本位永续合约、USDT本位永续合约两类，我们也根据这两类不同的永续合约，设计了两套不同的交易执行程序，而每一套程序，又包括了开仓逻辑和平仓逻辑。
一、币本位永续
开仓逻辑
1.遍历所有币本位永续合约当期资金费率和下期预测资金费率，找到资金费率大于我们设定要求的币种（代表此时做多现货、做空合约，我们能够收取到较高的资金费率）
2.实时跟踪该币种的期现价差比率（即币本位永续合约价格减去现货价格的百分比）
3.当实时期现价差比率大于设定值，立即买入现货
4.现货成交后，将该币种划转至币本位永续账户作为保证金
5.在币本位永续合约账户做空等市值的空单
6.完成开仓逻辑，更新配置文件中的现货、合约持仓记录、可用资金
平仓逻辑
1.遍历所有币本位永续合约持仓币种当期资金费、下期预测资金费率，找到资金费率小于我们要求的币种（代表此时我们已经只能收取极低的资金费率，或是要支付资金费率）
2.实时跟踪该币种的期现价差比率（即币本位永续合约价格减去现货价格的百分比）
3.当实时期现价差比率小于设定值，立即平仓永续合约空头
4.永续合约释放保证金，将该币种释放的保证金划转至现货账户
5.现货卖出平仓，完成一轮平仓逻辑，和这一轮开、平的资金流转
6.更新配置文件中的现货、合约持仓记录、可用资金
二、USDT本位永续
开仓逻辑
1.遍历所有USDT本位全仓永续合约当期资金费率和下期预测资金费率，找到资金费率大于我们设定要求的币种（代表此时做多现货、做空合约，我们能够收取到较高的资金费率）
2.实时跟踪该币种的期现价差比率（即USDT本位永续合约价格减去现货价格的百分比）
3.当实时期现价差比率大于设定值，立即同时等市值开多现货、开空USDT本位永续合约
4.完成开仓逻辑，更新配置文件中的现货、合约持仓记录、可用资金
平仓逻辑
1.遍历所有USDT本位永续合约持仓币种当期资金费、下期预测资金费率，找到资金费率小于我们要求的币种（代表此时我们已经只能收取极低的资金费率，或是要支付资金费率）
2.实时跟踪该币种的期现价差比率（即USDT本位永续合约价格减去现货价格的百分比）
3.当实时期现价差比率小于设定值，立即同时对现货、USDT本位永续合约进行平仓
4.完成平仓逻辑，更新配置文件中的现货、合约持仓记录、可用资金
三、附加功能
以上描述的逻辑，是基础的开、平仓的实现逻辑，与此同时，无论是币本位永续，还是USDT本位永续，我们都为程序设计了以下的附加功能：
1.考虑到资金容量的问题，程序支持分批交易和拆单，减小对特别是小市值币种的市场冲击
2.期现价差比率，我们在跟踪过程中采用的是保守的算法，比如准备开仓时，我们的期现比率价差，用的是现货的卖5价与期货的买5价之间的比率价差；而在准备平仓时，我们反过来，用的是现货的买5价和期货的卖5价之间的比率价差
3.策略的关键参数包括资金费率的进出场阈值、期现价差的进出场阈值、分批交易的金额，都设计成外接的配置文件，可以灵活调整
4.对于报单未成交问题，专门处理了报单、撤单、追单逻辑，确保套利头寸双边成交。
5.整个资金费率策略，包含了资金费率轮动的大逻辑。在一轮一轮的开、平仓过程中，我们不断地在高资金费的币种建仓，吃资金费，等到该币种资金费率降低，再平仓切换下一个高资金费币种，继续吃高资金费，由此逻辑不断进行轮动，从而增强收益。
如何执行自动交易
编写+调试完成策略，下一步我们就将部署执行自动交易了。部署自动交易，分为四步。
第一步，策略源码打包上传云服务器
我们之所以选择云服务器交易，是因为第一，数字货币市场是7*24小时交易的，我们的个人电脑很难做到常年稳定的不关机，第二，许多数字货币的API使用国内IP是无法访问的，所以我们的最优选择，是租用一台物理地址位于海外（地址靠近想要交易的交易所）的服务器。出于稳定性考虑，我们服务器选择Linux系统。
上传我们可以通过Xsehll的sz/rz命令。上传完成后，我们可以在服务器中查看到对应的策略工程项目文件。

第二步，配置参数
参数分为基础参数和策略参数，基础参数位于common模块，需要配置包括最基本的交易所access_key，secret_key，最大开仓金额total_amount，以及每次开仓数量every_lot，此处every_lot是按照合约的张数设定，在交易现货时，会自动按照合约张数对应的面值，计算现货交易量。

策略参数部分，位于coin_swap模块。该模块的参数包括3个开仓参数，funding_rate_limit：开仓最小的当期资金费率阈值，funding_rate_next_limit：开仓最小的下期预测资金费率阈值，price_thresh_open：合约、现货的最小开仓价差（大于价差才开仓）。以及3个平仓参数：funding_rate_exit_limit：当期资金费率最大不超过的值，funding_rate_next_exit_limit：下一期预测资金费率最大不超过的值，price_thresh_close：合约、现货的平仓价差（小于价差才平仓）。
至于配置文件最后的spot和swap部分，在初始不需要设定，由程序后续在执行开平仓操作时自动写入，比如我们此时截图状态，持有了eos、eth的现货和永续合约。
第三步，开启screen镜像
由于我们选用的是Linux系统，如果直接在控制台运行程序，当我们关掉Xsehll或其他服务器登陆软件后，程序会自动停止。为保证程序一直在后台运行，我们需要引入Screen工具，现在Linux系统安装Screen，随后用如下命令：
先用screen -S，创建窗口，窗口里面，和控制台一样的命令运行自动交易py脚本，程序启动后，用ctrl+a，再按d，detach这个screen，哪怕我们关掉Xsehll，仍然能够保证程序在后台7*24运行。
第四步，运行策略，走你！
在策略运行前，最后一步的准备工作，是在账户中放入足够的usdt。对于币本位永续，我们只需要在币币账户存入相应数额的usdt，程序会在交易过程中，自动完成划转功能；而对于U本位永续，我们需要在币币账户、U本位永续全仓账户存入足额的usdt（建议初始币币和U本资金1：1配置）。
然后我们就可以开启策略了，开启之后需要做什么？似乎什么也不需要做，静静等待策略自动交易就好。过去一个月，似乎实盘成绩还不错。
永续合约是一种衍生品。从交易的角度来说，它类似于传统的期货合约，但又有一些不同之处。首先它没有到期或结算日，永续合约类似于一个保证金现货市场，因此它的交易价格接近于标的参考指数价格，这与期货合约不同，由于基差的原因，期货合约的交易价差可能存在显著的不同。其次锚定现货价格的主要机制是资金费用。
永续合约目前的主要形式是滚动合约（Rolling Spot Futures）。滚动合约是一种当日结算并自动展期的期货合约，每个交易日结算损益，交易者持有的合约头寸会在交易日结束时自动展期。此外，还会对资产的现金流进行交换，多头向空头支付资金费用，以补偿空头的资金成本。滚动合约实际上相当于自动续期现货合约和日度货币互换的结合，这种产品起源于1993年芝加哥商品交易所（ChicagoMercantile Exchange，CME）为避免现货底层结算的巨大成本而开发的外汇滚动合约，随后又出现了黄金滚动期货合约等品种，主要面向网络零售市场，服务没有实物交割需求的小额投资者。此类合约操作相对简单，不需要考虑交割和换仓等步骤，对投资者的专业性要求相对较低，可以提供与现货相接近的使用体验。
永续合约的市场机制
在交易期货合约时，交易者需要了解期货市场的几种机制。 交易者需要注意的关键部分是：
公平价格：永续合约使用合理公平价格方法。公平价格决定了未实现盈亏以及强平价格。
起始和维持保证金：这些关键的保证金水平决定了可以使用多大的杠杆，以及在什么价格会触发强制平仓。
资金费用：买方和卖方之间每隔 8 小时定期支付费用。 如果费率为正，多仓将支付，而空仓将获得资金费率，如果费率为负，则相反。请注意，您只有在资金时间戳时持有仓位，你才需要支付或收取资金费用。
资金时间戳：00:00（UTC+8）、08:00（UTC+8）和16:00（UTC+8）。交易者可以在交易页右上角的查到当前合约的资金费率。 同样您也可以在个自的“合约明细”中查到这个费率。 历史费率可参见资金费率历史。
永续合约适合普通投资者，符合区块链资产非中心化的理念，适合通证市场现状，可以防止累积穿仓分摊影响投资者预期，增加市场活跃度，方便进行套利和套保，有利于引入机构投资者，完善市场定价机制。
永续合约没有期限的限制，套利者使用永续合约执行策略时，不需要担心合约交割而价差还没有向预期方向变化而产生额外的换仓成本，可以增加市场定价的有效性。套保者使用永续合约可以更方便地选择套保的时间，避免因穿仓分摊累积而无法进行套保，或合约时间太短而反复换仓。

永续合约是以BTC等币种进行结算的虚拟合约产品，投资者可以通过买入做多合约来获取虚拟数字货币价格上涨的收益，或通过卖出做空来获取虚拟数字货币下跌收益。合约杠杆倍数为1～100倍。
与定期合约的区别在于：
- 到期日：每个交割合约存在固定的到期交割日和交割价格；永续合约没有到期交割日，永不到期；
- 资金费率：由于没有到期交割日，永续合约需要通过“资金费率机制”来让合约价格锚定现货价格；
- 标的指数：永续合约使用指数价格计算用户的未实现盈亏，有效降低市场波动时不必要的频繁爆仓（指数价格的选取方式请参见其他文档）
- 阶梯维持保证金率制度： 维持保证金率即用户维持当前仓位所需的最低保证金率。当保证金率低于维持保证金率时，即触发爆仓或强制部分减仓。对于不同仓位大小的用户实行阶梯维持保证金率制度，即，用户的持仓仓位越大，维持保证金率越高，用户可选的最高杠杆倍数越低；
2.合约要素
合约要素	BTC	ETH	EOS	LTC	BCH	XRP
合约标的	BTC	ETH	EOS	LTC	BCH	XRP
合约乘数	1 USD	1 USD	1 USD	1 USD	1 USD	1 USD
报价单位	指数点	指数点	指数点	指数点	指数点	指数点
最小变动价位	0.1	0.01	0.001	0.01	0.01	0.0001
杠杆倍数	1～100倍	1～50倍	1～50倍	1～50倍	1～50倍	1～50倍
3.手续费率
Taker: 0.05%
Maker: 0.02%

什么是永续合约？
简单来说就是：1.带杠杆；2.无交割期；3.可以永久持仓；4..引入“资金费率机制”让合约价格锚定现货价格。
永续合约分为正向合约和反向合约：
正向合约，即稳定币合约。比如用USDT或者法币对比特币做合约交易。
反向合约是通过标的物币本位进行开仓平仓操作和结算的，假如要操作BTC/USDT合约，那么你需要用BTC来开仓下单，并且最终通过BTC进行结算的方式。
正向合约交易风险低，波动小，反向合约交易风险高，波动也大。
永续合约有两个仓位模式分别是逐仓和全仓
比如你买10u的10x倍杠杠，就相当于借了90u+你本身的10u，现在你有100u的单了，如果这个单亏了10%也就是你10u。逐仓就是只用这10u保证金，跌了10%亏完10u就爆仓.
全仓的话，如果你账户里还有10u的话，跌10%以后就会用你账户里那10u当保证金，直到你账户里的10u也亏完。
根据合约计价单位和缴纳保证金基准单位的关系，永续合约分为正向合约和反向合约。所谓反向合约也叫币本位合约，即以USD计价，以对应数字资产币种收取保证金和计算盈亏。正向合约，即以USDT计价，以USDT作为保证金和计算盈亏的合约。
币安U本位合约手续费怎么算？
结算资金= 持仓名义价值 x 资金费率
仓位名义价值 = 标记价格 x 持有合约数量
资金费率由两部分组成：利率和溢价。其中，溢价解释了为什么永续合约的价格将与标的价格变化趋势趋同。
币安在资金费率中使用的是固定利率，并假定持有现金获得的利息高于持有等值BTC获得的利息。默认情况下，利率设定为每天0.03%(每个资金费率结算周期为0.01%)*，并可能根据联邦基金利率等市场因素进行调整。
*LINK/USDT, LTC/USDT和BNB/USDT永续合约的利率为0%。
在波动性较强的时期，永续合约和标记价格可能会出现分叉。此时，溢价指数将被用来促使合约市场价格和现货价格趋同。每种合约的溢价指数是分别计算的，公式如下：
溢价指数(P)=【Max(0,冲击买入价格-标记价格)- Max(0,标记价格- 冲击卖出价格)】/现货价格
冲击买入价格=买入达到冲击金额时的价格
冲击卖出价格=卖出达到冲击金额时的价格
冲击金额影响是指用200 USDT的保证金可交易的金额(以USDT计价); 在默认水平下，是4,000USDT。
币安每秒计算一次溢价指数，并在资金费率计算周期内将所有指数以时间加权平均值进行计算。
资金费率计算公式：
资金费率(F)=溢价指数(P)+Clamp(0.01%-溢价指数(P)，0.05% 到 -0.05%)
换句话说，只要溢价指数介于-0.04%至0.06%之间，那么资金费率将等于0.01%(利率)。
如果(利率(I)-溢价指数(P))在+/- 0.05%之内，则F = P +(I-P)= I。换而言之，资金费率将等于利率。
U本位合约和币本位合约区别
跟币本位合约相比，U本位合约继承了其大部分设计，而其独有设计所带来的保值、直观的好处外，还有几点设计值得注意。
1.同一币种同一时间 既可开多又可开空
多空双向持仓就是对同一币种同一时间即可开多仓又可开空仓，尤其是在震荡行情，如果纠结到底是做空还是做多，你可以利用多空双向持仓进行锁仓，锁住风险，待行情明朗即可平掉一方，保留有利一方。这个是新手玩家会经常使用的一个功能，等到成为高段位玩家或许就不必如此了。
2.双向持仓 仅收一侧保证金
如果你同一币种你同时持有多仓和空仓，那么按照永续合约常见规则可是要缴纳两份保证金的，但U本位合约不会这样，因为其仅收一份保证金，哪一份呢?需缴纳较多的那一份。例如，按惯例一侧需收100USDT的保证金，另一侧是200USDT，那么最终只会收取200USDT。带给用户最直接的好处就是一份钱可以开两份仓。
3.浮盈(未实现盈利)可用来开仓
浮盈开仓就是假定仓位现在平掉可能会拿到手的盈利，是一个预估值。虽然你没有平仓落袋为安，但是这份预估的收益却是可以用来开仓的，相当于是拿未来的钱作为本金去赚更多钱。
举个例子，你在BTC 9000刀的时候开了10个BTC的多仓，涨到10000刀时，你赚了10000刀，这10000刀系统是自动计入可用资产里面的，可用资产的所有资产都可以支持你继续开仓，你可以选择开多，也可以选择开空。这10000刀可以支持你在当前价位下开多少仓呢?如果你开了100倍杠杆，那就是100个BTC，在别的交易所，你的浮盈是不可用的，而在58交易所，你的浮盈可以再给你开最多100个BTC的仓位。
4.采用风险度衡量爆仓风险
一般来说，衡量爆仓与否的指标是“强平价格”，而“U本位合约”则是用风险度，并且是全部仓位不分币种汇总到一个风险度，爆仓线为100%，但是其本质还是看保证金是否满足维持保证金下限。这样设计的好处是即便其中部分仓位亏损，但只要其他仓位盈利稳定足够安全，那么很大概率就所有仓位都安全。颇有些“一荣俱荣、一损俱损”的味道。
欧易合约手续费怎么算的？
Okex永续合约手续费一般挂单在0.02%~0.015%之间，吃单在0.05%~0.03%之间。
资金费用每12小时收取一次，收取时间在每天10:00和22:00合约结算之后。
只有在该时刻持有仓位时，用户才需要支付或收取资金费用 资金费用(以美金算)=面值*张数*资金费率 若资金费率为正，则多方持仓方向空方持仓方支付资金费用 若资金费率为负，则空方持仓方向多仓持仓方支付资金费用 资金费率=Clamp(MA((futuremid-现货指数价格)/现货指数价格+interst), -0.25%, 0.25%)
在合约交割到期之前，用户可以根据市场行情和个人意愿，自愿地决定买入或卖出合约。
已实现盈亏为用户在实际平仓时所发生的损益。
合约已实现盈亏：
买单方向：合约已实现盈亏 = (合约面值 / 结算基准价 – 合约面值 / 平均平仓价格) * 平仓数量
例如某用户以结算基准价500 USD/BTC 买入开多2张BTC合约，然后以价格 1000 USD/BTC卖出平多1张合约，则合约已实现盈亏 = (100 / 500 – 100 / 1000) * 1 = 0.1 BTC。
卖单方向：合约已实现盈亏 = (合约面值 / 平均平仓价格 – 合约面值 /结算基准价) * 平仓数量
例如某用户以结算基准价500 USD/BTC 卖出开空10张BTC合约，然后以价格 1000 USD/BTC买入平空8张合约，则合约已实现盈亏 = (100 / 1000 – 100 / 500) * 8 = – 0.8 BTC。
合约未实现盈亏：
买入：合约未实现盈亏 = (合约价值 / 结算基准价 – 合约价值 / 最新标记价格) * 持仓量例如某用户以结算基准价500 USD/BTC 买入开多6张BTC合约，现在最新成交价为600 USD/BTC，则合约未实现盈亏 = (100 / 500 – 100 / 600 ) * 6 = 0.2 BTC。
卖出：合约未实现盈亏 = ( 合约价值 / 最新标记价格 – 合约价值 / 结算基准价) * 持仓量
仓位保证金=开仓价值/杠杆(即起始保证金)+追加的保证金-减少的保证金+未实现盈亏
此外，爆仓风险是根据仓位保证金及当前仓位所需的维持保证金计算，数值越大表示风险越高，当风险达到70%时，平台会发出强平预警通知,超过100%的时候即触发强平流程。
其中，逐仓的爆仓风险=维持保证金/仓位保证金*100%
全仓的爆仓风险=维持保证金/（可用余额+仓位保证金）*100%
合约交易的风险有哪些？
2022-04-04 分类：比特币市场 阅读()
关于合约交易，大多投资者看中的是其具有高杠杆性和高收益，但同时这也意味着高风险，未知的风险也让新人投资者望而却步，对市场行情把握度不足。所谓合约风险，就是指在交易合约的不确定性，可能会遭受收益损失甚至本金损失的风险。所以新人必须充分了解合约交易存在哪些风险，在能承担合约交易的风险下开通合约交易。
合约交易可能会存在以下风险：
一、价格波动的风险。 合约交易作为一种特殊的具有投资价值的产品，其价格受多种因素的影响，价格波动大，投资者在实际操作中难以全面掌握行情走势，因而存在出现投资失误的可能性，如果不能降低风险，则可能遭受较大的损失，投资者必须独自承担损失。
可以看下图显示的市场行情波动，在2022年3月16日的10:00-11:00，比特币的价格波动是较大的，短时间内出现了暴涨暴跌，这是投资者难以准确预判的。

二、强制平仓风险。投资者需要知道合约交易具有高杠杆的特点，可能导致快速盈利或者亏损。若交易的方向和行情的波动相反，会造成较大的亏损。根据亏损的程度，投资者需要追加数字货币保证金或者减少仓位，否则其持仓可能会被强制平仓，投资者必须承担由此造成的全部损失。
而在很多交易所的合约交易，就有标注好仓位的强平价格和爆仓风险百分比，投资者可以参考这两个数值，对自身仓位的强制平仓风险有一定的了解，根据风险调整仓位。

三、交易风险。投资者在交易所的合约交易系统内，提交的委托单一经成交，即不可撤销，投资者要提前了解合约交易可能带来的风险。同时，交易所不会对投资者作出获利保证，并且不与投资者分享收益或共担风险。
四、政策风险。数字货币合约交易可能面临一定区域内的政策监管风险，投资者在交易之前需先了解交易地域的政策监管背景，谨慎作出交易判断。
五、不可抗力因素带来的风险。由于一些非交易所能控制的因素，例如地震、水灾、火灾等不可抗力因素或者计算机系统、通讯系统故障等，可能造成投资者的订单无法成交或者无法全部成交，投资者需要承担由此导致的损失。
六、其他风险。 当投资者使用高倍杠杆开合约交易时，可能会对投资者自身和市场带来较大的风险，一般来说，交易平台都会对此采取措施。例如很多交易所为了维护市场稳定，会对使用了过高杠杆的仓位进行监控，当交易所判断投资者持仓有可能会对市场稳定造成较大影响时，将会采取相应的处理措施，包括但不限于沟通、揭示风险、强制减仓、强制平仓、撤单等，并将给予投资者书面解释。这也是很多交易所对其他投资者的一种保障措施，提供稳定和安全的交易环境。
以上就是合约交易可能存在的风险，对投资新人来说，要谨慎判断各项风险，合理分配资金进行合约交易
合约基本概念
和长达12年的加密货币历史相比，加密货币合约交易的历史也是相当的悠久。合约交易一直是受欢迎的加密货币衍生品之一，甚至吸引了不少投资新手的加入，但是对于新手来说，还是会将合约的一些基础概念混淆。因此在开始合约交易前，新手应该要对合约交易的基本概念有一个了解。
什么是加密货币合约交易？
加密货币合约交易是投资者通过判断行情涨跌，选择买入做多或者卖出做空合约，来获取数字货币价格上涨或下降的收益。加密货币合约的概念和传统合约相同，唯一的差异是标的资产是比特币或以太坊等加密货币。
投资者可以在加密货币交易所进行合约交易，像很多交易所就支持合约交易，目前很多合约市场已经支持多个正向和反向合约市场，最高支持100倍杠杆。
什么是永续合约交易？
永续合约是一种创新型金融衍生品，类似于一个担保资产市场，它的价格接近标的参考指数价格，与传统期货不同的是，永续合约没有到期日。因此在永续合约的交易中，用户可以一直持有合约直到平仓，像很多交易所的合约交易就是永续合约，平台提供7*24小时交易，既无到期日也无结算时间限制。
永续合约主要的特点是采用了资金费用机制。通过这个费用机制的设定，永续合约价格就可以锚定现货价格。由于没有交割日，永续合约引入了现货价格指数的概念，并使用资金费用机制，来使合约市场价格与现货价格趋于一致。例如很多合约的资金费用就是每隔8小时支付或收取一次，如果此费率为正，多仓将支付资金费用而空仓将获得资金费用，如果费率为负，则相反。需要注意的是，只有在资金费用结算时间点持有仓位才需要支付或收取，而且资金费用是多仓用户与空仓用户之间支付，不参与收取任何资金费用。
什么是正向/反向合约？
正向合约又称“USDT本位合约”，以BTCUSDT为例，它的特点是持有稳定币USDT即可进行合约交易，计价货币为USDT，结算货币也是USDT。正向合约的优势就是持有USDT就可以进行多个品种交易，避免币价波动风险，也降低了用户的换仓交易成本。
假设行情下跌，投资者用正向合约交易，因为所需的担保资产是USDT，BTC币价下跌不会影响USDT担保资产的价值，投资者不需承担像在反向合约中持有BTC、ETH等加密货币进行开仓及作保证金所带来的损失。
而反向合约则是“币本位合约”，以BTCUSD为例，它的特点是需持有结算货币，如BTC、ETH才能进行合约交易，计价货币为USD，但结算货币是BTC、ETH。假设行情上涨时，投资者用BTC、ETH进行反向合约开多，由于反向合约是持有什么币种，赚取的就是什么币种，所以除了合约开多的收益外，投资者还能赚取因币种价值上升带来的盈利。
现货和合约交易区别

对于很多初入加密世界的用户来说，一时间很难区分现货交易和合约交易两者到底有何不同，此外在什么样的市场环境下应该选择哪种交易模式？本文就为大家详细介绍一下～

一、现货交易，直接实现数字货币之间的兑换
现货交易也称为币币交易，是按照价格优先、时间优先的顺序完成撮合交易，直接实现数字货币之间的兑换。
现货交易就跟我们平时买东西一样，一手交钱一手交货。举个例子，假设你买了一个BTC，那么就真真实实地拥有了这个BTC，你可以把它放在交易平台中用于交易，可以把它转入自己的钱包，或者直接转送给别人都可以。
现货交易的优点在于，你买到的币就属于你，无论价格涨跌你手中币的数量都不会变化。而缺点就是，只能当币价上涨时你才能盈利；如果币价下跌，就只能卖出止损或继续持币等待币价回调。
二、合约交易，加密市场金融衍生品
合约交易与现货交易相对，现货遵循的是传统交易方式（即低买高卖）的原则，合约交易是指买卖双方对约定未来某个时间按指定价格接收一定数量的某种资产的协议进行交易。按照交割方式的不同，可以将合约分为传统的交割合约和永续合约；两者的主要区别就是交割合约有固定交割日，而永续合约没有。合约是加密市场的金融衍生品，不同于现货市场，合约交易也需要构建独立的衍生品交易市场。
在合约交易中，用户可以通过判断涨跌，选择买入做多或卖出做空合约来获取数字资产价格上涨或下降带来的收益。永续合约没有到期日或结算日，通过资金费用机制锚定现货市场价格，用户交易时需转入保证金。
永续合约包括正向合约和反向合约。在正向合约中，用户持有稳定币USDT即可参与交易；而反向合约需持有结算货币，如BTC和ETH等。虽然合约增加了交易的灵活性，但对用户的技术要求更高。此外，仓位管理、点位选择、止盈止损和心态控制等都是合约交易中非常重要的环节。
三、两种交易模式的区别总结
1、总的来说，现货交易适合初入加密世界的小白用户，交易操作最简单便捷，无论价格涨跌用户手中币的数量都不会变化，但只有行情较好、币价上涨时才能盈利；现货交易对技术要求并不高，主要看重的是某个数字货币未来升值的潜力。
2、在合约交易中，用户通过判断涨跌，选择买入做多或卖出做空合约来获取数字资产价格上涨或下降带来的收益。但如用户交易方向判断失误，需要承担同等比例的损失风险。合约交易对技术要求较高，需要用户具备一定的技术分析和止盈止损技能。
3、合约交易一般和杠杆结合在一起，但又和杠杆交易不同。杠杆交易的优势在于支持更多币种，适合有多币种交易需求的用户；合约交易的优势是支持更高的杠杆倍数，且没有借币利息，适合偏好高倍数杠杆的用户。在合约交易中，用户可以根据行情走势来灵活调节杠杆，当倍数盈利时可调高杠杆放大收益，以小博大；亏损时，可增加保证金或调低杠杆，降低爆仓风险。



# 币安交易所

币安名词解释

仓位模式 单向持仓 双向持仓
单向持仓
单向持仓模式下，一个合约只允许持有一个方向的仓位。

双向持仓
双向持仓模式下，一个合约可允许同时持有多空两个方向的仓位，并且同一合约下不同方向仓位风险对冲。
若币本位合约存在持仓或者挂单，不允许调整仓位模式。仓位模式调整对所有合约统一生效。该设置仅对U本位合约生效


保证金模式 全仓 逐仓

BTCUSDT 永续 保证金模式
· 调整保证金模式仅对当前合约生效。
全仓保证金模式: 保证金资产相同的全仓仓位共享该资产的全仓保证金。在强平事件中，交易者可能会损失全部该保证金和该保证金资产下的所有全仓仓位。
逐仓保证金模式: 一定数量保证金被分配到仓位上。如果仓位保证金亏损到低于维持保证金的水平，仓位将被强平。在逐仓模式下，您可以为这个仓位添加和减少保证金。
当前合约存在持仓或挂单，不支持调整保证金模式


资产模式 单币保证金模式 联合保证金模式 

单币保证金模式
· 仅支持使用合约的保证金资产交易U本位合约。
· 保证金资产相同的全仓仓位间盈亏互相抵消。
· 支持全仓和逐仓。
联合保证金模式
· 可跨保证金资产交易U本位合约。
· 不同保证金资产全仓仓位间盈亏相互抵消。
· 目前仅支持全仓。
该设置仅对U本位合约生效。开启联合保证金前，请先详细阅读联合保证金介绍，以便更好得使用联合保证金模式和控制U本位合约账户风险。


调整杠杆 2x

当前杠杆倍数最高可持有头寸： 300,000,000 USDT
杠杆调整将同时影响当前仓位和挂单的杠杆。
选择超过 [10x] 杠杆交易会增加强行平仓风险，请注意相关风险。


委托

委托保证金：提交此委托所需的保证金。减仓不需要保证金。

限价委托
限价委托是指以特定或更优价格进行买卖，限价单不能保证执行。

市价委托
市价委托是指以目前市场可获得的最优价格进行快速买卖

止盈止损委托
当设定的价格被触发时，止盈止损委托会自动触发。交易者需要设定一个价格去触发该类型委托。该类委托可以应用于设置限价止损和限价止盈委托。
请注意，当保证金不足或仓位超过上限时系统会自动撤销执行该委托

市价止盈止损委托
当设定的价格被触发时，市价止盈止损委托会自动触发。交易者需要设定一个价格去触发该类型委托。该类委托可以应用于设置市价止损和市价止盈委托。
请注意，当保证金不足或仓位超过上限时系统会自动撤销执行该委托。

跟踪委托
跟踪委托指的是行情在回调的情况下，将交易者设定好的委托提交至市场的策略委托。当市场的最新价格（标记价格）达到交易者设定该策略后最高（最低）价格的（1±回调幅度）后，即会触发限价止损委托，执行价格为最高（最低）价格的（1±回调幅度）。

只做Ｍaker (Post Only) 
只做Ｍaker (Post Only) 订单不会立即在市场成交，否则将被取消。



冷静期
该设定可禁止合约账户相关交易功能，包括U本位合约、币本位合约、网格交易、对战与期权。您不得在冷静期内重启交易功能。启用冷静期前，必须平掉所有仓位和当前委托。了解更多
关闭合约交易功能


价差保护

开启价差保护功能后，止盈止损达到触发价，如果该合约的最新价与标记价格价差超过该合约的设定闽值，止盈止损将不会被触发防止价格波动影响您的止盈止损策略。进入交易规则查看闽值。请注意价差保护只会在开启后生效，对未开启时的历史订单无效，反之亦然。API订单不受价差保护开关限制。
该设置仅对U本位合约生效


仓位表

数量
U本位合约交易单位为USDT等稳定币单位时，显示的持仓数量为根据实际币本位数量换算而来的，数值随着合约最新价格变动而变动。

开仓价格：持仓的平均买入/卖出成交价格

标记价格
该合约的实时标记价格。此标记价格将用于计算未实现盈亏及保证金，可能与合约最新成交价格有所偏差，以避免价格操纵。
标记价格的计算是基于指数价格，指数价格是参照一篮子各大现货交易市场的价格，根据其交易量加权平均后得到的综合价格指数。当前指数价格是22,931.3

强平价格：若多仓的标记价格低于此强平价格，或是空仓的标记价格高于此强平价格，你的持仓将被强平。
保证金比率：保证金比率越低，仓位的风险相对较小。当保证金比率到达100%时，仓位将被强平
杠杆账户：仓位占用的保证金。
未实现盈亏 (回报率)：采用最新价计算得出的未实现盈亏，以及回报率。选择价格基准：标记价格  最新价格

一键平仓
一键平仓将会撤销USDⓈ-M下所有挂单，并以市价委托方式平仓USDⓈ-M下所有仓位。

仓位止盈止损
该止盈止损针对整个仓位（无论加仓或者减仓）。平仓后该止盈止损将被自动取消。当价格到达设定的触发价格时，将执行市价平仓委托。如果仓位数量超过市价委托单笔最大数量限制，委托将被拒绝。



资产表

钱包余额 ＝ 总共净划入+ 总共已实现盈亏 + 总共净资金费用 - 总共手续费
未实现盈亏：该保证金资产下仓位基于标记价格计算的未实现盈亏。采用标记价格计算得出的未实现盈亏，以及回报率。
可用下单余额：可用于开新仓的数量。


保证金比率

保证金比率 ＝ 维持保证金 / 保证金余额。你的持仓将在保证金比率达到 100% 时遭到强平。
维持保证金：维持仓位所需的最低保证金余额
保证金余额 = 钱包余额 + 未实现盈亏。你的持仓将在保证金余额 <= 维持保证金时遭到强平。




币安合约交易教程及手续费
这篇文章主要介绍了区块链知识分享:币安合约交易怎么玩，在币安合约交易平台上，您还可以在做多或做空时使用杠杆，以此在不稳定的市场行情中对冲风险或从中获利。您可以参照以下步骤开始在币安合约平台上进行交易，下面一起来参考一下吧！
在币安合约交易中，您可以通过做多或做空某个合约，参与到市场价格波动中，并从中获利。
如您选择做多，意味着您期望您购买的合约价格会在未来上升。
相反，如您选择做空，则代表着您将合约卖出，并预测它的价值会在未来下跌。
在币安合约交易平台上，您还可以在做多或做空时使用杠杆，以此在不稳定的市场行情中对冲风险或从中获利。您可以参照以下步骤开始在币安合约平台上进行交易：
将USDT, BUSD 转入U本位合约账户作为保证金；（在币安币本位合约内，您需要转入BTC）
选择您的杠杆率；
选择合适的订单方向（买或卖）；
通过以下例子，您可以更好地了解到如何通过做多或做空合约交易来获利：
做多BTCUSDT合约：

做空BTCUSDT合约：
在现货市场中，交易者们仅能从资产价格上升获利。而通过合约，不管资产价格是上涨还是下跌，您都有机会从中赢取利润。
币安平台推出多样丰富的合约产品，杠杆倍率高达125倍，用户还可以双向持仓。
如何计算未实现盈亏 & 回报率 & 手续费
U本位合约
用户选择用标记价格为价格基准：
未实现盈亏 = 持仓数量 * 开仓方向 * (标记价格 - 开仓价格)
回报率% = 未实现盈亏 USDT / 起始保证金 = ( ( 标记价格 - 开仓价格 ) * 开仓方向 * 持仓数量 ) / （持仓数量* 合约乘数 * 标记价格* 起始保证金率）
*起始保证金率 = 1 / 杠杆倍数
用户选择用最新价格为价格基准：
未实现盈亏 = 持仓数量 * 开仓方向 * （最新价格 - 开仓价格)
回报率%= 未实现盈亏 USDT / 起始保证金 = ( ( 最新价格 - 开仓价格 ) * 开仓方向 * 持仓数量 ) / （持仓数量* 合约乘数 * 标记价格* 起始保证金率）
开仓方向：为买单为 1；卖单为 -1


结算资金= 持仓名义价值 x 资金费率
仓位名义价值 = 标记价格 x 持有合约数量
资金费率由两部分组成：利率和溢价。其中，溢价解释了为什么永续合约的价格将与标的价格变化趋势趋同。
币安在资金费率中使用的是固定利率，并假定持有现金获得的利息高于持有等值BTC获得的利息。默认情况下，利率设定为每天0.03%(每个资金费率结算周期为0.01%)*，并可能根据联邦基金利率等市场因素进行调整。
*LINK/USDT, LTC/USDT和BNB/USDT永续合约的利率为0%。
在波动性较强的时期，永续合约和标记价格可能会出现分叉。此时，溢价指数将被用来促使合约市场价格和现货价格趋同。每种合约的溢价指数是分别计算的，公式如下：
溢价指数(P)=【Max(0,冲击买入价格-标记价格)- Max(0,标记价格- 冲击卖出价格)】/现货价格
冲击买入价格=买入达到冲击金额时的价格
冲击卖出价格=卖出达到冲击金额时的价格
冲击金额影响是指用200 USDT的保证金可交易的金额(以USDT计价); 在默认水平下，是4,000USDT。
币安每秒计算一次溢价指数，并在资金费率计算周期内将所有指数以时间加权平均值进行计算。
资金费率计算公式：
资金费率(F)=溢价指数(P)+Clamp(0.01%-溢价指数(P)，0.05% 到 -0.05%)
换句话说，只要溢价指数介于-0.04%至0.06%之间，那么资金费率将等于0.01%(利率)。
如果(利率(I)-溢价指数(P))在+/- 0.05%之内，则F = P +(I-P)= I。换而言之，资金费率将等于利率。



计算U 本位合约的手续费
手续费用= 名义价值x 费率
名义价值= 合约数量x 交易价格

例如，VIP 0 挂单方手续费：0.02%；吃单方手续费：0.040%
使用市价单购买1 BTC BTCUSDT 合约：
名义价值= 合约数量x 开仓价格
= 1 比特币 x 10,104
= 10,104

吃单方手续费用需支付：10,104 x 0.040% = 4.0416 USDT
价格上涨后，使用限价单出售1 BTC BTCUSD 合约：
名义价值= 合约数量x 平仓价格
= 1 比特币 x 11,104
= 11,104

挂单方手续费用需支付：11,104 x 0.02% = 2.2208 USDT



币本位合约
用户选择用标记价格为价格基准：
未实现盈亏 = 持仓数量 * 合约乘数 * 开仓方向 * (1 / 开仓价格 - 1 / 标记价格)
回报率%= 未实现盈亏 * 标记价格 / [绝对值(持仓数量) * 合约乘数 * 起始保证金率]
用户选择用最新价格为价格基准：
未实现盈亏 = 持仓数量 * 合约乘数 * 开仓方向 * (1 / 开仓价格 - 1 / 最新价格）
回报率% = 未实现盈亏 * 标记价格 / [绝对值(持仓数量) * 合约乘数 * 起始保证金率]

计算币安币本位合约的手续费
手续费用= 名义价值x 费率
名义价值= (合约数量x 合约面值) / 交易价格

例如，VIP 0 挂单方手续费：0.015%；吃单方手续费：0.040%
使用市价单购买10 BTCUSD 0925 季度合约：
名义价值= (合约数量x 合约面值) / 开仓价格
= (10 份合约x 100 美元) / 10,104 美元
= 0.09897 比特币

吃单方手续费用需支付：0.09897 x 0.040% = 0.00003959 BTC
价格上涨后，使用限价单出售10 BTCUSD 0925 季度合约：
名义价值= (合约数量x 合约面值) / 平仓价格
= (10 份合约x 100 美元) / 11,104 美元
= 0.09 比特币

挂单方手续费用需支付：0.09 x 0.015% = 0.00001351 BTC
备注：关于季度交割合约，在交割日结算的所有仓位将被统一收取0.015% 的结算费用。



币安合约交易手续费
1、U本位合约费率

2、币本位合约费率

什么是永续合约？
永续合约与传统的期货合约相似，是传统期货合约的一个衍生产品。无论是熊市或者牛市，用户都可以在永续合约中通过做多或做空来实现盈利。与传统期货合约不同的是，永续合约没有合约期限无需结算,而且合约价格与现货价格指数锚定。

什么是初始保证金和维持保证金
初始保证金(IM)：初始保证金是指用户在建仓时所需的保证金。初始保证金决定于用户交易的杠杆倍数。
维持保证金(MM):维持保证金是指用户为了避免被强行平仓所必须维持的最小保证金。如果用户期货帐户中的保证金余额小于维持保证金，将会触发强行平仓。
我们最高提供20倍杠杆的永续合约；一份1000USDT的抵押金最高可以抵押20000USDT价值的BTC。倍率大小视持仓大小而定 - 持仓面值越大，倍率越低。
为了保护用户和期货市场，币安通过类似于“税收超额累进”的方法来确定对应的杠杆倍数，头寸从一个阶梯上升到下一阶梯不会引起原来级别的杠杆变化。用户的头寸递增，对应的杠杆递减。
杠杆倍数算法如表格所示。头寸大小指的是以标价（USDT）合约名义值计算的。

什么是资金费率？
资金费率的关键作用是用来缩小期货市场与对应现货市场的价差，在本案例中，是BTC/USDT交易对。
资金费率（F）= 溢价指数（P）+Clamp（0.03% - 溢价指数（P），0.05% 到 -0.05%）
备注：Clamp用于限制“0.03%-溢价指数（P）” 在[-0.05%, 0.05%]区间。
资金费率每8小时计算一次。只用当您在当前时间区间任意方向拥有持仓，您才会被收取或被支付相应的资金费。如果您没有仓位，您不会被收取或支付资金费。
当资金费率为正时，按合约名义值，多头需支付空头相应金额；当资金费率为负时，按合约名义值，空头需支付多头相应金额。
结算资金计算公式
结算资金 = 持仓名义价值××资金费率
资金费率由2部分组成，利率部分和溢价部分。尤其是后者，解释了为什么永续合约的价格将与标的价格变化趋势趋同。
永续合同价格与标记价格可能存在显著差异。在这种情况下，溢价指数将被用来促成这两个价格的趋势趋同。
资金费率有2个硬顶限制，来确保能够实现杠杆作用以及促成稳定的市场行为。币安在资金费率转移过程中不收取任何的费用，是直接在多空双方间进行的资金转移。
什么是标记价格？
由于持仓未实现盈亏是导致强制平仓（强平）的主要原因，而永续合约最高杠杆倍数可达到20倍，因此精准计算持仓盈亏以此来避免不必要的强平是非常重要的。
合约的内在价值是永续合约的核心基础，通过参考各大主流交易市场上的价格加权平均后得到价格指数，而价格指数是标记价格的主要组成部分。
价格指数是参照一篮子各大现货交易市场的价格，根据其交易量加权平均后得到的综合价格指数。参考的交易市场包括：Bitfinex, Binance, Huobi, OKEX, Bittrex, HitBTC
假设我们将价格指数暂定为现货价格，我们以此来计算标记价格（用于计算各交易对的持仓浮动盈亏）。账户实际盈亏以平仓时成交的市场价格为准。
正如上一节所述，每8小时结算一次资金。同时，资金费率进行更新计算。公式中的资金费率为最近一次计算的前期资金费率。

例：
资金费率 = 0.03%
距离下次资金费率调整的时间（小时）=4
价格指数 = 10,000

相较于短期价格波动幅度较大的期货合约价格，标记价格能够更好的预估和体现合约的内在价值。我们通过使用这个标记价格来避免对客户造成不必要的强行平仓，以及防止任何市场操控行为。
什么是强行平仓？
风险水平和杠杆倍数根据客户的总风险敞口进行调整，当总持仓越大，需要的保证金越多，则对应的杠杆倍数越低。
当被执行强行平仓时，账户中所有当前委托订单会被立刻取消。根据用户账户不同的杠杆水平，执行不同程度的强平操作。
值得特别指出的是，当用户杠杆等级属于第一阶梯，或账户净持仓敞口（名义价值）小于等值500,000USDT时，将会被全部强平。同时将会收取一笔相当于0.5%的名义持仓价值作为相应强平费用。因此，我们强烈建议用户在账户权益下降到维持保证金水平前，自行平仓以避免被强行平仓而产生额外的费用。
如果在强平之后账户余额大于0.5%的名义持仓价值，则账户剩余资金将会返还给用户；如果剩余资金小于0.5%的名义持仓价值，则用户账户发生穿仓。
如果用户的账户没有处于最高的杠杆水平，即账户净持仓敞口（名义价值）大于等值500,000USDT时，则系统会优先取消当前委托订单，再通过尝试强制减少某个较大的仓位来减少杠杆使用率，而非强行平仓所有持仓。
用户将会被要求预留10%的额外保证金，以备账户发生突发性强平。此外，强平交易手续费为普通费用的5倍。正如前例所示，我们建议用户在系统强平前自行提前平仓。
如果订单全部成交，则用户不存在需要追加保证金的情况，为此交易支持金额为5倍普通手续费的费用即可。如果订单无法全部成交，则用户账户穿仓，账户价值为0，且账户被关闭。此时，风险保障基金或对手方平仓机制将会接管剩余的未成交仓位。
什么是风险保障基金？
若用户发生穿仓的情况，即在用户被强制平仓后，账户上没有剩余资金或无法强平时，Binance会接管用户账户上剩余的仓位。
在这种情况下，Binance会使用风险保障基金来进行反向平仓，当风险保障基金不够接管被强平用户的剩余持仓，将会发生对手方自动平仓的情况。
风险保障基金旨在用抵押方式来弥补由于客户账户资产低于0时而导致的损失，而且是从非破产用户的手续费中收取的。风险保障基金的主要目的是减少对手方平仓的发生。
什么是自动减仓？
当风险保障基金无法接管穿仓用户的仓位时，才会发生对手方平仓。币安会尽可能避免这种情况的发生，例如通过对对手方进行强行减仓来匹配穿仓用户的剩余订单，尽量减少对手方平仓所带来的影响。
由于数字货币市场的高波动性，以及期货市场的高杠杆，这种情况还是有可能会发生。为了提供最佳的用户体验，我们尽最大努力去降低这种情况发生的可能。
对于用户而言，根据队列中的优先级判断是否会发生对手方平仓的风险。当发生对手方平仓时，我们不会收取任何费用，同时会立即向受影响的用户发出通知。用户可以随时重新开仓。
用户在优先级排序的位置是基于用户的盈利与杠杆倍数来计算的。通常盈利越多，杠杆倍数越高的交易者将首先被平仓。具体来说，用户将根据他们的保证金比率和未实现盈亏作为抵押品的百分比来进行排名。这种排名被称为“杠杆收益”，计算方式为：为实现盈亏/保证金*保证金比率。具体公式，详见末端。
在这种计算下，用户会根据杠杆收益进行排序。用户可以在自己账户的页面看到对应的指示图标。当发生对手方平仓时，用户将收到清算金额和清算价格的通知。
平仓优先排序计算

名词解释
保证金率


等于维持保证金除以总保证金余额（账户权益），它表示的是您的维持保证金占总保证金余额的百分比。如果该比率超过100%，则您的账户将会被强平。
账户余额：
账户权益=转入期货账户的净资产+已实现平仓盈亏=转入资金−转出资金+已实现盈亏账户权益=转入期货账户的净资产+已实现平仓盈亏=转入资金−转出资金+已实现盈亏
保证金余额：
全部保证金（包括已占用保证金+可用保证金）=账户余额+持仓未实现盈亏全部保证金（包括已占用保证金+可用保证金）=账户余额+持仓未实现盈亏
可用下单额是指可用于下单交易的保证金余额
可用下单额=保证金余额−当前已占用的保证金可用下单额=保证金余额−当前已占用的保证金
可提现资金：
可提现的账户余额，等于账户余额与可用保证金中较小的值
盈亏计算指引
未实现盈亏
未实现盈亏: 如果按标记价格平仓后可能获得的潜在收益或者损失。
未实现盈亏(Long) = (标记价格-下单价格) ×× 仓位
未实现盈亏(Short) = (下单价格-标记价格) ×× 仓位
举例：如果您在价格为$10,000时，开设10手多头头寸，当市场价格上涨，标记价格变为$11,000。在未平仓前，此时您账户上的未实现盈亏=( $11,000 - $10,000) ×× 10 = $10,000
实现盈亏：平仓后订单的实际的收益/损失.
实现盈亏(Long) = (平仓价格-下单价格) ×× 仓位
实现盈亏(Short) = (下单价格-平仓价格) ×× 仓位
如果您在价格为$10,000时，开设10手空头头寸，当市场价格上涨，期货价格变为$11,000。在您平仓后，您需要承担相应亏损，此时您账户的已平仓盈亏为 = ( $10,000 - $11,000) ×× 10 = $-10,000
资金费率
资金每8小时结算一次，如果您在指定的资金结算时间时，有任意方向的持仓，将会被获得或支付相应的结算资金。
如果当前的资金费率为0.01%，您持有100手多头头寸，标记价格为$10,000，那么您将需要支付的结算资金为：
结算资金=0.01%×100×$10,000=$100结算资金=0.01%×100×$10,000=$100
相反，如果您持有100手空头头寸，您的结算资金将为$-100，意味着您将会收到对手方支付的$100。如果您在指定的资金结算时间时，没有持仓，将不会获得或支付相应的结算资金。

开仓成本/亏损计算
当用户开仓时，用户的钱包需要一定的初始保证金才能开仓。此外，如果用户下单的时候，委托价格是低于标记价格的话，就会发生“开仓亏损”。因此，用户需要更多的保证金，以避免开仓即爆仓情况。
开仓成本 = 初始保证金 + 开仓亏损 (如有)

步骤1：计算仓位的名义价值
仓位的名义价值 = (10 x 100 USD) / 9,800 USD = 0.1020 BTC
步骤2：计算该仓位的初始保证金
初始保证金 = 0.1020 BTC / 20 = 0.0051 BTC
步骤3：计算开仓亏损
开仓亏损 = 委托数量 x 合约乘数 x 绝对值 {最小[0, 仓位方向 x (1 / 委托价格 – 1 /标记价格)]}
*仓位方向: 1 为做多委托；-1 为做空委托
做多委托的开仓亏损
= 10 x 100 USD x 绝对值 {最小[0, 1 x (1 / 9,800 USD – 1 / 9,602.7 USD)]}
= 0.002096562 BTC
做空委托的开仓亏损
= 10 x 100 USD x 绝对值 {最小[0, -1 x (1 / 9,800 USD – 1 / 9,602.7 USD)]}
= 0
步骤4：计算开仓成本
由于做多委托有开仓亏损，因此做多委托的开仓成本除了初始保证金外，还需要额外的开仓亏损，以避免开仓即爆仓的现象。
做多委托的开仓成本 = 0.0051 BTC + 0.002096562 BTC = 0.0072 BTC (差价基于四舍五入)
而做空委托在开仓时没有开仓亏损，因此做空委托的开仓成本即是初始保证金。
做空委托的开仓成本 = 0.0051 BTC + 0 = 0.0051 BTC


交易者应确保在开仓之前其钱包余额中有足够的资金。开仓所需的成本包括初始保证金和开仓亏损（如有）。当定单价格对交易者不利时，即标记价格低于买单价格，就会发生开仓亏损。 币安将开仓亏损作为开仓成本之一以避免交易者下单时被立即强平。
 
开仓成本 = 初始保证金 + 开仓亏损（如有）

 
1. 限价订单开仓成本计算：
 
第一步： 计算初始保证金
初始保证金 = 名义值 / 杠杆倍数
= (46303.88 x 1 BTC) / 20
= 2315.19
 
第二步: 计算开仓亏损
开仓亏损 = 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 开仓价格)]}
*开仓方向: 为买单为 1；卖单为 -1

(i) 买单开仓亏损
= 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 开仓价格)]}
= 1 x 绝对值{min[0, 1 x (46332.40 - 46303.88)]}
= 1 x 绝对值{min[0, 28.52]}
= 1 x 0
= 0
当用户开买单时，没有开仓损失。
(ii) 卖单开仓亏损
= 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 开仓价格)]}
= 1 x 绝对值 {min[0, -1 x (46332.40 - 46303.88)]}
= 1 x 绝对值 {min[0, -28.52]}
= 1 x 28.52
= 28.52
当用户开卖单时，会产生开仓损失
 
第三步: 计算开仓所需的成本
由于用户开买单时，没有开仓亏损, 因此买单开仓所需的成本等于初始保证金。
(i) 买单开仓所需的成本
= 2315.19 + 0
= 2315.19
由于用户开卖单时会产生开仓损失，因此卖单开仓所需的成本较高，除了初始保证金外，我们还需要考虑开仓亏损。
(ii) 卖单开仓所需的成本
= 2315.19 + 28.52
= 2343.70 (进位差异)
 
2. 市价订单开仓成本计算：

 
 
第一步： 计算开仓预估价格
买单预估价格 = 卖价[0] * (1 + 0.05%) ， 卖单预估价格 = max(买价[0], 标记价格)
(i) 买单预估价格
= 卖价[0] * (1 + 0.05%)
= 46118.23 * (1 + 0.05%) = 46141.2891
(ii) 卖单预估价格
= max(买价[0], 标记价格)
= max (46120.11, 46133.2) = 46133.2
*[0]：第一层报价
 
第二步： 计算初始保证金
初始保证金 = 名义值 / 杠杆倍数
(i) 买单初始保证金
= 买单预估价格 * 开仓数量 / 杠杆倍数
= 46141.2891 * 0.2 / 20
= 461.412891
(ii) 卖单初始保证金
= 卖单预估价格 * 开仓数量 / 杠杆倍数
= 46133.2 * 0.2 / 20
= 461.332
 
第三步: 计算开仓亏损
开仓亏损 = 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 开仓预估价格)]}
*开仓方向: 为买单为 1；卖单为 -1
(i) 买单开仓亏损
= 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 买单预估价格)]}
= 0.2 x 绝对值{min[0, 1 x (46118.23 - 46141.2891)]}
= 0.2 x 绝对值{min[0, -23.0591]}
= 0.2 x 23.0591
= 4.61182
当用户开买单时，会产生开仓损失。
(ii) 卖单开仓亏损
= 开仓数量 x 绝对值{min[0, 开仓方向x (标记价格 - 卖单预估价格)]}
= 0.2 x 绝对值 {min[0, -1 x (46133.2 - 46133.2)]}
= 0.2 x 绝对值 {min[0, 0]}
= 0.2 x 0
= 0
当用户开卖单时，没有开仓损失。
 
第四步: 计算开仓所需的成本
由于用户开买单时会产生开仓损失，因此买单开仓所需的成本较高，除了初始保证金外，我们还需要考虑开仓亏损。
(i) 买单开仓所需的成本
= 461.412891 + 4.61182
= 466.02 (进位差异)
由于用户开卖单时，没有开仓亏损, 因此卖单开仓所需的成本等于初始保证金。
(ii) 卖单开仓所需的成本
= 461.332 + 0
= 461.33 (进位差异)



# 区块链入门知识

区块链由一个个区块（block）组成。区块很像数据库的记录，每次写入数据，就是创建一个区块
什么是区块链？
区块链的三个基本概念：
去中心化（Decentralization）
持久性(Persistency)
区块链技术优缺点总结：
优点：
缺点：
现有区块链技术的三种典型演化场景：
什么是区块链？
区块链由一个个区块（block）组成。区块很像数据库的记录，每次写入数据，就是创建一个区块。

图1.区块链的大致结构
区块链技术是一种去中心化和高信任度的分布式数据库账本技术，网络中的各个节点能够点对点直接发生交易，并对一段时间内发生的交易数据的记账权达成共识，独立存储和集体维护。该技术利用非对称加密技术保证数据安全可信，利用时间戳技术实现数据的可溯源性和可验证性，通过分布式存储使得数据公开透明，在非法算力不足50%时，数据无法伪造或篡改。区块链的自动化脚本代码系统支持用户创建高级的智能合约、货币或其他去中心化应用。
其中难度目标是该区块工作量证明算法的难度值，时间戳是记录该区块产生的时间，Nonce值是用于工作量证明算法的计数器。

区块链的三个基本概念
交易（Transaction）：一次对账本的操作，导致账本状态的一次改变，如添加一条转账
记录；
区块（Block）：记录一段时间内发生的所有交易和状态结果等，是对当前账本状态的一次共识；
链（Chain）：由区块按照发生顺序串联而成，是整个账本状态变化的日志记录。
去中心化（Decentralization）
在传统的交易系统中，每一笔交易都需要经过一个值得信赖的、可靠的第三方中介代理来验证确认。这种中间代理显然带来了额外的资源耗用。此外，正如集中式系统那样，交易数目的增多必定造成中央服务器的成本和性能瓶颈。
而在区块链中，一笔交易可以在任意两个在网络中处于对等地位的客户端之间进行**(P2P)，而不需要经过中央服务器的认证**。
持久性(Persistency)
由于在网络中进行的每一笔交易都会被确认、并记录在分布在整个网络中的区块中，因而几乎不可能对这些交易进行篡改。而且，每一个广播的块都会被其他的节点进行验证，所以任何的伪造数据都能轻易地被检测出来。
 
区块链技术优缺点总结
优点
1.分布式，去中心化
由于使用分布式核算和存储，不存在中心化的硬件或管理机构，任意节点的权利和义务都是均等的，系统中的数据块由整个系统中具有维护功能的节点来共同维护。
2.不可篡改、撤销
因为区块链的分布式和去中心化，个别的篡改无法得到整个网络的认可，使得数据无法被篡改。
3.开放性
系统是开放的，除了交易各方的私有信息被加密外，区块链的数据对所有人公开，任何人都可以通过公开的接口查询区块链数据和开发相关应用，因此整个系统信息高度透明。
4.自治性
区块链采用基于协商一致的规范和协议(比如一套公开透明的算法)使得整个系统中的所有节点能够在去信任的环境自由安全的交换数据，使得对“人”的信任改了对机器的信任，任何人为的干预不起作用。
5.匿名性
由于节点之间的交换遵循固定的算法，其数据交互是无需信任的(区块链中的程序规则会自行判断活动是否有效)，因此交易对手无须通过公开身份的方式让对方自己产生信任，对信用的累积非常有帮助。
缺点
与传统数据库相比，当前区块链还不能存储大量
(1)不可撤销
　　区块链中，如果误操作，或者丢失密码，损失将无法挽回。
(2)私密性
　　由于区块链是分布式，交易账本必须公开透明，没有隐私可言。
(3)存储空间
　　由于需要掌握所有历史记录，交易数量大的时候，性能受影响。
(4)延迟性
分布式的特点，需要大家认证，因此，存在交易的延迟。
(5)当数据量越大伴随的性能问题
每次交易为了验证你确实拥有足够的钱而需要追溯历史每一笔交易来计算余额。
(6)能耗问题
区块的生成需要矿工进行无数无意义的计算，这是非常耗费能源的。
 
现有区块链技术的三种典型演化场景：

跟传统的记账技术相比，基于区块链的分布式账本包括如下特点：
1.维护一条不断增长的链，只可能添加记录，而且记录一旦确认则不可篡改；
2.非中心化，或者说多中心化的共识，无需集中的控制，实现上尽量分布式；
3.通过密码学的机制来确保交易无法被抵赖和破坏，并尽量保护用户信息和记录的隐私性。


# 加密货币定量分析指标 50+

在之前的一篇文章里，我们简单介绍了目前行业中应用比较广泛的几个指标，即定量分析「四大金刚」，包括价格、交易量、供应量以及市值。本文我们将补充更多介绍更多的数据指标。
1.链上数据
· 交易量（24 小时，美元）
Tx Vol (24hr, USD) 指的是给定日期区块产生的所有交易输出的总和，忽略已知的「change（找零）」输出。请注意，对于 Ripple 和 Stellar，交易量仅指发生转账的 XRP 和 XLM 的价值。
· 调整后的交易量（24 小时，美元）
这是估算出的过去 24 小时内以美元计算的链上交易量，经过调整以删除某些类型的「非经济性」交易。
· 交易价值中位数（Median Transaction Volume）
这是过去 24 小时内中位交易的价值。交易价值的中位数可能为 0——当一天内链上超过一半的交易都并不转移价值（转移的价值为 0）时，就会发生。这种情况对于不关注经济价值转移（即支付）的智能合约链来说很容易发生。
· NVT 比率（NVT Ratio）
NVT 比率是当前网络价值（即当前市值）与估算的每日链上交易量的比率。对于 NVT 的交易量部分，我们使用超过 7 天的日均值来消除偶尔出现的、很短期的交易量峰值波动。NVT 本质上试图描述市场到底分配了多少价值给资产的实际直接使用。因此，NVT 被描述为加密资产的「PE」（股票市场的市盈率，每股价格除以每股盈余）。
但是，关于 NVT，有几个注意事项需要注意：
1）对于很多币来说，直接计算链上交易量是非常困难或几乎不可能的。对于基于 UTXO 账户模型的区块链，比如比特币及其分叉币，我们通常很难或不可能弄清楚一笔交易中 * 花费（spent）*有多少，又有多少「找零（change）」返还给交易发送者。基于帐户模型的代币，例如以太坊和以太坊经典，就不存在这个问题。比特币等币种的交易量会被高估了，但以太坊类的交易量可能不会高估。需要注意，NVT（以及交易量）的大小在不同交易类型的代币之间没有可比性！
· 活跃地址（Active Address）
这是在过去 24 小时内任何时间点参与过交易的唯一地址（unique addresses）的数量。请注意，对于门罗币，CoinMetrics 指出，这一指标只能报告「该数据的上限（输入和输出计数的总和），隐蔽地址技术导致精确的数值无法得到。」
· 交易数（Transactions）24H
这是过去 24 小时内发生的交易数量，不包括发行新币的交易。
· 支付数（Payments）24H
这是过去 24 小时内进行价值转移的交易数量。
· 新发行（New Issuance）
这是过去 24 小时内新发行代币的美元价值。
· 交易费用（24 小时，美元）
这是过去 24 小时产生交易费用的美元价值。
· 交易费用中位数（美元）
这是过去 24 小时交易费用中位数的美元价值。
· 平均难度
这是过去 24 小时的平均网络挖矿难度。
· 增加的千字节 (24H)
这是过去 24 小时内添加到链中的数据大小（以千字节 (KB) 为单位）。
· 区块数 (24H)
这是在过去 24 小时内添加到链中的区块数量。
2.共识
· 目标出块时间（Targeted Block Time）
这是两个区块之间的目标时间间隔（以秒为单位），由给定加密资产的规范定义。实际可观察到的出块时间可能与此值略有不同。
· 区块奖励（Block Reward）
区块奖励是指奖励给新区块创建者的新铸造的代币，不包括同样奖励给新区块创建者的交易费用。
· 年化质押收益（Annualized Staking Yield）
这是在当前供应水平下 Staking 的年化收益率。
· 实际年化质押收益（Real Annualized Staking Yield）
实际收益率是在考虑了网络的流动供应量增加后的预期年收益率，根据流动供应量通胀率来调整名义质押收益率。
· 代币质押量
这是当前在网络上质押的代币数量。
· 网络质押百分比（% Network Staking）
这是当前质押的代币数量占当前报告供应量的百分比。
· 最低质押数量（Staking Minimum）
这是质押时所要求或推荐的最低代币数量。
3.挖矿数据· 哈希率（Hash Rate）
这是网络的总算力。请注意，从安全角度来看，使用不同算法的代币，其算力是不可比的，因为不同的算法每哈希需要的计算资源可能有很大差别。
· 在 Nicehash 上的百分比（% on Nicehash）
这是目前可在 NiceHash 上出租的、可用于发起 51% 攻击的算力。NiceHash 是一个加密挖矿算力市场，用户可以在其中买卖挖矿算力。对于某些代币，理论上有可能在 NiceHash 上租用足够的算力来对代币发起 51% 攻击。对于其他代币，NiceHash 上只有一小部分算力可用。该指标可能远低于 100%（在这种情况下，NiceHash 上没有足够的算力可供出租以发起 51% 攻击），或者远高于 100%（在这种情况下，有足够的算力可供出租）。
· 攻击成本 (1H)
这是现在在 NiceHash 上租用足够的算力进行持续 1 小时 51% 攻击的（理论上的）成本。
· 攻击成本 (24H)
这是现在在 NiceHash 上租用足够的算力进行持续一天的 51% 攻击的理论成本。请注意，该指标仅用于粗略地了解潜在成本。NiceHash 市场存在相当大的波动，此外，进行攻击的行为可能会对算力市场本身产生重大影响。
· 下一个减半日期（Next Halving Date）
这是对 PoW 加密资产下一次减半（区块奖励减半）时间的估算，根据过去 6 个月观察到的平均出块时间计算得出。
4.历史高点和周期低点（All Time High & Cycle Low）
在计算历史最高价时，我们忽略了交易的前 10 天。这是因为资产交易的前几天通常会异常波动；因此，在此期间产生的任何 ATH 几乎没有有效的价格信号。
ATH 报价不一定是绝对最高的单笔交易价格。在分析历史性数据时，我们并不总是能够查看资产的每笔交易。对于某些资产，ATH 可能指的是历史最高日均值，或历史最高价发生当天的价格样本。
· ATH (美元)
这是资产的历史最高交易价格，以美元计。
· 从 ATH 后经历的时间（Time from ATH）
这是自资产达到历史最高交易价格（相对于美元）以来经过的天数。
· 从 ATH 下跌了 %（% Down from ATH）
这是该资产目前从其历史最高价（以美元计）价格下跌了多少。例如，如果资产的历史最高价为 120 美元，而目前的交易价格为 80 美元，那么它从 ATH 下跌了 33%。请注意，当资产创出历史新高时，此指标数值将为「0%」。
· 盈亏平衡倍数（Breakeven Multiple）
这是当前价格必须上涨以重新获得历史最高点的倍数。请注意，这是*倍数*，而不是百分比。例如，如果资产的历史最高价为 120 美元，而目前的交易价格为 15 美元，则盈亏平衡倍数将为 8 倍。也就是说，资产必须获得 8 倍的收益才能回到之前的历史最高水平。
· 周期低点（美元）
这是该资产自创历史新高以来的最低交易价格（以美元计）。请注意，周期低点报价不一定是绝对最低的单笔交易价格。
· 自低点以来的时间（Time Since Low）
这是自资产达到周期低点交易价格（相对于美元）以来经过的天数。
· 自低点起上涨%（% Up Since Low）
这是资产从其周期低点（美元）价格上涨的幅度。例如，如果资产的历史最高价为 120 美元，随后交易价为 15 美元，但现在交易价为 25 美元，那么它从低价上涨的百分比将是 66.7%。
· 短期投资回报率（Short-Term ROI）
资产投资回报率是其在规定时期内的百分比回报。
· 年投资回报率（ROI by Year）
按年份划分的投资回报率是资产从给定年份年初到年底的百分比回报
5.风险指标
波动率（Volatility）被定义为每日回报的年化标准差。夏普比率（The Sharpe Ratio）代表投资者额外承受的每一单位风险所获得的额外收益。如果你赚取的超额回报大于风险，夏普比率将为正。同样，如果你的超额收益为负，或获得波动性较高的正收益，你的夏普比率将为负。
6.项目启动· 初始供应（Initial Supply）
这是在资产启动时发行的初始代币数量。
· % Initial Supply – Investors
这是在资产启动时分配给初始投资者的代币数量占初始供应总量的百分比。
· % Initial Supply - Pre-mine & Airdrops
这是在资产启动时空投或保留用于未来区块奖励的代币数量占初始供应总量的百分比。
· % Initial Supply - Organizations & Founders
这是在资产启动时分配给创始人或项目运营（项目背后的组织）的代币数量占初始供应总量的百分比。
7.代币销售统计
TokenData 列出并提供有关过去、当前和即将进行的 ICO 和代币销售数据。
· 代币销售收益（Token Sale Proceeds）
这是在项目的 ICO/初始销售期间筹集的金额。销售数额包括以所有货币（法定货币和加密货币）筹集的金额。
· 销售开始日期
这是项目的 ICO/首次销售开始的日期。
· 销售结束日期
这是项目的 ICO/首次销售结束的日期。
8.Github 数据
请注意，通常有许多与给定资产或项目相关联的存储库，但 Messari 上显示的 Github 统计数据是资产的「主要」存储库中提取的。有时，确定哪个存储库应该被视为主要存储库并不简单。在这种情况下，我们选择最能定义项目独特特点的存储库（repo）。这通常是定义资产核心节点客户端的存储库，或是一组智能合约。请注意，在某些情况下，这意味着我们并没有报告项目中最受欢迎的存储库的统计信息。这是因为有时会出现这样的情况，例如，一个项目的钱包存储库 或 helper-sdk 比核心节点或合约 repo 拥有更多的 Star/Watch/Activity。
· Stars
这是资产的主要 Github 存储库拥有的星数。
· Watches
这是资产的主要 Github 存储库拥有的观察者数量。
· Commits (90D)
这是过去 90 天内对资产的主 Github 存储库的提交次数。
· Commits (1Y)
这是过去 1 年对资产主 Github 存储库的提交次数。
· Lines Added(90D)
这是在过去 90 天内提交到资产主要 Github 存储库的代码行数。
· Lines Added (1Y)
这是过去 1 年向资产主要 Github 存储库提交的代码行数。
· Lines Removed (90D)
这是过去 90 天内从资产的主 Github 存储库中删除的代码行数。
· Lines Removed (1Y)
这是过去 1 年从资产的主要 Github 存储库中删除的代码行数。
9.其他· Vladimir Club Cost
Vladimir Club 是指拥有某资产最终供应量的 1% 中的 1%。例如，比特币的供应量固定为 21,000,000 个。因此，要加入比特币的「Vladimir Club」需要：21,000,000 * 0.01 * 0.01 = 2100 BTC。「Vladimir Club」一词是由 Vladimir 于 2011 年或 2012 年在 Bitcointalk 论坛上创造的，后来成为一个非常方便的指标，用于比较拥有 1% 不同加密资产的成本差异。Messari 使用 Y2050 供应作为「最终供应量」。
· Price if BTC-Normalized Supply
这是如果资产拥有和当前比特币一样的供应量，它的价格。2018 年 1 月 4 日，我们第一次看到 @boxmining 发布这个指标。OnChainFX 使用的具体计算很简单：资产的当前市值除以比特币的当前供应量。与各种类型的市值比较一样，我们希望这种框架将帮助人们更好地了解市场如何为资产定价。
· Price if BTC-Normalized to Y2050 Supply
我们在 2018 年 1 月 4 日第一次看到 @boxmining 发布的这个指标。具体计算很简单：资产的当前市值除以比特币的 Y2050 供应量。
· Age
这是资产相对于何时可交易的年龄。对于比特币等工作量证明发布的资产，这与创世区块上的时间戳同义（即，第一个区块被开采的时间）。但是，对于某些 ICO 资产，代币在网络启动之前就可以交易了。
· Genesis Block Date
这是创世区块的日期（即第一个区块被开采的时间）。
· 经历过 51% 的攻击吗？
这表明加密资产自推出以来是否经历了 51% 攻击。51% 攻击是指一个人或团体获得超过一半的区块链资源（PoW 中的算力，PoS 中的代币）以逆转交易。


理解资金费率、未平仓合约、稳定币资金流动、交易所资金流动以及恐惧与贪婪指数这五个指标，能更好地评估加密货币市场情绪。
资金费率
如果你以前尝试过通过交易所的永续合约玩杠杆，你会看到一个「资金利率」的数字，通常在页面的顶部。
资金利率是定期支付的，以百分比显示，通常以 8 小时利率报价，根据现货价格和永续合约市场之间的差异支付给多头或空头交易者。
永续合约（「Perp」）是一种没有到期日（没有结算日期）的期货合约，使其类似于现货市场的交易——因此称为「永续合约」。交易者使用这些合约来获得特定代币的杠杆敞口，因为他们只需要提供合约总价值的一小部分作为抵押。
当波动性较大时，perp 价格可能会与标的现货价格相背离。根据背离的方向和范围，资金利率可以是正的或负的。
当 perp 价格高于现货价格（即 contango）时，会出现正的资金利率——参与者看涨，做多的交易者将不得不为空头支付费用。
当 perp 价格低于现货价格（即 backwardation）——参与者看跌，做空的交易者将不得不为多头头寸付费。
资金利率一般由两部分组成：利率和溢价。每个融资区间（通常每 8 小时）的利率通常固定为 0.01%，而溢价则取决于 perp 价格和现货价格之间的差异（如上所述）。
由于每个区间的利率固定为 0.01%，0.01% 往往被视为「市场中性」的融资利率。从这个角度看，资金利率可以作为衡量某项资产过热或超卖程度的标准。
那么，它们与市场情绪的关联性如何？资金利率往往与标的资产的总体趋势保持一致，即资金利率趋于正值，并随着标的资产价格的上升而越来越高。
区块链交易所开发-交易所开发-交易所软件　
未平仓合约 (OI)
衡量加密货币市场兴趣的另一种方法是看基于成交量的指标；例如，我们可以看一下市场上有多少合同正在交易等。
未平仓合约是比较流行的基于交易量的指标之一，它说明了市场参与者在任何特定时间点所持有的未平仓合约（包括多头和空头）的总量。
换句话说，未平仓合约是所有未平仓交易头寸（多头和空头）的总和减去已平仓的交易。
稳定币资金流动
如果出现市场抛售，投资者预计他们的加密货币的投资价值将下降，他们可能会转向稳定币作为避风港，同时让他们可以快速灵活地将资金部署回加密货币市场。
因此，查看稳定币交易量和活动的总体趋势也是很有用的，可以通过 Nansen 的稳定币仪表盘来查看。
交易所资金流动
如果市场参与者看跌并担心他们持有的加密货币的价值会下降，他们会试图通过交易所抛售所持货币。
交易所净流量是显示这种趋势的指标；它衡量进入 / 流出交易所的代币净额。如果某个代币进入交易所的净流入量突然上升，这可能意味着参与者正试图通过在交易所出售该资产，反之亦然。
恐惧与贪婪指数
衡量加密货币市场情绪水平的一个流行指标是加密货币恐惧和贪婪指数。在大多数市场中，参与者的行为往往是情绪化的。当价格处于兴奋的上升状态时，市场参与者往往会过度贪婪（FOMO），而当价格下跌时，他们也往往会过度恐惧（并且非理性地割肉）。


波动性/ Volatility ：波动性被广泛用来测量资产的风险性，与潜在收益率的范围及其发生的可能性有关，是衡量资产价格在一段时间内可能发生变动的大小；与股市相比，加密货币交易市场具有更大的波动性，因此加密货币的市场价格在一天之内可能会发生极大的变化。
供应量/ Supply Quantity ：供应量是市场参与者持有的流通的加密货币总量，能够通过市场进行购买、出售以及交易，而被锁定、被保留或者不能被出售和流通的加密货币则不在供应量的范畴以内。
总供给/ Total Supply ：总供给量是当前可用的加密货币的总量，是指市场中当前存在的所有的流通或非流通加密货币的总量，而被销毁的币则不在总供给的范畴以内。销毁币是将加密货币发送到一个不可靠地址的行为，是不可逆的。
最大供应量/ Max Supply ：最大供应量是指加密货币的最大数量，如：比特币的最大供应量约为 2100 万枚、瑞波币的最大供应量约为 1000 亿枚，而不同的加密货币则有不同的数量上限，如 EOS 没有最大供应量，所以其货币数量将持续增长。
登月/ Mooning ：登月是指一种加密货币的价格大幅上升的情况，夸张地说就是价格达到天空以及月亮的高度。
投资回报率/ Return on Investment / ROI ：投资回报率（ROI）= （税前年利润/投资总额）*100%。是指企业从一项投资性商业活动的投资中得到的经济回报，是衡量一个企业盈利状况所使用的比率，也是衡量一个企业经营效果和效率的一项综合性的指标。
