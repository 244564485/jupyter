
## tdx 指标

涨幅:		(现价-昨收) /昨收*100	
涨跌:		现价-昨收	
现量:		最近一次分笔成交量	
涨速:		(现价-N分钟前的价格)*100/N分钟前的价格,涨速的N值可在系统设置1涨速周期分钟数地方设置
换手:		成交量/流通股本*100	
市盈(动): 	现价/折算成全年的每股收益	
振幅%:		(最高-最低) / 昨收*100	
量比:		开市后每分钟的平均成交量与过去5个交易日每分钟平均成交量之比	
内盘:		主动性卖盘的成交量
外盘:		主动性买盘的成交量
内外比:		内盘/外盘
流通市值:	流通股本*现价
AB股总市值:	公司的A股总市值和B股总市值的和,注:此栏目不包括在香港上市的那部分市值
强弱度:		此品种的涨幅减去对应大盘(上证指数或深证成指)的涨幅的值
活跃度:		此品种当日成交分笔数
每笔均量:	成交总量/分时成交笔数	
每笔换手:	每笔均量/流通股本*100
封单额:		涨停或跌停时,买一的金额或卖一的金额
封成比:		涨停或跌停时,封单量(买一量或卖一量)除以当前的已成交量

财务更新:	财务数据的更新日期(不一定是定期报告的披露日期)
总股本:		公司的总股本	
B股(或A):	该股的对应的B股股本(如果该该股是B股, 则是对应的A股的股本)	
H股:		公司发行的港股的股本
税后利润:	利润总额减去所得税后的净利润(包括少数股东损益)
净利润:		归属于母公司股东的净利润
利润同比:	(当期的利润-去年同期的利润) /去年同期的利润*100	
收入同比:	(当期的收入-去年同期的收入) /去年同期的收入*100	
市净率:		即是PB, 现价/每股净资产	
市现率:		现价/每股现金流量	
市销率:		现价/每股营业收入	
每股收益:	当期的净利润/总股本	
每股净资:	净资产/总股本	
每股公积:	公积金/总股本	
每股未分配:	未分配利润/总股本	
权益比:		净资产/总资产*100	
净益率:		即净资产收益率,当期的净利润/净资产*100
销售毛利率:	(营业收入-营业成本) /营业收入*100	
营业利润率:	营业利润/营业收入*100	
净利润率:	税后利润/营业收入*100	
股息率:		(TTM)近4个财报内公司的累计分红总额/公司总市值*100

扩展栏目部分
开盘%:		(开盘-昨收)/昨收*100
最高%:		(最高-昨收)/昨收*100
最低%:		(最低-昨收)/昨收*100
均涨幅:		(均价-昨收)/昨收*100
实体涨幅:	(现价-今开)/今开*100
回头波:		(现价-最高)/最高*100,即当日的最大回撤
攻击波:		(现价-最低)/最低*100,即当日的最大收益
现均差%:	(现价-均价)/昨收*100
市盈(TTM):	根据最近12个月的每股收益得到的市盈率
市盈(静): 	静态市盈率(最近年报的市盈率)
贝塔系数:	个股相对于大盘的波动表现(最近60天统计,深市大盘对应深证成指,沪市对应上证指数),其绝对值越大,显示其收益变化幅度相对于大盘的变化幅度越大;如果是负值,则表示方面相反.0.5为低风险股票,1.0表示为平均风险股票,2.0高风险股票,大多数股票介于0.5到l.5间
年涨停天:	近一年内的涨停次数(不包括未开板的涨停)

流通市值Z:	自由流通市值,流通市值 减去 流通股东占5%以上股份(包括一致行动人)的市值
换手Z:		按自由流通股本计算出来的换手率
流通比例Z:	自由流通股本占总股本的比例
开盘换手Z:	当前股票集合竞价成交量/自由流通量
人均持股:	(自由流通股+B股股本(如果有B股))/股东人数
人均市值:	(当前的自由流通市值+B股市值(如果有B股))/股东人数

短期形态:	对近60天历史行情走势进行形态判断
中期形态:	对近120天历史行情走势进行形态判断
长期形态:	对近240-500天历史行情走势进行形态判断
安全分: 	根据通达信扫雷宝系统得到的分值
	 
内容特别显示效果:
如果现量大于某一阀值(在系统设置中的设置1中的现量高亮显示),则紫色高亮显示
如果涨速大于1.5%或小于-1.5%,则紫色或青色高亮显示
如果行情开盘价为涨停价或跌停价,则对内容加灰框
如果行情最高价为涨停价,则对内容加灰框
如果行情最低价为跌停价,则对内容加灰框

在栏目上点右键,可以对栏目及顺序进行调节
多日涨幅(比如20日涨幅)是按上证指数的交易日来计算,不是按个股自己的交易日
点击栏目可以排序,按加号键可以反向排序
自选股等板块的栏目按开始的几个品种的属性

# 公式

## 公式入门
我们大多数的用户并不是完全了解 " 公式编辑器 " 的意义, 简单地, 我们可以从以下几个角度进行理解:
一, 指标分析:
" 公式编辑器 " 好比是一个工作母床, 通过这个工作母床可以制造出所需要的各式各样的零件, 同样, 在指标分析的工作中, 利用编辑器可以编写出相应的分析条件, 这种方法是在技术分析当中最为常用的方法之一. 例如, 指标 KD , 指标 MA 等等, 通过对这些指标的观察, 分析, 找出一些合适的条件作为买入卖出点. 当然, 我们也许需要的是一些自己的指标, 一些自己的准确的指标, 更多的 MB ,  MC ,  MD 等等, 这一切我们通过 " 公式编辑器 " 可以实现. 
二, 条件选股:
编写公式都要用到什么东西?
我们留下了许多问题 -- 都是公式编写的基础问题, 所以我们这节课来解决这些基础的问题. 
什么是技术指标?
MA 均线就是一种技术指标, 我们在炒股的时候, 经常会将一些行情数据进行数学计算得出一些曲线等等, 方便我们掌握股市的变动情况. 
什么是条件选股?
简单讲, 就是按照您的设定的条件用电脑帮助您完成一些太多太复杂的挑选 -- 比如您有一些好的心得和方法, 可使有 1000 多只股票, 您就是有 100 双眼睛有时也不一定可以看得过来, 这时电脑就派上用场了!
什么是参数?
比如讲: 10 日均线, 您可以把 10 日当作参数, 好处在于, 您觉得需要修改成 5 日的时候, 就可以使用一些简单的方法, 例如参数精灵来很方便的修改和调整. 参数需要名字, 例如 M 就不错. 还要规定参数的范围, 例如 1 日至 260 日. 这样我们就可以在 1 到 260 之间任意调节 M 的值了,  M 最常用的数填在 " 缺省 " 一栏, 例如你最喜欢用 10 日均线, 那就填 10 吧. 
什么是周期?
这么解释吧!我们有的投资者喜欢使用日线图作技术分析;有的喜欢用 5 分钟的 K 线;有的喜欢使用长一点时间的, 例如周线. 所以在公式设计中, 允许不同喜好的使用者选择不同的分析时间 -- 就是可以选择不同的周期. 
什么是函数?
函数在公式编写非常重要, 如果作个比喻, 我们用一种语言去告诉电脑我的想法, 并且让它去帮我做, 那么函数就是这种语言的单词. 
我们在公式编辑器中选择插入函数, 就可以看到里面有许多的函数, 我们在附录中有一个简表, 大家可以到那里去检索!
例一:
一根 K 线有四个价格组成:
最高价: HIGH
收盘价: CLOSE
最低价: LOW
开盘价: OPEN
成交量: VOL
成交额: AMO
例二:
两条均线不断地交叉, 就专门设定了一条函数来描述两条线交叉: CROSS ( X ,  Y )
假如下图中的两条均线一条名叫 X , 另外一条叫 Y
CROSS ( X ,  Y )表示 X 向上穿过了 Y
CROSS ( Y ,  X )表示 Y 向上穿过了 X
例三:
前面的 CLOSE , 还是 VOL , 都表示当天, 或者您使用的不是日线, 那就表示本周期的数据, 那么前几天的怎么表示呢?
REF ( X ,  M )
例如:
REF ( Close ,  5 )表示 5 天前的收盘;
REF ( Vol ,  10 )表示 10 天前的成交量;
这里的 M 就是参数, 您现在明白了什么是参数了吗?
例四:
如果我想把两个条件并列在一起怎么办?
AND
X AND Y 就表示条件 X 和条件 Y
好了!本课结束吧 -- 有点稍慢, 下面会好一些!
编写一条最简单的指标线
通过前几课的学习, 我们今天开始使用软件的公式编辑功能编写我们自己的第一条指标线. 
其实不难, 你应该对自己有信心!
按照主菜单 - 工具 - 公式管理 - 选择 -" 技术指标 "- 点击 " 新建 " , 然后在公式编辑器中留下你的第一行脚印吧!
点击: " 确认 " , 现在看一下我们第一条指标线. 
这条指标线与你的想法相符吗?
总结与补充:
1 , 如果选择: " 主图叠加 " , 我们的指标线会与 K 线图显示在同一个图形框中, 现在我们的指标线显示在其下方, 即 " 副图 " 中;
2 , 参数可以有, 也可以没有, 但是鼓励大家设置参数, 这是非常好的习惯;
3 , 一个句子完了, 别忘了以分号结尾;
你的公式写得对不对, 可以通过 " 测试公式 " 来检查, 如果错了, 它会告诉你错在哪里. 
编写最常用的均量和均价线
均价线, 不就是那个 " 移动平均线 MA" 什么的吗?不过, 话说回来, 听说 10 个人里面有 11 个人都在使用, 我可得学习学习!
原理是??
5 日平均线 = (今天收盘价 + 昨天收盘价 +.....--5 天前的收盘价) /5 ;
10 日平均线 = (今天收盘价 + 昨天收盘价 +......+10 天前的收盘价) /10 ;
150 日平均线 = (今天收盘价 + 昨天收盘价 +......+150 天前的收盘价) /150 ;
200 日平均线 ...... 不是这么麻烦吧?难道我每天都要写这么多得数才得到一条平均线????
你有什么办法?
MA1=MA ( CLOSE ,  5 );
MA2=MA ( CLOSE ,  10 );
MA3=MA ( CLOSE ,  50 );
......
当然是有简单的方法了!你把我在上面说过的话写下来, 按照前面几课讲的, 写在公式的编辑栏当中就可以了!
注意:
"MA" 表示的就是计算平均值. 
在括号内写上计算的对象和计算的时间长度. 
MA1 ,  MA2 ,  MA3...... 是好几条指标线, 别忘记了用分号把它们分开. 
最后呢?电脑自己会把它们一起画出来. 
均量线???
均价线都有了, 照着葫芦画瓢, 把收盘价 CLOSE 换成成交量 VOL 就行了!
MA1 : MA ( VOL ,  5 );
MA2 : MA ( VOL ,  10 );
MA3 : MA ( VOL ,  150 );
MA4 : MA ( VOL ,  200 );
今天有几只发生 MA 金叉?
我们学习了编写 MA 移动平均线, 关于这几条指标线如何使用?我想大家可能都比我清楚. 例如短期均线和长期均线发生了金叉或者死叉,  ...... 等等, 葛兰维尔的八项法则 ...... 如果说如何用软件编写一个条件, 让电脑把今天两个市场的股票中所有发生了黄金交叉的股票选出来呢?
想知道吗?这就是 " 条件选股 " , 按照 " 条件 " 电脑自动 " 选择股票 " 出来, 可以供您分析, 要不然的话, 技术分析的投资者都会累死了!
跟我学!
第一步: " 工具 " 栏中选中 " 公式管理器 "
第二步:我们现在选择 " 新建 " 一个 " 条件选股 " 公式, 结果出现了下面的编辑栏!然后在里面写上您的条件!
第三步:按照说明书上的步骤选股就行了!
注意:
1 , 在条件选股中点击 " 新建 " ;
2 , 原来 MA5 : MA ( CLOSE ,  5 );
表示的是一条指标线, 可是现在我们在条件选股当中只要引用它, 不需要把它画出来. 所以我们在冒号的后面加一个符号, 表示等会要引用它: MA5 : =MA ( CLOSE ,  5 );
这个在的公式编辑中, 叫做 " 中间表达式 " . 
X=1 ;
Y=X+1 ;
Y= ?
我们学过上面的数学, 都知道把 X=1 代入到 Y 的计算中去,  "X=1 ; " 就是一个中间表达式, 您明白了吗?
条件选股总结:
1 , 指标和条件选股在结构上没有差别, 只是在内容上, 条件选股要多加上我们的条件, 比如大于 10 , 或者交叉等等!
2 , 中间表达式可以帮助我们清晰的表达我们的公式, 不至于使公式的结构特别的混乱!

## 公式编辑器

四类公式统一由公式编辑器进行新建, 修改, 删除等一系列编辑操作. 公式编辑器对话框中可以输入公式的名称, 密码, 公式内容和附加线等信息, 也可以对公式类型和画线方法进行选择. 
公式编辑器在使用上十分灵活, 支持丰富的键盘操作和鼠标操作. 基本的键盘定义如下所示:
↑, ↓, ←, → ――上, 下, 左, 右移动光标
INSERT ――插入/覆盖切换
Ctrl＋P ――括号匹配查找
Ctrl＋A ――全选
Ctrl＋C ――复制选中文本
Ctrl＋V ――粘贴文本
Ctrl＋Z ――取消操作
Ctrl＋Y ――恢复操作
Ctrl＋↑ ――上滚一行
Ctrl＋↓ ――下滚一行
Ctrl＋← ――左移一个单词
Ctrl＋→ ――右移一个单词
Ctrl＋Home ――移至文件最头部
Ctrl＋End ――移至文件最尾部
Ctrl＋鼠标左键 ――选中当前鼠标下的一个单词
Ctrl＋鼠标右键 ――在钩槽中将全部文本选中
Shift＋↑ ――向上选中一行
Shift＋↓ ――向下选中一行
Shift＋← ――向左选中一个字母
Shift＋→ ――向右选中一个字母
Shift＋鼠标左键 ――在钩槽中将当前一行文本选中
Ctrl＋Shift＋←/→ ――以单词为单位的选中
Ctrl＋Shift＋Space ――(只在函数内部有效)显示当前 函数或指标的TOOLTIP提示
TAB键 ――存在选中文本时, 若是多行, 将选中文本全部右移一个TAB单位(智能的距离), 若是单行, 将选中文本删除后右移一个TAB单位;不存在选中文本时, 简单右移一个TAB单位
Shift＋TAB键 ――(只在右多行选中文本时有效)将选中文本全部左移一个TAB单位
鼠标右键单击 ――右键菜单
鼠标左键双击 ――选中当前光标下的一个单词
注:当有参数列表框弹出时, 左键双击将当前选中的参数插入到当前光标位置处编辑的同时, 动态提示框对录入的内容进行了即时翻译, 以尽量自然化的语言解释公式;对函数和指标的引用, 自动匹配填充, 并提示参数信息. 
画线指标公式编辑器
[公式名称]用于识别指标公式, 不能重名, 最多可以有16个字符. 键盘精灵也用该名称来选择公式. 
[公式描述]简单描述该指标的用途. 
[密码保护]如果其前未打√, 表示该公式没加密. 点击"密码保护", 使其打√选中, 此时输入密码, 公式就被加密. 对于已加密的公式, 必须输入密码才能看到公式的内容, 要去掉密码, 点击"密码保护", 使它前面的√消失即可. 
[指标类型]指定指标公式类型(共分为15种). 
[画线方法]紧密围绕股票价格变化的指标可定为主图叠加类型, 叠加在主图上显示;否则定为副图指标, 只能显示在副图上. 
[参数名称]公式可以带参数, 参数的名字在这里输入. 
[最小值, 最大值, 缺省值]参数的最小值, 最大值和默认值(缺省值)在这里输入. 
[坐标线位置]仅对副图指标有效, 可指定在哪些位置画水平坐标线, 例如对BIAS, 可以输入:-20;0;20; 系统将在这三个数值处绘制三条水平坐标线. 缺省时为"自动", 即系统据实际情况定水平坐标线. 
[额外Y轴分界]
[引入指标公式]以系统已有的某个指标公式为蓝本, 新建自己的指标公式. 
[插入函数]显示选择函数对话框, 帮助您在<通达信集成版>软件函数集中寻找所需函数. 当您对系统提供的标准函数还不熟时, 这个功能可帮你节省时间. 
Tdxw3.0将函数类型分为:
全部函数 行情函数 时间函数 引用函数 逻辑函数
数学函数 统计函数 指数函数 大盘函数 常数函数
内嵌函数 操作符函数
[动态提示]用户输入指标, 算法或函数时, 同步提示中文语意. 
[测试公式]公式编写完毕后检查公式的语法错误. 
[测试结果]测试完毕后提示"测试通过"或显示错误信息. 
[参数精灵]用户新建公式时, 可在参数精灵中用一段文字来描述待设置参数的意义, 这段解释性文字会在允许用户调整参数值的地方出现, 包括条件选股, 指标排序, 调整指标参数, 选择指标, 选择交易系统指示, 选择条件选股指示等等. 有了这段解释性文字的指导, 用户就不会盲目操作了. 
[注释]
条件选股公式编辑器
条件选股公式编辑器与指标公式编辑器极为相似, 因此不专门讲解它. 
交易系统公式编辑器
在新建, 修改交易系统公式时, 将弹出交易系统公式编辑器对话框. 
比较指标公式编辑器我们只对多出的部分进行讲解. 
[测试步长]在进行参数优化时, 每次参数变化的大小. 
[多头买入]做多时的买入条件在此输入, 买入点指示的颜色及式样也请在此选定. 
[多头卖出] 做多时的卖出条件在此输入, 卖出点指示的颜色及式样也请在此选定. 
[空头买入] 做空时的买入条件在此输入, 买入点指示的颜色及式样也请在此选定. 
[空头卖出]做空时的卖出条件在此输入, 卖出点指示的颜色及式样也请在此选定. 
五彩K线公式编辑器
与指标公式编辑器的使用相似

## 序列行情函数

HIGH 最高价
返回该周期最高价. 
用法: HIGH
H 最高价
返回该周期最高价. 
用法: 同HIGH
LOW 最低价
返回该周期最低价. 
用法: LOW
L 最低价
返回该周期最低价. 
用法: 同LOW
CLOSE 收盘价
返回该周期收盘价. 
用法: CLOSE
C 收盘价
返回该周期收盘价. 
用法:同 CLOSE
VOL 成交量(手)
返回该周期成交量. 
用法: VOL
V 成交量(手)
返回该周期成交量. 
用法: 同VOL
OPEN 开盘价
返回该周期开盘价. 
用法: OPEN
O : 开盘价
返回该周期开盘价. 
用法: OPEN
ADVANCE 上涨家数
返回该周期上涨家数. 
用法: ADVANCE ( 本函数仅对沪深指数有效 )
DECLINE 下跌家数
返回该周期下跌家数. 
用法: DECLINE ( 本函数仅对沪深指数有效 )
AMOUNT 成交额(元)
返回该周期成交额.期货和期权无成交金额
用法: AMOUNT
AMO 成交额(元)
返回该周期成交额.期货和期权无成交金额
用法:AMOUNT
ZSTJJ 分时图均价
返回该周期的分时图均价线,对于分时图周期指标有效.
用法:ZSTJJ
VOLINSTK 持仓量
返回该周期持仓量, 对于期货和期权有意义
用法: VOLINSTK
QHJSJ 结算价
返回该周期结算价 , 对于期货和期权有意义
用法: QHJSJ
HKSHORTVOL抛空量
返回该周期抛空量, 对于港股有意义
用法:HKSHORTVOL
DHIGH 不定周期最高价
返回该不定周期最高价, 属于未来函数
用法: DHIGH
DOPEN 不定周期开盘价
返回该不定周期开盘价 , 属于未来函数
用法: DOPEN
DLOW 不定周期最低价
返回该不定周期最低价 , 属于未来函数
用法: DLOW
DCLOSE 不定周期收盘价
返回该不定周期收盘价 , 属于未来函数
用法: DCLOSE
DVOL 不定周期成交量
返回该不定周期成交量 , 属于未来函数
用法: DVOL

## 时间函数

PERIOD 周期类型
取得周期类型
结果从0到13,依次分别是1/5/15/30/60分钟,日/周/月,多分钟,多日/季/年,5秒线/多秒线,13以上为自定义周期
DATE 日期
取得该周期从 1900 以来的年月日. 
用法: DATE
例如函数返回1000101,表示2000年1月1日,DATE+19000000后才是真正的日期值,公式内容中请不要直接写8位长的日期数字
TIME 时间 (时分)
取得该周期的时分,适用于日线以下周期
用法: TIME 函数返回有效值范围为 (0000-2359) . 
TIME 时间 (时分秒)
取得该周期的时分秒,适用于日线以下周期.
用法: TIME 函数返回有效值范围为 (000000-235959) . 
YEAR 年份
取得该周期的年份. 
用法: YEAR
注:YEAR关键字也可用于跨周期年线引用
MONTH 月份
取得该周期的月份. 
用法: MONTH 函数返回有效值范围为 (1-12) . 
注:MONTH关键字也可用于跨周期月线引用
WEEKOFYEAR 年内星期
取得该周是年内第几个周
用法: WEEKOFYEAR
WEEKDAY 星期
取得该周期的星期数. 
函数返回有效值范围为(1,2,3,4,5,6,0)
DAYSTOTODAY
取得该周期的日期离今天的天数
用法:DAYSTOTODAY
DAY 日
取得该周期的日期. 
用法: DAY 函数返回有效值范围为 (1-31) . 
注:DAY关键字也可用于跨周期日线引用
HOUR 小时
取得该周期的小时数. 
用法: HOUR 函数返回有效值范围为 (0-23) , 对于日线及更长的分析周期值为 0 . 
MINUTE 分钟
取得该周期的分钟数. 
用法: MINUTE  函数返回有效值范围为 (0-59) , 对于日线及更长的分析周期值为 0 . 
FROMOPEN 当前离开盘分钟数
求该品种当前时刻已开盘有多长时间. 
用法:  FROMOPEN 返回当前时刻距开盘有多长时间(开市期间的相对时间), 单位为分钟. 
TOTALFZNUM 总分钟数
求该品种的每天的总交易分钟数
用法: TOTALFZNUM 返回当前品种的每天的总交易分钟数,单位为分钟. 
DATETODAY 转换天数
指定日期到 1990.12.19 的天数
用法: DATETODAY(date) 返回 date 到 1990.12.19 的天数, 有效日期为(901219-1341231)
例如: DATETODAY(901219) 返回 0
DAYTODATE 转换日期
求 1990.12.19 后第若干天的日期
用法: DAYTODATE(N) 返回 1990.12.19 后第 N 天的日期, 有效天数为( 0-20000 )
例如: DAYTODATE(0) 返回 901219 . 
TIMETOSEC 当日秒数
求指定时该距 0 时有多长时间
用法: TIMETOSEC(time) 返回 time 时刻距 0 时有多长时间, 单位为秒, 有效时间为 ( 0-235959 )
例如: TIMETOSEC(93000) 返回 34200
SECTOTIME 转换时间
求0时后若干秒是什么时间
用法:SECTOTIME(N) 返回0时后N秒是什么时间.有效秒数为(0-86399)
例如:SECTOTIME(34200)返回93000
MACHINEDATE 当前系统的日期
取得当前客户端机器从1900以来的的年月日,比如2016年10月1日为:01161001,MACHINEDATE+19000000后才是真正的日期值,公式内容中请不要直接写8位长的日期数字
MACHINETIME 当前系统的时间
取得当前客户端机器的时间,比如11:01:15时为110115
MACHINEWEEK 当前系统的星期
取得当前客户端机器为星期几(1,2,3,4,5,6,0)

## 引用函数

DRAWNULL 无效数
返回无效数. 
用法: DRAWNULL
例如: IF(CLOSE>REF(CLOSE,1),CLOSE,DRAWNULL)表示下跌时不画线. 
BACKSET 向前赋值
用法:
BACKSET(X,N),若X非0,则将当前位置到N周期前的数值设为1.
例如:
BACKSET(CLOSE>OPEN,2)若收阳则将该周期及前一周期数值设为1,否则为0
ALIGNRIGHT 有效数据右对齐
有效数据右对齐.
用法:
ALIGNRIGHT(X)有效数据向右移动,左边空出来的周期填充无效值
例如:TC:=IF(CURRBARSCOUNT=2 || CURRBARSCOUNT=5,DRAWNULL,C);XC:ALIGNRIGHT(TC);删除了两天的收盘价,并将剩余数据右移
BARSCOUNT 有效数据周期数
求有效数据周期数. 
用法:  BARSCOUNT(X) 第一个有效数据到当前的天数. 
例如:  BARSCOUNT(CLOSE) 对于日线数据取得上市以来总交易日数. 
BARSTATUS 数据位置状态
返回数据位置信息, 1 表示第一根 K 线,  2 表示最后一个数据,  0 表示中间位置. 
例如: BARSTATUS=2 表示当天是该股票数据的最后一个周期. 
CURRBARSCOUNT 到最后交易日的周期
求到最后交易日的周期数 .
用法: CURRBARSCOUNT 求到最后交易日的周期数
TOTALBARSCOUNT 总的周期数
求总的周期数 .
用法: TOTALBARSCOUNT 求总的周期数
ISLASTBAR 判断是否为最后一个周期
用法: ISLASTBAR 判断是否为最后一个周期
BARSLAST 上一次条件成立位置
上一次条件成立到当前的周期数. 
用法:  BARSLAST(X) 上一次 X 不为 0 到现在的天数. 
例如:  BARSLAST(CLOSE/REF(CLOSE,1)>=1.1) 表示上一个涨停板到当前的周期数. 
BARSNEXT 下一次条件成立位置
下一次条件成立到当前的周期数. 
用法:  BARSNEXT(X) 下一次 X 不为 0 到现在的天数. 
例如:  BARSNTXT(CLOSE/REF(CLOSE,1)>=1.1) 表示下一个涨停板到当前的周期数. 
BARSSINCEN N 周期内首个条件成立位置
N周期内第一个条件成立到当前的周期数.
用法:
BARSSINCEN(X,N):N周期内第一次X不为0到现在的天数,N为常量
例如:
BARSSINCEN(HIGH>10,10)表示10个周期内股价超过10元时到当前的周期数
BARSSINCE 首个条件成立位置
第一个条件成立到当前的周期数.
用法:
BARSSINCE(X):第一次X不为0到现在的天数
例如:
BARSSINCE(HIGH>10)表示股价超过10元时到当前的周期数
COUNT 统计
统计满足条件的周期数.
用法:
COUNT(X,N),统计N周期中满足X条件的周期数,若N<0则从第一个有效值开始.
例如:
COUNT(CLOSE>OPEN,20)表示统计20周期内收阳的周期数
BARSLASTCOUNT 条件连续成立次数
统计连续满足条件的周期数.
用法:
BARSLASTCOUNT(X),统计连续满足X条件的周期数.
例如:
BARSLASTCOUNT(CLOSE>OPEN)表示统计连续收阳的周期数
HHV 最高值
求最高值. 
用法:  HHV(X,N)  求 N 周期内 X 最高值,  N=0 则从第一个有效值开始. 
例如:  HHV(HIGH,30)  表示求 30 日最高价. 
HHVBARS 上一高点位置
求上一高点到当前的周期数. 
用法:  HHVBARS(X,N) 求 N 周期内X最高值到当前周期数,N=0 表示从第一个有效值开始统计. 
例如:  HHVBARS(HIGH,0) 求得历史新高到到当前的周期数. 
HOD 高值名次
求高值名次
用法: HOD(X,N) 求当前 X 数据是 N 周期内的第几个高值 ,N=0 则从第一个有效值开始
例如: HOD(HIGH,20) 返回是 20 日的第几个高价
LLV 最低值
求最低值. 
用法:  LLV(X,N) 求 N 周期内 X 最低值,  N=0 则从第一个有效值开始. 
例如:  LLV(LOW,0) 表示求历史最低价. 
LLVBARS 上一低点位置
求上一低点到当前的周期数. 
用法:  LLVBARS(X,N) 求 N 周期内 X 最低值到当前周期数,  N=0 表示从第一个有效值开始统计. 
例如:  LLVBARS(HIGH,20) 求得 20 日最低点到当前的周期数. 
LOD 低值名次
求低值名次
用法: LOD(X,N) 求当前 X 数据是 N 周期内的第几个低值,  N=0 则从第一个有效值开始
例如: LOD(LOW,20)返回是 20 日的第几个低价
REVERSE 求相反数
求相反数. 
用法:  REVERSE(X) 返回 -X . 
例如:  REVERSE(CLOSE) 返回 -CLOSE . 
REF 日前的
引用若干周期前的数据(平滑处理).
用法:
REF(X,A),引用A周期前的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.此函数中,平滑时使用上一个周期的引用值.
例如:
REF(CLOSE,BARSCOUNT(C)-1)表示第二根K线的收盘价.
REFV 日前的 (未作平滑处理)
引用若干周期前的数据(未作平滑处理).
用法:
REFV(X,A),引用A周期前的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.
例如:
REFV(CLOSE,BARSCOUNT(C)-1)表示第二根K线的收盘价.
REFX 日后的
属于未来函数,引用若干周期后的数据(平滑处理).
用法:
REFX(X,A),引用A周期后的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.此函数中,平滑时使用上一个周期的引用值.
例如:
TT:=IF(C>O,1,2);
REFX(CLOSE,TT);表示阳线引用下一周期的收盘价,阴线引用日后第二周期的收盘价.
REFXV 日后的 (未作平滑处理)
属于未来函数,引用若干周期后的数据(未作平滑处理).
用法:
REFXV(X,A),引用A周期后的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.
例如:
REFXV(CLOSE,1)表示下一周期的收盘价,在日线上就是明天收盘价
REFDATE 日
引用自 1900 年以来指定日期的数据. 
用法:  REFDATE(X ,A) 引用 A 日期的 X 值. 
例如:  REF(CLOSE, 1011208)  表示 2001 年 12 月 08 日的收盘价. 
CALCSTOCKINDEX 指标引用
指标引用.
用法:CALCSTOCKINDEX(品种代码,指标名称,指标线),返回该指标相应输出的计算值.
例如:
CALCSTOCKINDEX('SH600000','KDJ',3)表示上证600000的KDJ指标第3个输出即J之值,第一个参数可在前面加SZ(深市),SH(沪市),或市场_,,
CALCSTOCKINDEX('47_IFL0','MACD',2)表示IFL0品种的MACD指标第2个输出值.
注意:引用品种的对应周期的数据必须要先下载到本地
SUM 累和
求总和.
用法:
SUM(X,N),统计N周期中X的总和,N=0则从第一个有效值开始.
SUM(VOL,0)表示统计从上市第一天以来的成交量总和
MULAE 累乘
求累乘
用法: MULAR(X,N) 统计 N 周期中 X 的乘积 ,N=0 则从第一个有效值开始
例如: MULAR(C/REF(C,1),0) 表示统计从上市第一天以来的复利
FILTER 过滤
过滤连续出现的信号. 
用法:  FILTER(X , N) :X 满足条件后,将其后N周期内的数据置为0,N为常量 . 
例如:  FILTER(CLOSE>OPEN ,5) 查找阳线,  5 天内再次出现的阳线不被记录在内. 
FILTERX 反向过滤
反向过滤连续出现的信号.
用法:FILTERX(X,N):X满足条件后,将其前N周期内的数据置为0,N为常量.
例如:
FILTERX(CLOSE>OPEN,5)查找阳线,前5天内出现过的阳线不被记录在内
TFILT 区间过滤
对指定时间段的数据进行过滤,该时间段以外的数据无效.
用法:
TFILT(X,D1,M1,D2,M2)
例如:
TFILT(CLOSE,1040101,1025,1040101,1345)表示在2004年1月1日的10:25到2004年1月1日的13:45的收盘价是有效的.
周期以日为基本单位的,分时为0有效.
TFILTER 信号过滤(多头)
过滤连续出现的信号.
用法:TFILTER(买入条件,卖出条件,N);过滤掉买入(卖出)信号发出后,下一个反向信号发出前的所有买入(卖出)信号.
N=1表示仅对买入信号过滤;
N=2表示仅对卖出信号过滤;
N=0表示对买入和卖出信号都过滤,返回1,2表示买入或卖出条件成立;
同一K线上只能有一个信号;
例如:
ENTERLONG:TFILTER(买入,卖出,1);
EXITLONG:TFILTER(买入,卖出,2);
TTFILTER 信号过滤(多空)
按照开平配对等原则过滤不合理的信号.
用法:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,N);
主要规则有:
1.连续的同方向指令只有第一个有效,其他的将被过滤;
2.交易信号必须配对出现(比如前面已经有了买开指令,则后面只允许出现卖平指令,其他的指令都被过滤掉);
N=1表示仅对买入开仓信号过滤;
N=2表示仅对卖出平仓信号过滤;
N=3表示仅对卖出开仓信号过滤;
N=4表示仅对买入平仓信号过滤;
N=0表示都过滤,返回1,2,3,4分别表示对应的条件成立;
同一K线上只能有一个信号;
例如:
ENTERLONG:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,1);
EXITLONG:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,2);
ENTERSHORT:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,3);
EXITSHORT:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,4);
TR 真实波幅
求真实波幅
用法: TR 求真实波幅
例如: ATR:=MA(TR,10) 表示求真实波幅的 10 周期均值
SUMBARS 累加到指定值的周期数
向前累加到指定值到现在的周期数. 
用法:  SUMBARS(X,A) 将 X 向前累加直到大于等于 A , 返回这个区间的周期数. 
例如:  SUMBARS(VOL ,CAPITAL) 求完全换手到现在的周期数. 
MA 简单移动平均
返回简单移动平均. 
用法:  MA(X,N):X的N日简单移动平均,算法(X1+X2+X3+...+Xn)/N,N支持变量
SMA 移动平均
返回移动平均. 
用法: SMA(X,N,M):X的N日移动平均,M为权重,如Y=(X*M+Y'*(N-M))/N
TMA 移动平均
返回移动平均
用法: TMA(X,A,B),A和B必须小于1,算法 Y=(A*Y'+B*X),其中Y'表示上一周期Y值.初值为X
MEMA 平滑移动平均
返回平滑移动平均
用法:
MEMA(X,N):X的N日平滑移动平均,如Y=(X+Y'*(N-1))/N
MEMA(X,N)相当于SMA(X,N,1)
EMA 指数移动平均
返回指数移动平均. 
用法:  EMA(X ,N) X 的 N日指数移动平均. 算法 :Y=(X*2+Y'*(N-1))/(N+1)
EMA(X,N)相当于SMA(X,N+1,2),N支持变量
EXPMA 指数移动平均
返回指数移动平均
用法: 与EMA的用法一致
EXPMEMA 指数平滑移动平均
返回指数平滑移动平均
用法:
EXPMEMA(X,N):X的N日指数平滑移动平均
EXPMEMA同EMA(EXPMA)的差别在于他的起始值为一平滑值
WMA 加权移动平均
返回加权移动平均
用法:WMA(X,N):X的N日加权移动平均.算法:Yn=(1*X1+2*X2+...+n*Xn)/(1+2+...+n)
DMA 动态移动平均
求动态移动平均.
用法:
DMA(X,A),求X的动态移动平均.
算法:Y=A*X+(1-A)*Y',其中Y'表示上一周期Y值,A必须小于1.A支持变量
例如:
DMA(CLOSE,VOL/CAPITAL)表示求以换手率作平滑因子的平均价
AMA 自适应均线
求自适应均线值.
用法:
AMA(X,A),A为自适应系数,必须小于1.
算法:
Y=Y'+A*(X-Y').初值为X
XMA 偏移移动平均
属于未来函数,返回偏移移动平均
用法: XMA(X,N):X的N日偏移移动平均,用到了当日以后N/2日的数据,只供内部测试使用
RANGE 介于某个范围之间
用法:  RANGE(A,B,C) A 在 B 和 C 范围之间,B<A<C.
例如:  RANGE(A,B,C)表示A大于B同时小于C时返回1,否则返回0
CONST 取值设为常数
用法 : CONST(A) 取 A 最后的值为常量 .
例如:  CONST(INDEXC) 表示取指数现价. 
TOPRANGE 当前值是近多少周期内的最大值
当前值是近多少周期内的最大值.
用法:
TOPRANGE(X):X是近多少周期内X的最大值
例如:
TOPRANGE(HIGH)表示当前最高价是近多少周期内最高价的最大值
LOWRANGE   当前值是近多少周期内的最小值
用法:   LOWRANGE(X) :X 是近多少周期内 X 的最小值
例如:   LOWRANGE(LOW)   表示当前最低价是近多少周期内最低价的最小值
FINDHIGH 寻找指定周期内的特定最大值
N 周期前的 M 周期内的第 T 个最大值 .
用法: FINDHIGH(VAR,N,M,T): VAR 在 N 日前的 M 天内第 T 个最高价
FINDHIGHBARS   寻找指定周期内的特定最大值到当前周期的周期数
N 周期前的 M 周期内的第 T 个最大值到当前周期的周期数
用法:   FINDHIGHBARS(VAR,N,M,T):VAR在N日前的M天内第T个最高价到当前周期的周期数
FINDLOW   寻找指定周期内的特定最小值
N 周期前的 M 周期内的第 T 个最小值 .
用法:   FINDLOW(VAR,N,M,T):VAR在N日前的M天内第T个最低价
FINDLOWBARS   寻找指定周期内的特定最小值到当前周期的周期数
N 周期前的 M 周期内的第 T 个最小值到当前周期的周期数 .
用法:  FINDLOWBARS(VAR,N,M,T):VAR在N日前的M天内第T个最低价到当前周期的周期数
EXTERNSTR 引用自定义外部字符串数据
EXTERNSTR(TYPE,ID)
TYPE为1表示是系统保留数据,
TYPE为0表示是自定义外部数据,读取signals目录下面的的extern_user.txt,请用自定义数据管理器来维护
extern_user.txt为文本结构,如下 1|600717|1|好股|0.33
市场(0:深圳,1:上海)|品种代码|数据号|文字串|数值 如果是导出格式,则不需要数据号
EXTERNVALUE 引用自定义外部数值数据
EXTERNVALUE(TYPE,ID),用法同EXTERNSTR类似
SIGNALS_SYS 引用自定义序列数据(系统)
引用自定义序列数据(系统)
SIGNALS_USER 自定义序列数据
引用自定义序列数据.
读取个人目录下的signals目录下面的[signals_user_?]目录,请用自定义数据管理器来维护.
SIGNALS_USER(11,TYPE):表示读当前品种的11数据号的序列数据(自定义数据需按日期从小到大排序),TYPE:1表示做平滑处理,没有自定义数据的周期返回上一周期的值;0表示不做平滑处理;2表示没有数据则为0.
EXTDATA_USER 引用扩展数据
引用扩展数据.
请用扩展数据管理器来设置和刷新数据.
EXTDATA_USER(N,TYPE),N取(1-100),表示读当前品种的N号扩展序列数据,TYPE:1表示做平滑处理,没有数据的周期返回上一周期的值;0表示不做平滑处理;2表示没有数据则为0.
SPLIT 除权除息数据
SPLIT(N,TYPE),取得之前第N次除息除权(送转股,分红)的除权除息数据,参数为0表示送转股的比例(送转/(送转+10)),1表示每股分红(分红/10)),例如:SPLIT(0,0)=0.5表示最近一次除权可能是10送10
SPLITBARS 除权除息到现在的周期数
SPLITBARS(N,TYPE),取得之前第N次除权除息到当前的周期数,参数为0表示送转股,1表示分红,2表示送转股或分红,例如:SPLITBARS(0,0)=0表示当天发生除权
ZTPRICE 计算涨停价
返回涨停价
用法:
ZTPRICE(REF(CLOSE,1),0.1):按10%计算得到在昨收盘基础上的涨停价(对于复权序列K线,由于复权处理,根据前一天的收盘价计算结果可能与涨停价不符)
比如:
ZTPrice(REF(QHJSJ,1),0.1),得到期货的涨停价
DTPRICE 计算跌停价
返回跌停价
用法:
DTPRICE(REF(CLOSE,1),0.1):按10%计算得到在昨收盘基础上的跌停价(对于复权序列K线,由于复权处理,根据前一天的收盘价计算结果可能与跌停价不符)
比如:
DTPrice(REF(QHJSJ,1),0.6),得到期货的跌停价(跌停比例为0.6的话)
TDXDLL1 第1号DLL
调用DLL中的函数.
用法:
DLL1(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL2 第2号DLL
调用DLL中的函数.
用法:
DLL2(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL3 第3号DLL
调用DLL中的函数.
用法:
DLL3(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL4 第4号DLL
调用DLL中的函数.
用法:
DLL4(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL5 第5号DLL
调用DLL中的函数.
用法:
DLL5(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL6 第6号DLL
调用DLL中的函数.
用法:
DLL6(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL7 第7号DLL
调用DLL中的函数.
用法:
DLL7(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL8 第8号DLL
调用DLL中的函数.
用法:
DLL8(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL9 第9号DLL
调用DLL中的函数.
用法:
DLL9(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
TDXDLL10 第10号DLL
调用DLL中的函数.
用法:
DLL10(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
USERFUNC0 DLL函数(无参数)
调用DLL中的函数,DLL中内部对应定义.
用法:
USERFUNC0
USERFUNC1 DLL函数(1参数)
调用DLL中的函数,DLL中内部对应定义.
用法:
USERFUNC1(param1)
USERFUNC2 DLL函数(2参数)
调用DLL中的函数,DLL中内部对应定义.
用法:
USERFUNC2(param1,param2)
USERFUNC3 DLL函数(3参数)
调用DLL中的函数,DLL中内部对应定义.
用法:
USERFUNC3(param1,param2,param3)
USERFUNC4 DLL函数(4参数)
调用DLL中的函数,DLL中内部对应定义.
用法:
USERFUNC4(param1,param2,param3,param4)

## 板块字符函数

CODE 品种代码
返回品种代码.
用法:
DRAWTEXT_FIX(ISLASTBAR,0,0,0,CODE);在屏幕左上角显示品种代码
STKNAME 品种名称
返回品种名称.
用法:
DRAWTEXT_FIX(ISLASTBAR,0,0,0,STKNAME);在屏幕左上角显示品种名称
HYBLOCK 所属行业(字串)
返回品种所属行业
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,HYBLOCK); 在屏幕左上角显示所属行业板块
DYBLOCK 所属地域(字串)
返回品种所属地域 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,DYBLOCK) ;在屏幕左上角显示所属地域板块
GNBLOCK 所属概念板块 (字串)
返回所属概念板块 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,GNBLOCK) 在屏幕左上角显示所属概念板块
FGBLOCK 所属风格板块 (字串)
返回股票所属风格板块 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,FGBLOCK) 在屏幕左上角显示所属风格板块
ZSBLOCK 所属指数板块 (字串)
返回股票所属指数板块 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZSBLOCK) 在屏幕左上角显示所属指数板块
ZHBLOCK 所属组合板块(字串)
返回股票所属组合板块 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZHBLOCK) 在屏幕左上角显示所属组合板块
ZDBLOCK 所属自定义板块 (字串)
返回股票所属自定义板块 .
用法: DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZDBLOCK) 在屏幕左上角显示所属自定义板块
GNBLOCKNUM 所属概念板块(个数)
返回所属概念板块的个数,比如:IF(GNBLOCKNUM>5,1,0);.
FGBLOCKNUM 所属风格板块(个数)
返回所属风格板块的个数.
ZSBLOCKNUM 所属指数板块(个数)
返回所属指数板块的个数.
ZHBLOCKNUM 所属组合板块(个数)
返回所属组合板块的个数.
ZDBLOCKNUM 所属自定义板块(个数)
返回所属自定义板块的个数
HYZSCODE 所属行业的板块指数代码
返回品种所属行业的板块指数代码.比如: CALCSTOCKINDEX(HYZSCODE,'KDJ',3);
HYSYL 指数市盈率或个股所属行业的市盈率.
返回指数市盈率或个股所属行业的市盈率.
HYSJL 指数市净率或个股所属行业的市净率
返回指数市净率或个股所属行业的市净率.
INBLOCK 属于某板块
返回品种是否属于某板块.
用法:
if(INBLOCK('沪深300'),x,y);
板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确
NAMELIKE 模糊匹配品种名称
返回股票名称是否以参数开头 .
用法: if(NAMELIKE('ST'),x,y)
CODELIKE 模糊匹配品种代码
返回品种代码是否以参数开头 .
用法: if(CODELIKE('600'),x,y)
NAMEINCLUDE 品种名称中包含
品种名称中是否包含参数.
用法: if(NAMEINCLUDE('文化'),x,y);
CON2STR 取值转为字符串
用法: CON2STR(A,N):取A最后的值(非序列值)转为字符串,小数位数N.
CON2STR(FINANCE(20),3)表示取营业收入,以3位小数转为字符串
VAR2STR 取值转为字符串(序列)
用法: VAR2STR(A,N) :取 A 的每一个值转为字符串, 小数位数 N
用法: VAR2STR(C,3) 表示取收盘以 3 位小数转为字符串
STR2CON 字符串转为数字
用法: STR2CON(S) 将 S 字符串转化为数字 .
例如: STR2CON('2365.02') 表示将字符串 '2365.02' 转化为数字 2365.02
STRCAT 字符串相加
用法: STRCAT(A,B) 将两个字符串 A,B(非序列化) 相加成一个字符串 C
例如: STRCAT(' 多头 ',' 开仓 ') 将两个字符串 ' 多头 ' , ' 开仓 ' 相加成一个字符串 ' 多头开仓 '
STRSPACE 字符串加一空格
STRSPACE(A):字符串附带一空格
VARCAT 字符串相加(序列)
VARCAT(A,B):将两个字符串A,B相加成一个字符串C.
用法:
DRAWTEXT(CLOSE>OPEN,LOW,VARCAT('多头',VAR2STR(C,2))) 将两个字符串相加成一个字符串并按条件显示出来
STRCMP 字符串比较
STRCMP(A,B):比较两个字符串A,B是否相等.
用法:
STRCMP(HYBLOCK,'房地产')将成分股行业字符串与'房地产'比较,是否相等,如果相等表示属于房地产板块
FINDSTR 字符串查找
FINDSTR(A,B):在字符串A中查找字符串B,如果找到返回1,否则返回0.
用法:
FINDSTR('多头开仓','开仓')在字符串'多头开仓'中查找字符串'开仓',返回1

## 指定窗口定点输出函数

DRAWTEXT_FIX 定点文字
固定位置显示文字;在指标排序中显示字符串栏目.
用法:
DRAWTEXT_FIX(COND,X,Y,TYPE,TEXT),当COND条件满足时,在当前指标窗口内(X,Y)位置书写文字TEXT,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
DRAWTEXT_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,'大阳线')表示最后一个交易日实体阳线大于8%时在窗口中间位置显示'大阳线'字样.
DRAWNUMBER_FIX 画定点数字
固定位置显示数字.
用法:
DRAWNUMBER_FIX(COND,X,Y,TYPE,NUMBER),当COND条件满足时,在当前指标窗口内(X,Y)位置书写数字NUMBER,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
DRAWNUMBER_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,C)表示最后一个交易日实体阳线大于8%时在窗口中间位置显示收盘价.
函数范例:
示例公式: DRAWFIX
公式名称: DRAWFIX
公式脚本:
DRAWTEXT_FIX(ISLASTBAR,0.5,0,0,HYBLOCK),COLORYELLOW;
DRAWTEXT_FIX(ISLASTBAR,0,0,0,' 股本结构 :'),COLORRED;
DRAWTEXT_FIX(ISLASTBAR,0,0.1,0,' 总股本 :'),COLORRED;
DRAWNUMBER_FIX(ISLASTBAR,0,0.2,0,FINANCE(1)),COLORMAGENTA;
DRAWTEXT_FIX(ISLASTBAR,0.3,0.1,0,' 流通 A 股 :'),COLORGREEN;
DRAWNUMBER_FIX(ISLASTBAR,0.3,0.2,0,FINANCE(7)),COLORYELLOW;
DRAWTEXT_FIX(ISLASTBAR,0.5,0.1,0,' 今日换手率 :'),COLORGREEN;
DRAWNUMBER_FIX(ISLASTBAR,0.5,0.2,0,V*100/CAPITAL),COLORYELLOW;
效果图 :
注:
1.当窗口大小改变时,  DRAWFIX 各输出文字或数字的相对位置不变;
2.通过方向键等方式改变分析图中 K 线个数时,  DRAWFIX 窗口内的文字或数字位置不随之改变;

## 逻辑函数

CROSS 上穿
两条线交叉.
用法:
CROSS(A,B)表示当A从下方向上穿过B时返回1,否则返回0
例如:
CROSS(MA(CLOSE,5),MA(CLOSE,10))表示5日均线与10日均线交金叉
LONGCROSS 维持周期后上穿
两条线维持一定周期后交叉.
用法:LONGCROSS(A,B,N)表示A在N周期内都小于B,本周期从下方向上穿过B时返回1,否则返回0
UPNDAY 连涨
返回是否连涨周期数.
用法:
UPNDAY(CLOSE,M)
表示连涨M个周期,M为常量
DOWNNDAY 连跌
返回是否连跌周期.
用法:
DOWNNDAY(CLOSE,M)
表示连跌M个周期,M为常量
NDAY 连大
返回是否持续存在X>Y
用法:
NDAY(CLOSE,OPEN,3)
表示连续3日收阳线
EXIST 存在
是否存在.
例如:
EXIST(CLOSE>OPEN,10)
表示10日内存在着阳线
EXISTR 存在
EXISTR(X,A,B):是否存在(前几日到前几日间).
例如:
EXISTR(CLOSE>OPEN,10,5)
表示从前10日内到前5日内存在着阳线
若A为0,表示从第一天开始,B为0,表示到最后日止
EVERY 一直存在
一直存在.
例如:
EVERY(CLOSE>OPEN,N)
表示N日内一直阳线(N应大于0,小于总周期数,N支持变量)
LAST 持续存在
LAST(X,A,B):持续存在.
例如:
LAST(CLOSE>OPEN,10,5)
表示从前10日到前5日内一直阳线
若A为0,表示从第一天开始,B为0,表示到最后日止
NOT 取反
求逻辑非.
用法:
NOT(X)返回非X,即当X=0时返回1,否则返回0
例如:
NOT(ISUP)表示平盘或收阴

## 选择函数

IF 条件判断
根据条件求不同的值.
用法:
IF(X,A,B)若X不为0则返回A,否则返回B
例如:
IF(CLOSE>OPEN,HIGH,LOW)表示该周期收阳则返回最高值,否则返回最低值
IFF定 条件判断
用法同IF一样
IFN 条件反判断
根据条件求不同的值,同IF判断相反.
用法:
IFN(X,A,B)若X不为0则返回B,否则返回A
例如:
IFN(CLOSE>OPEN,HIGH,LOW)表示该周期收阴则返回最高值,否则返回最低值
IFC 条件判断,可中止
根据条件求不同的值,可中止.
用法:
IFC(X,A,B)若X不为0则返回A,否则返回B.IFC与IF函数的区别:根据X的值来选择性执行A, B表达式.
例如:
IFC(CLOSE>OPEN,HIGH,TESTSKIP(1));L;表示当日收阳则返回最高值,并执行下一句"L;",否则退出公式计算
VALUEWHEN境 条件跟随
VALUEWHEN(COND,X)
当COND条件成立时,取X的当前值,否则取VALUEWHEN的上个值.
TESTSKIP 是否就此返回
TESTSKIP(A):满足A则直接返回.
用法:
TESTSKIP(A)
表示如果满足条件A则该公式直接返回,不再计算接下来的表达式 注意:A为非序列数据,只取最后一个数据

## 数学函数

MAX 较大值
求最大值.
用法:
MAX(A,B)返回A和B中的较大值
例如:
MAX(CLOSE-OPEN,0)表示若收盘价大于开盘价返回它们的差值,否则返回0
MIN 较小值
求最小值.
用法:
MIN(A,B)返回A和B中的较小值
例如:
MIN(CLOSE,OPEN)返回开盘价和收盘价中的较小值
MAX6 较大值
求6个参数中的最大值.
用法:
MAX6(A,B,C,D,E,F)返回较大值
MIN6 较小值
求6个参数中的最小值.
用法:
MIN6(A,B,C,D,E,F)返回较小值
ACOS 反余弦
反余弦值. 
用法:  ACOS(X) 返回 X 的反余弦值. 
ASIN 反正弦
反正弦值. 
用法:  ASIN(X) 返回 X 的反正弦值. 
ATAN 反正切
反正切值. 
用法:  ATAN(X) 返回 X 的反正切值. 
COS 余弦
余弦值. 
用法:  COS(X) 返回 X 的余弦值. 
SIN 正弦
正弦值. 
用法:  SIN(X)  返回 X 的正弦值. 
TAN 正切
正切值. 
用法: TAN(X)  返回 X 的正切值. 
EXP 指数
指数. 
用法:  EXP(X)为e 的 X 次幂. 
例如:  EXP(CLOSE) 返回 e 的 CLOSE 次幂. 
LN 自然对数
求自然对数. 
用法: LN(X)  以 e 为底的对数. 
例如:  LN(CLOSE)  求收盘价的对数. 
LOG 对数
求 10 为底的对数. 
用法: LOG(X) 取得 X 的对数. 
例如: LOG(100) 等于 2 . 
SQRT 开方
开平方. 
用法:  SQRT(X) 求 X 的平方根. 
例如:  SQRT(CLOSE)  收盘价的平方根. 
ABS 绝对值
求绝对值. 
用法:  ABS(X) 返回 X 的绝对值. 
例如: ABS(-34) 返回 34 . 
POW 乘幂
乘幂. 
用法: POW(A,B) 返回 A 的 B 次幂. 
例如: POW(CLOSE , 3) 求得收盘价的 3 次方. 
CEILING 向上舍入
向上舍入. 
用法:  CEILING(A) 返回沿 A 数值增大方向最接近的整数. 
例如:  CEILING(12.3)  求得 13 ; CEILING(-3.5) 求得 -3 . 
FLOOR 向下舍入
向下舍入. 
用法:  FLOOR(A) 返回沿 A 数值减小方向最接近的整数. 
例如:  FLOOR(12.3) 求得 12 ; FLOOR(-3.5) 求得 -4 . 
INTPART 整数部分
取整
用法: INTPART(A) 返回沿 A 绝对值减小方向最接近的整数. 
例如:  INTPART(12.3) 求得 12 ,  INTPART(-3.5) 求得 -3 . 
BETWEEN 介于
介于. 
用法:  BETWEEN(A , B , C) 表示 A 处于 B 和 C 之间时返回 1 , 否则返回 0 . 
例如: BETWEEN(CLOSE , MA(CLOSE , 10) ,  MA(CLOSE , 5)) 表示收盘价介于 5 日均线和 10 日均线之间. 
FRACPART 小数部分
小数部分 .
用法: FRACPART(X) 返回 X 的小数部分
ROUND 四舍五入
四舍五入
用法: ROUND(X) 返回 X 四舍五入到个位的数值
ROUND2 四舍五入
四舍五入.
用法:
ROUND2(X,N),返回X四舍五入到N位小数的数值
由于精度问题,数据越大误差可能越大
SIGN 符号
取符号
用法: SIGN(X) 返回 X 的符号. 当 X>0,X=0,X<0 分别返回 1,0,-1
MOD 模
取模
用法: MOD(M,N) 返回 M 关于 N 的模 (M 除以 N 的余数 )
例如: MOD(5,3) 返回 2
RAND 随机正整数
取随机数 .
用法: RAND(N), 返回一个范围在 1-N 的随机整数

## 统计函数

AVEDEV 平均绝对偏差
用法: AVEDEV(X , N) 返回平均绝对偏差. 
DEVSQ 数据偏差平方和
用法: DEVSQ(X , N)  返回数据偏差平方和. 
FORCAST 线性回归预测值
FORCAST(X,N) 返回线性回归预测值,N支持变量
SLOPE 线性回归斜率
SLOPE(X,N) 返回线性回归斜率,N支持变量
STD 估算标准差
用法: STD(X,N) 返回估算标准差, N支持变量
STDP 总体标准差
用法: STDP(X , N) 返回总体标准差,N支持变量
STDDEV 标准偏差
STDDEV(X,N) 返回标准偏差
VAR 估算样本方差
用法: VAR(X , N) 返回估算样本方差,N支持变量
VARP 总体样本方差
用法: VARP(X , N) 返回总体样本方差 ,N支持变量
COVAR 协方差
用法: COVAR(X,Y,N) 返回 X 和 Y 的 N 周期的协方差 ,N支持变量
RELATE 相关系数
用法: RELATE(X,Y,N) 返回 X 和 Y 的 N 周期的相关系数 ,N支持变量
BETA β (Beta) 系数
β(Beta)系数
BETA(N) 返回当前证券N周期收益与大盘收益相比的贝塔系数,N支持变量(对应指数的数据必须要先下载到本地)
BETAEX 相关放大系数
用法: BETAEX(X,Y,N) 返回 X 与 Y 的 N 周期的相关放大系数 ,N支持变量
IVOLAT 期权波动率
IVOLAT(N,M) 返回期权波动率 N表示计算周期 M表示类型,0:标的证券的历史波动率 1:隐含波动率
BLOCKSETNUM 板块股个数
BLOCKSETNUM.横向统计
用法:
BLOCKSETNUM(板块名称),
返回该板块的股票个数.
板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标),第一个参数也可以是HYBLOCK,某板块指数的STKNAME
HORCALC 板块统计
HORCALC.横向统计
用法:
HORCALC(板块名称,数据项,计算方式,权重),
数据项:
100-HIGH,101-OPEN,102-LOW,103-CLOSE,104-VOL,105-涨幅,106-成交额
计算方式:
0-累加,1-排名次,2-平均值
平均值权重:
0-总股本,1-流通股本,2-等同权重,3-流通市值,4-总市值.
板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标),第一个参数也可以是HYBLOCK,某板块指数的STKNAME
INSORT 板块指标排序
INSORT.横向统计
用法:INSORT(板块名称,指标名称,指标线,升降序),
返回该股在板块中的排序序号
例如:
INSORT('房地产','KDJ',3,0)表示该股的KDJ指标第三个输出即J之值在房地产板块中的排名,
最后一个参数为0表示降序排名.
板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标),第一个参数也可以是HYBLOCK,某板块指数的STKNAME
INSUM 板块指标统计
INSUM.横向统计
用法:INSUM(板块名称,指标名称,指标线,计算类型),
返回板块各成分该指标相应输出按计算类型得到的计算值.计算类型:0-累加,1-平均数,2-最大值,3-最小值.
例如:
INSUM('房地产','KDJ',3,0)表示房地产板块中所有股票的KDJ指标第三个输出即J之值的累加值.
板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标),第一个参数也可以是HYBLOCK,某板块指数的STKNAME

## 形态函数

COST 成本分布
成本分布情况. 
用法:  COST(10) , 表示 10% 获利盘的价格是多少, 即有 10% 的持仓量在该价格以下, 其余 90% 在该价格以上, 为套牢盘. 
该函数仅对日线分析周期有效. 
PEAK 波峰值
属于未来函数,前M个ZIG转向波峰值.
用法:
PEAK(K,N,M)表示之字转向ZIG(K,N)的前M个波峰的数值,M必须大于等于1
例如:
PEAK(1,5,1)表示%5最高价ZIG转向的上一个波峰的数值
PEAKBARS 波峰位置
属于未来函数,前M个ZIG转向波峰到当前距离.
用法:
PEAKBARS(K,N,M)表示之字转向ZIG(K,N)的前M个波峰到当前的周期数,M必须大于等于1
例如:
PEAK(0,5,1)表示%5开盘价ZIG转向的上一个波峰到当前的周期数
SAR 抛物转向
抛物转向. 
用法:
SAR(N,S,M),N为计算周期,S为步长,M为极值
例如:
SAR(10,2,20)表示计算10日抛物转向,步长为2%,极限值为20%
SARTURN 抛物转向点
抛物转向点. 
用法:
SARTURN(N,S,M),N为计算周期,S为步长,M为极值,若发生向上转向则返回1,若发生向下转向则返回-1,否则为0
其用法与SAR函数相同
TROUGH 波谷值
属于未来函数,前M个ZIG转向波谷值.
用法:
TROUGH(K,N,M)表示之字转向ZIG(K,N)的前M个波谷的数值,M必须大于等于1
例如:
TROUGH(2,5,2)表示%5最低价ZIG转向的前2个波谷的数值
TROUGHBARS 波谷位置
属于未来函数,前M个ZIG转向波谷到当前距离.
用法:
TROUGHBARS(K,N,M)表示之字转向ZIG(K,N)的前M个波谷到当前的周期数,M必须大于等于1
例如:
TROUGH(2,5,2)表示%5最低价ZIG转向的前2个波谷到当前的周期数
WINNER 获利盘比例
获利盘比例. 
用法:  WINNER(CLOSE) 表示以当前收市价卖出的获利盘比例. 
例如:  返回 0.1 表示 10% 获利盘,  WINNER(10.5) 表示 10.5 元价格的获利盘比例. 
该函数仅对日线分析周期有效. 
LWINNER 近期获利盘比例
近期获利盘比例. 
用法:  LWINNER(5 , CLOSE) 表示最近 5 天的那部分成本以当前收市价卖出的获利盘比例. 
例如: 返回 0.1 表示 10% 获利盘. 
PWINNER 远期获利盘比例
远期获利盘比例. 
用法: PWINNER(5 , CLOSE) 表示 5 天前的那部分成本以当前收市价卖出的获利盘比例. 
例如: 返回 0.1 表示 10% 获利盘. 
COSTEX 区间成本
区间成本. 
用法:  COSTEX(CLOSE , REF(CLOSE)) , 表示近两日收盘价格间筹码的成本. 
该函数仅对日线分析周期有效. 
PPART 远期成本分布比例
远期成本分布比例. 
用法:  PPART(10) 表示 10 前的成本占总成本的比例. 0.2 表示 20% . 
ZIG 之字转向
属于未来函数,之字转向.
用法:
ZIG(K,N),当价格变化量超过N%时转向,K表示0:开盘价,1:最高价,2:最低价,3:收盘价,其余:数组信息
例如:
ZIG(3,5)表示收盘价的5%的ZIG转向
ZIGA 之字转向
属于未来函数,之字转向.
用法:
ZIGA(K,X),当价格变化超过X时转向,K表示0:开盘价,1:最高价,2:最低价,3:收盘价,其余:数组信息
例如:
ZIGA(3,1.5)表示收盘价变化1.5元的ZIGA转向
NEWSAR 新抛物转向
新抛物转向函数
用法: NEWSAR(N,S) N 为起始统计天数 ,S 为加速因子
例如: NEWSAR(10,2) 表示从 10 日后开始统计 , 加速因子为 2 的抛物转向
LFS 锁定因子
返回个股锁定因子

## 指数标的函数

INDEXA 大盘的成交额
INDEXA 返回对应的大盘成交额,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种(持仓量)
(对应指数的数据必须要先下载到本地)
INDEXADV 大盘的上涨家数
INDEXADV 返回对应的上涨家数,分别是上证指数,深证成指,创业板指
(对应指数的数据必须要先下载到本地)
INDEXDEC 大盘的下跌家数
INDEXDEC 返回对应的下跌家数,分别是上证指数,深证成指,创业板指
(对应指数的数据必须要先下载到本地)
INDEXC 大盘的收盘价
INDEXC 返回对应的大盘收盘价,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种
(对应指数的数据必须要先下载到本地)
INDEXH 大盘的最高价
INDEXH 返回对应的大盘最高价,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种
(对应指数的数据必须要先下载到本地)
INDEXL 大盘的最低价
INDEXL 返回对应的大盘最低价,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种
(对应指数的数据必须要先下载到本地)
INDEXO 大盘的开盘价
INDEXO 返回对应的大盘开盘价,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种
(对应指数的数据必须要先下载到本地)
INDEXV 大盘的成交量
INDEXV 返回对应的大盘成交量,分别是上证指数,深证成指,创业板指,港股为恒生指数,国内期货为对应的L9指数品种
(对应指数的数据必须要先下载到本地)
HY_INDEXA 行业指数的成交额
HY_INDEXA 返回对应的行业指数成交额,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXADV 行业指数的上涨家数
HY_INDEXADV 返回对应的行业指数上涨家数,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXDEC 行业指数的下跌家数
HY_INDEXDEC 返回对应的行业指数下跌家数,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXC 行业指数的收盘价
HY_INDEXC 返回对应的行业指数收盘价,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXH 行业指数的最高价
HY_INDEXH 返回对应的行业指数最高价,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXL 行业指数的最低价
HY_INDEXL 返回对应的行业指数最低价,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXO 行业指数的开盘价
HY_INDEXO 返回对应的行业指数开盘价,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
HY_INDEXV 行业指数的成交量
HY_INDEXV 返回对应的行业指数成交量,如果没有通达信板块指数,则不支持
(对应指数的数据必须要先下载到本地)
DPZSCODE 所属的大盘指数的代码
所属的大盘指数的代码.比如: CALCSTOCKINDEX(DPZSCODE,'KDJ',3);
UNDERCODE 返回对应标的的代码
对于股票期权品种和可转债品种等有效.
比如: CALCSTOCKINDEX(UNDERCODE,'KDJ',3);
UNDERLYC 对应标的的收盘价
对于股票期权品种和可转债品种等有效
(对应指数的数据必须要先下载到本地)

## 资金流向函数

TRADENUM 总成交单数
逐笔成交总单数,沪深品种的资金流向功能专用
TRADEINNUM 逐笔买入成交单数
逐笔买入成交单数,相当于L2_VOLNUM(0,0)+L2_VOLNUM(1,0),沪深品种的资金流向功能专用
TRADEOUTNUM 逐笔卖出成交单数
逐笔卖出成交单数,相当于L2_VOLNUM(0,1)+L2_VOLNUM(1,1),沪深品种的资金流向功能专用
LARGETRDINNUM 逐笔买入大单成交单数
逐笔买入大单成交单数,相当于L2_VOLNUM(0,0),沪深品种的资金流向功能专用
LARGETRDOUTNUM 逐笔卖出大单成交单数
逐笔卖出大单成交单数,相当于L2_VOLNUM(0,1),沪深品种的资金流向功能专用
L2_VOLNUM(N,M) 单数分档
单数分档,按: N(0--1):(超大+大)/(中+小),M(0--1):买/卖二类,沪深品种的资金流向功能专用
L2_VOL(N,M) 成交量分档
单数分档,按: N(0--3):超大/大/中/小四档处理,M(0--3):买入/卖出/主买/主卖四类,沪深品种的资金流向功能专用
L2_AMO(N,M) 成交额分档
单数分档,按: N(0--3):超大/大/中/小四档处理,M(0--3):买入/卖出/主买/主卖四类,沪深品种的资金流向功能专用
CUR_BUYORDER 当前总委买量
当前总委买量,专业版(资金流向功能)沪深品种行情专用
CUR_SELLORDER 当前总委卖量
当前总委卖量,专业版(资金流向功能)沪深品种行情专用
ACTINVOL 主动买成交量
主动买成交量,相当于L2_VOL(0,2)+L2_VOL(1,2)+L2_VOL(2,2)+L2_VOL(3,2),沪深品种的资金流向功能专用
ACTOUTVOL 主动卖成交量
主动卖成交量,相当于L2_VOL(0,3)+L2_VOL(1,3)+L2_VOL(2,3)+L2_VOL(3,3),沪深品种的资金流向功能专用
LARGEINTRDVOL 逐笔买入大单成交量
逐笔买入大单成交量,相当于L2_VOL(0,0)+L2_VOL(1,0),沪深品种的资金流向功能专用
LARGEOUTTRDVOL 逐笔卖出大单成交量
逐笔卖出大单成交量,相当于L2_VOL(0,1)+L2_VOL(1,1),沪深品种的资金流向功能专用
BIDORDERVOL 累计总有效委买量
累计总有效委买量,专业版(资金流向功能)沪深品种行情专用 ,累计总有效委买量-累计总有效撤买量=总买+总成交量
BIDCANCELVOL 累计总有效撤买量
累计总有效撤买量,专业版(资金流向功能)沪深品种行情专用 ,累计总有效委买量-累计总有效撤买量=总买+总成交量
AVGBIDPX 最新委买均价
专业版(资金流向功能)沪深品种行情专用:最新委买均价
OFFERORDERVOL 累计总有效委卖量
累计总有效委卖量,专业版(资金流向功能)沪深品种行情专用, 累计总有效委卖量-累计总有效撤卖量=总卖+总成交量
OFFERCANCELVOL 累计总有效撤卖量
累计总有效撤卖量,专业版(资金流向功能)沪深品种行情专用, 累计总有效委卖量-累计总有效撤卖量=总卖+总成交量
AVGOFFERPX 最新委卖均价
专业版(资金流向功能)沪深品种行情专用:最新委卖均价

## 绘图函数

PLOYLINE 折线段
绘制折线段. 
用法:  PLOYLINE(COND , PRICE) , 当 COND 条件满足时, 以 PRICE 位置为顶点画折线连接. 
例如:  PLOYLINE(HIGH>=HHV(HIGH , 20), HIGH) 表示在创 20 天新高点之间画折线. 
DRAWLINE 直线段
属于未来函数,绘制直线段.
用法:
DRAWLINE(COND1,PRICE1,COND2,PRICE2,EXPAND),当COND1条件满足时,在PRICE1位置画直线起点,当COND2条件满足时,在PRICE2位置画直线终点,EXPAND为延长类型.
例如:
DRAWLINE(HIGH>=HHV(HIGH,20),HIGH,LOW<=LLV(LOW,20),LOW,1)表示在创20天新高与创20天新低之间画直线并且向右延长.
DRAWSL 斜线
绘制斜线.
用法:
DRAWSL(COND,PRICE,SLOPE,LEN,DIRECT),当COND条件满足时,在PRICE位置画斜线,SLOPE为斜率,LEN为长度,DIRECT为0向右延伸,1向左延伸,2双向延伸.
注意:
1.K线间的纵向高度差为SLOPE;
2.SLOPE为0时,为水平线;
3.SLOPE为10000时,为垂直线,LEN为向上的像素高度,DIRECT表示向上或向下延伸;
4.SLOPE和LEN支持变量;
DRAWKLINE K 线
DRAWKLINE(HIGH,OPEN,LOW,CLOSE).
用法:
以HIGH为最高价,OPEN为开盘价,LOW为最低,CLOSE收盘画K线
STICKLINE 柱状线
绘制柱线.
用法:
STICKLINE(COND,PRICE1,PRICE2,WIDTH,EMPTY),当COND条件满足时,在PRICE1和PRICE2位置之间画柱状线,宽度为WIDTH(4为标准间距),EMPTY为0画实心柱,-1画虚线空心柱,否则画实线空心柱.
例如:
STICKLINE(CLOSE>OPEN,CLOSE,OPEN,0.8,1)表示画K线中阳线的空心柱体部分.
DRAWICON 图标
绘制小图标.
用法:
DRAWICON(COND,PRICE,TYPE),当COND条件满足时,在PRICE位置画TYPE号图标(TYPE为1--46).
例如:
DRAWICON(CLOSE>OPEN,LOW,1)表示当收阳时在最低价位置画1号图标.
DRAWTEXT 文字
显示文字;在指标排序中显示字符串栏目.
用法:
DRAWTEXT(COND,PRICE,TEXT),当COND条件满足时,在PRICE位置书写文字TEXT.
例如:
DRAWTEXT(CLOSE/OPEN>1.08,LOW,'大阳线')表示当日实体阳线大于8%时在最低价位置显示'大阳线'字样.
DRAWTEXT_FIX 定点文字
固定位置显示文字;在指标排序中显示字符串栏目.
用法:
DRAWTEXT_FIX(COND,X,Y,TYPE,TEXT),当COND条件满足时,在当前指标窗口内(X,Y)位置书写文字TEXT,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
DRAWTEXT_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,'大阳线')表示最后一个交易日实体阳线大于8%时在窗口中间位置显示'大阳线'字样.
DRAWNUMBER 画数字
画出数字 .
用法: DRAWNUMBER(COND,PRICE,NUMBER) 当 COND 条件满足时 , 在 PRICE 位置书写数字 NUMBER . 
例如: DRAWNUMBER(CLOSE/OPEN>1.08,LOW,C) 表示当日实体阳线大于 8% 时在最低价位置显示收盘价. 
DRAWNUMBER_FIX 画定点数字
固定位置显示数字.
用法:
DRAWNUMBER_FIX(COND,X,Y,TYPE,NUMBER),当COND条件满足时,在当前指标窗口内(X,Y)位置书写数字NUMBER,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
DRAWNUMBER_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,C)表示最后一个交易日实体阳线大于8%时在窗口中间位置显示收盘价.
RGB 自定色
将自定颜色作为数值输出.
用法:
RGB(Red,Green,Blue),输出为0XBBGGRR,参数使用十进制数,范围为0至255,以最近一个周期数值为准.
例如:
RGB(0,0,255)输出结果为16进制的0XFF0000.
DRAWBAND 画带状线
画出带状线.
用法:
DRAWBAND(VAL1,COLOR1,VAL2,COLOR2),当VAL1>VAL2时,在VAL1和VAL2之间填充COLOR1;当VAL1<VAL2时,填充COLOR2,这里的颜色均使用RGB函数计算得到.
例如:
DRAWBAND(OPEN,RGB(0,224,224),CLOSE,RGB(255,96,96));
DRAWBMP 画图片
画出图片.
用法:
DRAWBMP(COND,PRICE,'Bmp文件名'),当条件COND满足时,在PRICE位置画T0002目录下面的signals目录下面的"Bmp文件名";
例如:
DRAWBMP(O>C,CLOSE,'高开');
DRAWGBK 填充背景
用法:
DRAWGBK(COND,COLOR1,COLOR2,是否横向渐进,'BMP或PNG文件名',是否拉升BMP或PNG文件名),当条件COND满足时填充背景,如果COLOR1和COLOR2有一个不为0,则以COLOR1到COLOR2的渐变色为背景,否则画T0002目录下面的signals目录下面的'Bmp或Png文件名'(优先使用BMP文件).
例如:
DRAWGBK(O>C,RGB(0,255,0),RGB(255,0,0),0,'背景图',0);
DRAWRECTREL 相对位置上画矩形
相对位置上画矩形.
用法:
DRAWRECTREL(LEFT,TOP,RIGHT,BOTTOM,COLOR),以图形窗口(LEFT,TOP)为左上角,(RIGHT,BOTTOM)为右下角绘制矩形,坐标单位是窗口沿水平和垂直方向的1/1000,取值范围是0—999,超出范围则可能显示在图形窗口外,矩形中间填充颜色COLOR,COLOR为0表示不填充.
例如:
DRAWRECTREL(0,0,500,500,RGB(255,255,0))表示在图形最左上部1/4位置用黄色绘制矩形.

## 关联财务函数

SETCODE 市场类型
市场类型
0:深圳 1:上海,47:中金所期货 28:郑州商品 29:大连商品 30:上海商品,27:香港指数 31:香港主板,48:香港创业板...
MINDIFF 最小变动价位
返回某品种的最小变动价位(也是交易价格的最小间隔单位)
MULTIPLIER 期货每手乘数
返回期货每手乘数
TQFLAG当前的复权状态
TQFLAG 当前的复权状态,0:无复权 1:前复权 2:后复权
USEDDATANUM 当前使用的数据个数
返回当前使用的数据个数
TOTALCAPITAL 当前总股本(手)
返回当前总股本(手)
CAPITAL 当前流通股本(手)
当前流通股本(手)
FINANCE(1)总股本(股)
总股本(随时间可能有变化)
INANCE(2) 市场类型
用法同SETCODE
FINANCE(3) 深沪品种类型
0:指数,1:A股主板,3:创业板,4:科创板,5:B股,6:债券,7:基金,8:权证,9:其它,10:非沪深品种
FINANCE(4) 沪深行业代码
沪深品种通达信二级行业代码
FINANCE(5) B 股
FINANCE(6) H 股
FINANCE(7) 流通股本(股)
流通股本(随时间可能有变化)
FINANCE(8) 股东人数(户)(上市公司的最新数据)
FINANCE(9) 资产负债率%
即:(总资产-净资产-少数股东权益)/总资产*100,上市公司最近一期财报数据
FINANCE(10) 总资产 ,上市公司最近一期财报数据
FINANCE(11) 流动资产 ,上市公司最近一期财报数据
FINANCE(12) 固定资产 ,上市公司最近一期财报数据
FINANCE(13) 无形资产,上市公司最近一期财报数据
FINANCE(15) 流动负债 ,上市公司最近一期财报数据
FINANCE(16) 少数股东权益 ,上市公司最近一期财报数据
FINANCE(17) 资本公积金 ,上市公司最近一期财报数据
FINANCE(18) 每股公积金 ,上市公司最近一期财报数据
FINANCE(19) 股东权益 ( 净资产 ) ,上市公司最近一期财报数据
FINANCE(20) 营业收入 ,上市公司最近一期财报数据
FINANCE(21) 营业成本 ,上市公司最近一期财报数据
FINANCE(22) 应收帐款 ,上市公司最近一期财报数据
FINANCE(23) 营业利润 ,上市公司最近一期财报数据
FINANCE(24) 投资收益 ,上市公司最近一期财报数据
FINANCE(25) 经营现金流量 ,上市公司最近一期财报数据
FINANCE(26) 总现金流量 ,上市公司最近一期财报数据
FINANCE(27) 存货 ,上市公司最近一期财报数据
FINANCE(28) 利润总额 ,上市公司最近一期财报数据
FINANCE(30) 净利润 ,上市公司最近一期财报数据
FINANCE(31) 未分配利润 ,上市公司最近一期财报数据
FINANCE(32) 每股未分配利润 ,上市公司最近一期财报数据
FINANCE(33) 每股收益 ( 全年折算 )
每股收益(折算为全年收益),对于沪深品种有效
FINANCE(34) 每股净资产 ,上市公司最近一期财报数据
FINANCE(35) 季报中调整后的每股净资产 ,上市公司最近一期财报数据
FINANCE(36) 股东权益比 ,上市公司最近一期财报数据
FINANCE(37) 第几季报
第几期季度报告,1为一季报,2为中报,3为三季报,4为年报,对于沪深品种有效
FINANCE(38) 每股收益,上市公司最近一期财报数据
FINANCE(40) 流通市值
FINANCE(41) AB股总市值 (不包括在香港等地上市的股份市值)
FINANCE(42) 上市的天数
FINANCE(43) 利润同比%
净利润同比增长率,上市公司最近一期财报数据
FINANCE(44) 收入同比%
收入同比增长率,上市公司最近一期财报数据
FINANCE(45) 股息率%
FINANCE(46) 自由流通股本(股) 流通股本中减去占5%以上股份的部分
FINANCE(48) 是否为陆通股标的
FINANCE(49) 今日权息标识
今日权息标识 0:无 1:分红 2:送转股 3:分红+送转股 4:配股
FINANCE(50) 是否属于沪深300
FINANCE(51) 是否含可转债
FINANCE(52) 是否为融资融券标的
FINANCE(53) 每股股息(港股,美股)
FINANCE(54) 扣非净利润,上市公司最近一期财报数据
FINANCE(55) 研发费用,上市公司最近一期财报数据
FINANCE(56) 员工人数,上市公司最近一期财报数据
FINANCE(57) 货币资金,上市公司最近一期财报数据
FINANCE(58) 预收账款,上市公司最近一期财报数据
FINANCE(60) 行权比例(权证,期权)
FINANCE(61) 行权价(权证,期权)
FINANCE(62) 杠杆比率(权证,期权)
杠杆比率(权证,期权),实际杠杆比率为FINANCE(62)*FINANCE(68)
FINANCE(63) 内在价值(权证,期权)
FINANCE(64) 溢价率(权证,期权)
FINANCE(65) 时间价值(权证,期权)
FINANCE(66) 剩余天数(期货,期权)
FINANCE(67) 合约乘数(期权)
FINANCE(68) Delta对冲值(权证,期权)
FINANCE(69) 认购认沽类型(股票期权),0表示是认购,1表示是认沽

## 专业财务函数

FINVALUE 专业财务数据(序列)
引用专业财务数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
FINVALUE(ID),ID为数据编号
数据编号如下:
0--返回报告期(YYMMDD格式),150930表示为2015年第三季
说明:
1.所有指标没有标注单位的都是个位,如资金项单位都是元,股本单位都是股. 
2.所有的空值数据显示为0,以方便客户加减运算,非金融类指标在指标名称后有标注. 
-------------每股指标-----------------------------
1--基本每股收益
2--扣除非经常性损益每股收益
3--每股未分配利润
4--每股净资产
5--每股资本公积金
6--净资产收益率
7--每股经营现金流量
-------------资产负债表----------------------------
8.--货币资金
9.--交易性金融资产
10.--应收票据
11.--应收账款
12.--预付款项
13.--其他应收款
14.--应收关联公司款
15.--应收利息
16.--应收股利
17.--存货
18.--其中:消耗性生物资产
19.--一年内到期的非流动资产
20.--其他流动资产
21.--流动资产合计
22.--可供出售金融资产
23.--持有至到期投资
24.--长期应收款
25.--长期股权投资
26.--投资性房地产
27.--固定资产
28.--在建工程
29.--工程物资
30.--固定资产清理
31.--生产性生物资产
32.--油气资产
33.--无形资产
34.--开发支出
35.--商誉
36.--长期待摊费用
37.--递延所得税资产
38.--其他非流动资产
39.--非流动资产合计
40.--资产总计
41.--短期借款
42.--交易性金融负债
43.--应付票据
44.--应付账款
45.--预收款项
46.--应付职工薪酬
47.--应交税费
48.--应付利息
49.--应付股利
50.--其他应付款
51.--应付关联公司款
52.--一年内到期的非流动负债
53.--其他流动负债
54.--流动负债合计
55.--长期借款
56.--应付债券
57.--长期应付款
58.--专项应付款
59.--预计负债
60.--递延所得税负债
61.--其他非流动负债
62.--非流动负债合计
63.--负债合计
64.--实收资本(或股本)
65.--资本公积
66.--盈余公积
67.--减:库存股
68.--未分配利润
69.--少数股东权益
70.--外币报表折算价差
71.--非正常经营项目收益调整
72.--所有者权益(或股东权益)合计
73.--负债和所有者(或股东权益)合计
-------------利润表-----------------------------
74.--其中:营业收入
75.--其中:营业成本
76.--营业税金及附加
77.--销售费用
78.--管理费用
79.--勘探费用
80.--财务费用
81.--资产减值损失
82.--加:公允价值变动净收益
83.--投资收益
84.--其中:对联营企业和合营企业的投资收益
85.--影响营业利润的其他科目
86.--三, 营业利润
87.--加:补贴收入
88.--营业外收入
89.--减:营业外支出
90.--其中:非流动资产处置净损失
91.--加:影响利润总额的其他科目
92.--四, 利润总额
93.--减:所得税
94.--加:影响净利润的其他科目
95.--五, 净利润
96.--归属于母公司所有者的净利润
97.--少数股东损益
------------------现金流量表---------------------
98.--销售商品, 提供劳务收到的现金
99.--收到的税费返还
100.--收到其他与经营活动有关的现金
101.--经营活动现金流入小计
102.--购买商品, 接受劳务支付的现金
103.--支付给职工以及为职工支付的现金
104.--支付的各项税费
105.--支付其他与经营活动有关的现金
106.--经营活动现金流出小计
107.--经营活动产生的现金流量净额
108.--收回投资收到的现金
109.--取得投资收益收到的现金
110.--处置固定资产, 无形资产和其他长期资产收回的现金净额
111.--处置子公司及其他营业单位收到的现金净额
112.--收到其他与投资活动有关的现金
113.--投资活动现金流入小计
114.--购建固定资产, 无形资产和其他长期资产支付的现金
115.--投资支付的现金
116.--取得子公司及其他营业单位支付的现金净额
117.--支付其他与投资活动有关的现金
118.--投资活动现金流出小计
119.--投资活动产生的现金流量净额
120.--吸收投资收到的现金
121.--取得借款收到的现金
122.--收到其他与筹资活动有关的现金
123.--筹资活动现金流入小计
124.--偿还债务支付的现金
125.--分配股利, 利润或偿付利息支付的现金
126.--支付其他与筹资活动有关的现金
127.--筹资活动现金流出小计
128.--筹资活动产生的现金流量净额
129.--四, 汇率变动对现金的影响
130.--四(2), 其他原因对现金的影响
131.--五, 现金及现金等价物净增加额
132.--期初现金及现金等价物余额
133.--期末现金及现金等价物余额
134.--净利润
135.--加:资产减值准备
136.--固定资产折旧, 油气资产折耗, 生产性生物资产折旧
137.--无形资产摊销
138.--长期待摊费用摊销
139.--处置固定资产, 无形资产和其他长期资产的损失
140.--固定资产报废损失
141.--公允价值变动损失
142.--财务费用
143.--投资损失
144.--递延所得税资产减少
145.--递延所得税负债增加
146.--存货的减少
147.--经营性应收项目的减少
148.--经营性应付项目的增加
149.--其他
150.--经营活动产生的现金流量净额2
151.--债务转为资本
152.--一年内到期的可转换公司债券
153.--融资租入固定资产
154.--现金的期末余额
155.--减:现金的期初余额
156.--加:现金等价物的期末余额
157.--减:现金等价物的期初余额
158.--现金及现金等价物净增加额
---------------------偿债能力分析------------------------
159.--流动比率(非金融类指标)
160.--速动比率(非金融类指标)
161.--现金比率(%)(非金融类指标)
162.--利息保障倍数(非金融类指标)
163.--非流动负债比率(%)(非金融类指标)
164.--流动负债比率(%)(非金融类指标)
165.--现金到期债务比率(%)(非金融类指标)
166.--有形资产净值债务率(%)
167.--权益乘数(%)
168.--股东的权益/负债合计(%)
169.--有形资产/负债合计(%)
170.--经营活动产生的现金流量净额/负债合计(%)(非金融类指标)
171.--EBITDA/负债合计(%)(非金融类指标)
---------------------经营效率分析------------------------
172.--应收帐款周转率(非金融类指标)
173.--存货周转率(非金融类指标)
174.--运营资金周转率(非金融类指标)
175.--总资产周转率(非金融类指标)
176.--固定资产周转率(非金融类指标)
177.--应收帐款周转天数(非金融类指标)
178.--存货周转天数(非金融类指标)
179.--流动资产周转率(非金融类指标)
180.--流动资产周转天数(非金融类指标)
181.--总资产周转天数(非金融类指标)
182.--股东权益周转率(非金融类指标)
---------------------发展能力分析------------------------
183.--营业收入增长率(%)
184.--净利润增长率(%)
185.--净资产增长率(%)
186.--固定资产增长率(%)
187.--总资产增长率(%)
188.--投资收益增长率(%)
189.--营业利润增长率(%)
190.--扣非每股收益同比(%)
191.--扣非净利润同比(%)
192.--暂无
---------------------获利能力分析------------------------
193.--成本费用利润率(%)
194.--营业利润率(非金融类指标)
195.--营业税金率(非金融类指标)
196.--营业成本率(非金融类指标)
197.--净资产收益率
198.--投资收益率
199.--销售净利率(%)
200.--总资产净利率
201.--净利润率(非金融类指标)
202.--销售毛利率(%)(非金融类指标)
203.--三费比重(非金融类指标)
204.--管理费用率(非金融类指标)
205.--财务费用率(非金融类指标)
206.--扣除非经常性损益后的净利润
207.--息税前利润(EBIT)
208.--息税折旧摊销前利润(EBITDA)
209.--EBITDA/营业总收入(%)(非金融类指标)
---------------------资本结构分析---------------------
210.--资产负债率(%)
211.--流动资产比率(非金融类指标)
212.--货币资金比率(非金融类指标)
213.--存货比率(非金融类指标)
214.--固定资产比率
215.--负债结构比(非金融类指标)
216.--归属于母公司股东权益/全部投入资本(%)
217.--股东的权益/带息债务(%)
218.--有形资产/净债务(%)
---------------------现金流量分析---------------------
219.--每股经营性现金流(元)
220.--营业收入现金含量(%)(非金融类指标)
221.--经营活动产生的现金流量净额/经营活动净收益(%)
222.--销售商品提供劳务收到的现金/营业收入(%)
223.--经营活动产生的现金流量净额/营业收入
224.--资本支出/折旧和摊销
225.--每股现金流量净额(元)
226.--经营净现金比率(短期债务)(非金融类指标)
227.--经营净现金比率(全部债务)
228.--经营活动现金净流量与净利润比率
229.--全部资产现金回收率
---------------------单季度财务指标---------------------
230.--营业收入
231.--营业利润
232.--归属于母公司所有者的净利润
233.--扣除非经常性损益后的净利润
234.--经营活动产生的现金流量净额
235.--投资活动产生的现金流量净额
236.--筹资活动产生的现金流量净额
237.--现金及现金等价物净增加额
---------------------股本股东---------------------
238.--总股本
239.--已上市流通A股
240.--已上市流通B股
241.--已上市流通H股
242.--股东人数(户)
243.--第一大股东的持股数量
244.--十大流通股东持股数量合计(股)
245.--十大股东持股数量合计(股)
---------------------机构持股---------------------
246.--机构总量(家)
247.--机构持股总量(股)
248.--QFII机构数
249.--QFII持股量
250.--券商机构数
251.--券商持股量
252.--保险机构数
253.--保险持股量
254.--基金机构数
255.--基金持股量
256.--社保机构数
257.--社保持股量
258.--私募机构数
259.--私募持股量
260.--财务公司机构数
261.--财务公司持股量
262.--年金机构数
263.--年金持股量
---------------------新增指标---------------------
264.--十大流通股东中持有A股合计(股) [注:季度报告中, 若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通B股), 指标264取的是包含同时持有非流通A股性质的流通股数]
265.--第一大流通股东持股量(股)
266.--自由流通股(股)[注:1.自由流通股=已流通A股-十大流通股东5%以上的A股;2.季度报告中, 若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通H股), 5%以上的持股取的是不包含同时持有非流通A股性质的流通股数, 结果可能偏大; 3.指标按报告期展示, 新股在上市日的下个报告期才有数据]
267.--受限流通A股(股)
268.--一般风险准备(金融类)
269.--其他综合收益(利润表)
270.--综合收益总额(利润表)
271.--归属于母公司股东权益(资产负债表)
272.--银行机构数(家)(机构持股)
273.--银行持股量(股)(机构持股)
274.--一般法人机构数(家)(机构持股)
275.--一般法人持股量(股)(机构持股)
276.--近一年净利润(元)
277.--信托机构数(家)(机构持股)
278.--信托持股量(股)(机构持股)
279.--特殊法人机构数(家)(机构持股)
280.--特殊法人持股量(股)(机构持股)
281.--加权净资产收益率(每股指标)
282.--扣非每股收益(单季度财务指标)
283.--最近一年营业收入(万元)
284.--国家队持股数量(万股)[注:本指标统计包含汇金公司, 证金公司, 外汇管理局旗下投资平台, 国家队基金, 国开, 养老金以及中科汇通等国家队机构持股数量]
285.--业绩预告-本期净利润同比增幅下限%[注:指标285至294展示未来一个报告期的数据. 例, 3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报]
286.--业绩预告-本期净利润同比增幅上限%
287.--业绩快报-归母净利润
288.--业绩快报-扣非净利润
289.--业绩快报-总资产
290.--业绩快报-净资产
291.--业绩快报-每股收益
292.--业绩快报-摊薄净资产收益率
293.--业绩快报-加权净资产收益率
294.--业绩快报-每股净资产
295.--应付票据及应付账款(资产负债表)
296.--应收票据及应收账款(资产负债表)
297.--递延收益(资产负债表-非流动负债)
298.--其他综合收益(资产负债表)
299.--其他权益工具(资产负债表)
300.--其他收益(利润表)
301.--资产处置收益(利润表)
302.--持续经营净利润(利润表)
303.--终止经营净利润(利润表)
304.--研发费用(利润表)
305.--其中:利息费用(利润表-财务费用)
306.--其中:利息收入(利润表-财务费用)
307.--近一年经营活动现金流净额
308.--近一年归母净利润(万元)
309.--近一年扣非净利润(万元)
310.--近一年现金净流量(万元)
311.--基本每股收益(单季度)
312.--营业总收入(单季度)(万元)
313.--业绩预告公告日期 [注:本指标展示未来一个报告期的数据. 例,3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报的数据;公告日期格式为YYMMDD, 例:190101代表2019年1月1日]
314.--财报公告日期 [注:日期格式为YYMMDD,例:190101代表2019年1月1日]
315.--业绩快报公告日期 [注:本指标展示未来一个报告期的数据. 例,3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报的数据;公告日期格式为YYMMDD, 例:190101代表2019年1月1日]
316.--近一年投资活动现金流净额(万元)
317.--业绩预告-本期净利润下限(万元)[注:指标317至318展示未来一个报告期的数据. 例, 3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报]
318.--业绩预告-本期净利润上限(万元)
319.--营业总收入TTM(万元)
320.--员工总数(人)
321.--每股企业自由现金流
322.--每股股东自由现金流
---------------------资产负债表新增指标---------------------
401.--专项储备(万元)
402.--结算备付金(万元)
403.--拆出资金(万元)
404.--发放贷款及垫款(万元)(流动资产科目)
405.--衍生金融资产(万元)
406.--应收保费(万元)
407.--应收分保账款(万元)
408.--应收分保合同准备金(万元)
409.--买入返售金融资产(万元)
410.--划分为持有待售的资产(万元)
411.--发放贷款及垫款(万元)(非流动资产科目)
412.--向中央银行借款(万元)
413.--吸收存款及同业存放(万元)
414.--拆入资金(万元)
415.--衍生金融负债(万元)
416.--卖出回购金融资产款(万元)
417.--应付手续费及佣金(万元)
418.--应付分保账款(万元)
419.--保险合同准备金(万元)
420.--代理买卖证券款(万元)
421.--代理承销证券款(万元)
422.--划分为持有待售的负债(万元)
423.--预计负债(万元)
424.--递延收益(万元)(流动负债科目, 公告此科目的股票较少, 大部分公司没有此数据)
425.--其中:优先股(万元)(非流动负债科目)
426.--永续债(万元)(非流动负债科目)
427.--长期应付职工薪酬(万元)
428.--其中:优先股(万元)(所有者权益科目)
429.--永续债(万元)(所有者权益科目)
430.--债权投资(万元)
431.--其他债权投资(万元)
432.--其他权益工具投资(万元)
433.--其他非流动金融资产(万元)
434.--合同负债(万元)
435.--合同资产(万元)
436.--其他资产(万元)
437.--应收款项融资(万元)
438.--使用权资产(万元)
439.--租赁负债(万元)
---------------------利润表新增指标---------------------
501.--稀释每股收益(元)
502.--营业总收入(万元)
503.--汇兑收益(万元)
504.--其中:归属于母公司综合收益(万元)
505.--其中:归属于少数股东综合收益(万元)
506.--利息收入(万元)
507.--已赚保费(万元)
508.--手续费及佣金收入(万元)
509.--利息支出(万元)
510.--手续费及佣金支出(万元)
511.--退保金(万元)
512.--赔付支出净额(万元)
513.--提取保险合同准备金净额(万元)
514.--保单红利支出(万元)
515.--分保费用(万元)
516.--其中:非流动资产处置利得(万元)
517.--信用减值损失(万元)
518.--净敞口套期收益(万元)
519.--营业总成本(万元)
520.--信用减值损失(万元, 2019格式)
521.--资产减值损失(万元, 2019格式)
---------------------现金流量表新增指标---------------------
561.--加:其他原因对现金的影响2(万元)(现金的期末余额科目)
562.--客户存款和同业存放款项净增加额(万元)
563.--向中央银行借款净增加额(万元)
564.--向其他金融机构拆入资金净增加额(万元)
565.--收到原保险合同保费取得的现金(万元)
566.--收到再保险业务现金净额(万元)
567.--保户储金及投资款净增加额(万元)
568.--处置以公允价值计量且其变动计入当期损益的金融资产净增加额(万元)
569.--收取利息, 手续费及佣金的现金(万元)
570.--拆入资金净增加额(万元)
571.--回购业务资金净增加额(万元)
572.--客户贷款及垫款净增加额(万元)
573.--存放中央银行和同业款项净增加额(万元)
574.--支付原保险合同赔付款项的现金(万元)
575.--支付利息, 手续费及佣金的现金(万元)
576.--支付保单红利的现金(万元)
577.--其中:子公司吸收少数股东投资收到的现金(万元)
578.--其中:子公司支付给少数股东的股利, 利润(万元)
579.--投资性房地产的折旧及摊销(万元)
580.--信用减值损失(万元)
FINONE 专业财务数据(指定日期)
引用指定年和月日的某类型的财务数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
FINONE(ID,Y,MMDD),ID为数据编号,Y和MMDD表示年和月日.
如果Y和MMDD都为0,表示最新的财报;
如果Y为0,MMDD为小于300的数字,表示最近一期向前推MMDD期的数据,如果是331,630,930,1231这些,表示最近一期的对应季报的数据;
如果MMDD为0,Y为一数字,表示最近一期向前推Y年的同期数据;
季报分界点为:0331,0630,0930,1231
数据编号如下:
0--返回报告期(YYMMDD格式),150930表示为2015年第三季
说明:
1.所有指标没有标注单位的都是个位,如资金项单位都是元,股本单位都是股. 
2.所有的空值数据显示为0,以方便客户加减运算,非金融类指标在指标名称后有标注. 
-------------每股指标-----------------------------
1--基本每股收益
2--扣除非经常性损益每股收益
3--每股未分配利润
4--每股净资产
5--每股资本公积金
6--净资产收益率
7--每股经营现金流量
-------------资产负债表----------------------------
8.--货币资金
9.--交易性金融资产
10.--应收票据
11.--应收账款
12.--预付款项
13.--其他应收款
14.--应收关联公司款
15.--应收利息
16.--应收股利
17.--存货
18.--其中:消耗性生物资产
19.--一年内到期的非流动资产
20.--其他流动资产
21.--流动资产合计
22.--可供出售金融资产
23.--持有至到期投资
24.--长期应收款
25.--长期股权投资
26.--投资性房地产
27.--固定资产
28.--在建工程
29.--工程物资
30.--固定资产清理
31.--生产性生物资产
32.--油气资产
33.--无形资产
34.--开发支出
35.--商誉
36.--长期待摊费用
37.--递延所得税资产
38.--其他非流动资产
39.--非流动资产合计
40.--资产总计
41.--短期借款
42.--交易性金融负债
43.--应付票据
44.--应付账款
45.--预收款项
46.--应付职工薪酬
47.--应交税费
48.--应付利息
49.--应付股利
50.--其他应付款
51.--应付关联公司款
52.--一年内到期的非流动负债
53.--其他流动负债
54.--流动负债合计
55.--长期借款
56.--应付债券
57.--长期应付款
58.--专项应付款
59.--预计负债
60.--递延所得税负债
61.--其他非流动负债
62.--非流动负债合计
63.--负债合计
64.--实收资本(或股本)
65.--资本公积
66.--盈余公积
67.--减:库存股
68.--未分配利润
69.--少数股东权益
70.--外币报表折算价差
71.--非正常经营项目收益调整
72.--所有者权益(或股东权益)合计
73.--负债和所有者(或股东权益)合计
-------------利润表-----------------------------
74.--其中:营业收入
75.--其中:营业成本
76.--营业税金及附加
77.--销售费用
78.--管理费用
79.--勘探费用
80.--财务费用
81.--资产减值损失
82.--加:公允价值变动净收益
83.--投资收益
84.--其中:对联营企业和合营企业的投资收益
85.--影响营业利润的其他科目
86.--三, 营业利润
87.--加:补贴收入
88.--营业外收入
89.--减:营业外支出
90.--其中:非流动资产处置净损失
91.--加:影响利润总额的其他科目
92.--四, 利润总额
93.--减:所得税
94.--加:影响净利润的其他科目
95.--五, 净利润
96.--归属于母公司所有者的净利润
97.--少数股东损益
------------------现金流量表---------------------
98.--销售商品, 提供劳务收到的现金
99.--收到的税费返还
100.--收到其他与经营活动有关的现金
101.--经营活动现金流入小计
102.--购买商品, 接受劳务支付的现金
103.--支付给职工以及为职工支付的现金
104.--支付的各项税费
105.--支付其他与经营活动有关的现金
106.--经营活动现金流出小计
107.--经营活动产生的现金流量净额
108.--收回投资收到的现金
109.--取得投资收益收到的现金
110.--处置固定资产, 无形资产和其他长期资产收回的现金净额
111.--处置子公司及其他营业单位收到的现金净额
112.--收到其他与投资活动有关的现金
113.--投资活动现金流入小计
114.--购建固定资产, 无形资产和其他长期资产支付的现金
115.--投资支付的现金
116.--取得子公司及其他营业单位支付的现金净额
117.--支付其他与投资活动有关的现金
118.--投资活动现金流出小计
119.--投资活动产生的现金流量净额
120.--吸收投资收到的现金
121.--取得借款收到的现金
122.--收到其他与筹资活动有关的现金
123.--筹资活动现金流入小计
124.--偿还债务支付的现金
125.--分配股利, 利润或偿付利息支付的现金
126.--支付其他与筹资活动有关的现金
127.--筹资活动现金流出小计
128.--筹资活动产生的现金流量净额
129.--四, 汇率变动对现金的影响
130.--四(2), 其他原因对现金的影响
131.--五, 现金及现金等价物净增加额
132.--期初现金及现金等价物余额
133.--期末现金及现金等价物余额
134.--净利润
135.--加:资产减值准备
136.--固定资产折旧, 油气资产折耗, 生产性生物资产折旧
137.--无形资产摊销
138.--长期待摊费用摊销
139.--处置固定资产, 无形资产和其他长期资产的损失
140.--固定资产报废损失
141.--公允价值变动损失
142.--财务费用
143.--投资损失
144.--递延所得税资产减少
145.--递延所得税负债增加
146.--存货的减少
147.--经营性应收项目的减少
148.--经营性应付项目的增加
149.--其他
150.--经营活动产生的现金流量净额2
151.--债务转为资本
152.--一年内到期的可转换公司债券
153.--融资租入固定资产
154.--现金的期末余额
155.--减:现金的期初余额
156.--加:现金等价物的期末余额
157.--减:现金等价物的期初余额
158.--现金及现金等价物净增加额
---------------------偿债能力分析------------------------
159.--流动比率(非金融类指标)
160.--速动比率(非金融类指标)
161.--现金比率(%)(非金融类指标)
162.--利息保障倍数(非金融类指标)
163.--非流动负债比率(%)(非金融类指标)
164.--流动负债比率(%)(非金融类指标)
165.--现金到期债务比率(%)(非金融类指标)
166.--有形资产净值债务率(%)
167.--权益乘数(%)
168.--股东的权益/负债合计(%)
169.--有形资产/负债合计(%)
170.--经营活动产生的现金流量净额/负债合计(%)(非金融类指标)
171.--EBITDA/负债合计(%)(非金融类指标)
---------------------经营效率分析------------------------
172.--应收帐款周转率(非金融类指标)
173.--存货周转率(非金融类指标)
174.--运营资金周转率(非金融类指标)
175.--总资产周转率(非金融类指标)
176.--固定资产周转率(非金融类指标)
177.--应收帐款周转天数(非金融类指标)
178.--存货周转天数(非金融类指标)
179.--流动资产周转率(非金融类指标)
180.--流动资产周转天数(非金融类指标)
181.--总资产周转天数(非金融类指标)
182.--股东权益周转率(非金融类指标)
---------------------发展能力分析------------------------
183.--营业收入增长率(%)
184.--净利润增长率(%)
185.--净资产增长率(%)
186.--固定资产增长率(%)
187.--总资产增长率(%)
188.--投资收益增长率(%)
189.--营业利润增长率(%)
190.--扣非每股收益同比(%)
191.--扣非净利润同比(%)
192.--暂无
---------------------获利能力分析------------------------
193.--成本费用利润率(%)
194.--营业利润率(非金融类指标)
195.--营业税金率(非金融类指标)
196.--营业成本率(非金融类指标)
197.--净资产收益率
198.--投资收益率
199.--销售净利率(%)
200.--总资产净利率
201.--净利润率(非金融类指标)
202.--销售毛利率(%)(非金融类指标)
203.--三费比重(非金融类指标)
204.--管理费用率(非金融类指标)
205.--财务费用率(非金融类指标)
206.--扣除非经常性损益后的净利润
207.--息税前利润(EBIT)
208.--息税折旧摊销前利润(EBITDA)
209.--EBITDA/营业总收入(%)(非金融类指标)
---------------------资本结构分析---------------------
210.--资产负债率(%)
211.--流动资产比率(非金融类指标)
212.--货币资金比率(非金融类指标)
213.--存货比率(非金融类指标)
214.--固定资产比率
215.--负债结构比(非金融类指标)
216.--归属于母公司股东权益/全部投入资本(%)
217.--股东的权益/带息债务(%)
218.--有形资产/净债务(%)
---------------------现金流量分析---------------------
219.--每股经营性现金流(元)
220.--营业收入现金含量(%)(非金融类指标)
221.--经营活动产生的现金流量净额/经营活动净收益(%)
222.--销售商品提供劳务收到的现金/营业收入(%)
223.--经营活动产生的现金流量净额/营业收入
224.--资本支出/折旧和摊销
225.--每股现金流量净额(元)
226.--经营净现金比率(短期债务)(非金融类指标)
227.--经营净现金比率(全部债务)
228.--经营活动现金净流量与净利润比率
229.--全部资产现金回收率
---------------------单季度财务指标---------------------
230.--营业收入
231.--营业利润
232.--归属于母公司所有者的净利润
233.--扣除非经常性损益后的净利润
234.--经营活动产生的现金流量净额
235.--投资活动产生的现金流量净额
236.--筹资活动产生的现金流量净额
237.--现金及现金等价物净增加额
---------------------股本股东---------------------
238.--总股本
239.--已上市流通A股
240.--已上市流通B股
241.--已上市流通H股
242.--股东人数(户)
243.--第一大股东的持股数量
244.--十大流通股东持股数量合计(股)
245.--十大股东持股数量合计(股)
---------------------机构持股---------------------
246.--机构总量(家)
247.--机构持股总量(股)
248.--QFII机构数
249.--QFII持股量
250.--券商机构数
251.--券商持股量
252.--保险机构数
253.--保险持股量
254.--基金机构数
255.--基金持股量
256.--社保机构数
257.--社保持股量
258.--私募机构数
259.--私募持股量
260.--财务公司机构数
261.--财务公司持股量
262.--年金机构数
263.--年金持股量
---------------------新增指标---------------------
264.--十大流通股东中持有A股合计(股) [注:季度报告中, 若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通B股), 指标264取的是包含同时持有非流通A股性质的流通股数]
265.--第一大流通股东持股量(股)
266.--自由流通股(股)[注:1.自由流通股=已流通A股-十大流通股东5%以上的A股;2.季度报告中, 若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通H股), 5%以上的持股取的是不包含同时持有非流通A股性质的流通股数, 结果可能偏大; 3.指标按报告期展示, 新股在上市日的下个报告期才有数据]
267.--受限流通A股(股)
268.--一般风险准备(金融类)
269.--其他综合收益(利润表)
270.--综合收益总额(利润表)
271.--归属于母公司股东权益(资产负债表)
272.--银行机构数(家)(机构持股)
273.--银行持股量(股)(机构持股)
274.--一般法人机构数(家)(机构持股)
275.--一般法人持股量(股)(机构持股)
276.--近一年净利润(元)
277.--信托机构数(家)(机构持股)
278.--信托持股量(股)(机构持股)
279.--特殊法人机构数(家)(机构持股)
280.--特殊法人持股量(股)(机构持股)
281.--加权净资产收益率(每股指标)
282.--扣非每股收益(单季度财务指标)
283.--最近一年营业收入(万元)
284.--国家队持股数量(万股)[注:本指标统计包含汇金公司, 证金公司, 外汇管理局旗下投资平台, 国家队基金, 国开, 养老金以及中科汇通等国家队机构持股数量]
285.--业绩预告-本期净利润同比增幅下限%[注:指标285至294展示未来一个报告期的数据. 例, 3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报]
286.--业绩预告-本期净利润同比增幅上限%
287.--业绩快报-归母净利润
288.--业绩快报-扣非净利润
289.--业绩快报-总资产
290.--业绩快报-净资产
291.--业绩快报-每股收益
292.--业绩快报-摊薄净资产收益率
293.--业绩快报-加权净资产收益率
294.--业绩快报-每股净资产
295.--应付票据及应付账款(资产负债表)
296.--应收票据及应收账款(资产负债表)
297.--递延收益(资产负债表-非流动负债)
298.--其他综合收益(资产负债表)
299.--其他权益工具(资产负债表)
300.--其他收益(利润表)
301.--资产处置收益(利润表)
302.--持续经营净利润(利润表)
303.--终止经营净利润(利润表)
304.--研发费用(利润表)
305.--其中:利息费用(利润表-财务费用)
306.--其中:利息收入(利润表-财务费用)
307.--近一年经营活动现金流净额
308.--近一年归母净利润(万元)
309.--近一年扣非净利润(万元)
310.--近一年现金净流量(万元)
311.--基本每股收益(单季度)
312.--营业总收入(单季度)(万元)
313.--业绩预告公告日期 [注:本指标展示未来一个报告期的数据. 例,3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报的数据;公告日期格式为YYMMDD, 例:190101代表2019年1月1日]
314.--财报公告日期 [注:日期格式为YYMMDD,例:190101代表2019年1月1日]
315.--业绩快报公告日期 [注:本指标展示未来一个报告期的数据. 例,3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报的数据;公告日期格式为YYMMDD, 例:190101代表2019年1月1日]
316.--近一年投资活动现金流净额(万元)
317.--业绩预告-本期净利润下限(万元)[注:指标317至318展示未来一个报告期的数据. 例, 3月31日至6月29日这段时间内展示的是中报的数据;如果最新的财务报告后面有多个报告期的业绩预告/快报, 只能展示最新的财务报告后面的一个报告期的业绩预告/快报]
318.--业绩预告-本期净利润上限(万元)
319.--营业总收入TTM(万元)
320.--员工总数(人)
321.--每股企业自由现金流
322.--每股股东自由现金流
---------------------资产负债表新增指标---------------------
401.--专项储备(万元)
402.--结算备付金(万元)
403.--拆出资金(万元)
404.--发放贷款及垫款(万元)(流动资产科目)
405.--衍生金融资产(万元)
406.--应收保费(万元)
407.--应收分保账款(万元)
408.--应收分保合同准备金(万元)
409.--买入返售金融资产(万元)
410.--划分为持有待售的资产(万元)
411.--发放贷款及垫款(万元)(非流动资产科目)
412.--向中央银行借款(万元)
413.--吸收存款及同业存放(万元)
414.--拆入资金(万元)
415.--衍生金融负债(万元)
416.--卖出回购金融资产款(万元)
417.--应付手续费及佣金(万元)
418.--应付分保账款(万元)
419.--保险合同准备金(万元)
420.--代理买卖证券款(万元)
421.--代理承销证券款(万元)
422.--划分为持有待售的负债(万元)
423.--预计负债(万元)
424.--递延收益(万元)(流动负债科目, 公告此科目的股票较少, 大部分公司没有此数据)
425.--其中:优先股(万元)(非流动负债科目)
426.--永续债(万元)(非流动负债科目)
427.--长期应付职工薪酬(万元)
428.--其中:优先股(万元)(所有者权益科目)
429.--永续债(万元)(所有者权益科目)
430.--债权投资(万元)
431.--其他债权投资(万元)
432.--其他权益工具投资(万元)
433.--其他非流动金融资产(万元)
434.--合同负债(万元)
435.--合同资产(万元)
436.--其他资产(万元)
437.--应收款项融资(万元)
438.--使用权资产(万元)
439.--租赁负债(万元)
---------------------利润表新增指标---------------------
501.--稀释每股收益(元)
502.--营业总收入(万元)
503.--汇兑收益(万元)
504.--其中:归属于母公司综合收益(万元)
505.--其中:归属于少数股东综合收益(万元)
506.--利息收入(万元)
507.--已赚保费(万元)
508.--手续费及佣金收入(万元)
509.--利息支出(万元)
510.--手续费及佣金支出(万元)
511.--退保金(万元)
512.--赔付支出净额(万元)
513.--提取保险合同准备金净额(万元)
514.--保单红利支出(万元)
515.--分保费用(万元)
516.--其中:非流动资产处置利得(万元)
517.--信用减值损失(万元)
518.--净敞口套期收益(万元)
519.--营业总成本(万元)
520.--信用减值损失(万元, 2019格式)
521.--资产减值损失(万元, 2019格式)
---------------------现金流量表新增指标---------------------
561.--加:其他原因对现金的影响2(万元)(现金的期末余额科目)
562.--客户存款和同业存放款项净增加额(万元)
563.--向中央银行借款净增加额(万元)
564.--向其他金融机构拆入资金净增加额(万元)
565.--收到原保险合同保费取得的现金(万元)
566.--收到再保险业务现金净额(万元)
567.--保户储金及投资款净增加额(万元)
568.--处置以公允价值计量且其变动计入当期损益的金融资产净增加额(万元)
569.--收取利息, 手续费及佣金的现金(万元)
570.--拆入资金净增加额(万元)
571.--回购业务资金净增加额(万元)
572.--客户贷款及垫款净增加额(万元)
573.--存放中央银行和同业款项净增加额(万元)
574.--支付原保险合同赔付款项的现金(万元)
575.--支付利息, 手续费及佣金的现金(万元)
576.--支付保单红利的现金(万元)
577.--其中:子公司吸收少数股东投资收到的现金(万元)
578.--其中:子公司支付给少数股东的股利, 利润(万元)
579.--投资性房地产的折旧及摊销(万元)
580.--信用减值损失(万元)
GPJYVALUE 股票交易类数据(序列)
引用股票交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
GPJYVALUE(ID,N,TYPE),ID为数据编号,N表示第几个数据,TYPE:为1表示做平滑处理,没有数据的周期返回上一周期的值;为0表示不做平滑处理;2表示没有数据则为0.
股票交易类数据函数, 数据编号如下:
1--股东人数 股东户数(户)
2--龙虎榜 买入总计(万元) 卖出总计(万元)[注:该指标展示最近一年的数据]
3--融资融券1 融资余额(万元) 融券余量(股)
4--大宗交易 成交均价(元) 成交额(万元)
5--增减持 成交均价(元) 变动股数(股)
6--陆股通持股量 持股数量(股)
7--陆股通市场成交净额 陆股通市场净买入(万元)[注:官方只公布了每日的前十名数据]
8--龙虎榜机构(卖方)数据 卖方机构个数 机构卖出金额(万元)
9--龙虎榜机构(买方)数据 买方机构个数 机构买入金额(万元)
10--近3月机构调研情况 近3月机构调研次数 近3月调研机构数量
11--融资融券2 融资买入额(万元) 融资偿还额(万元)
12--融资融券3 融券卖出量(股) 融券偿还量(股)
13--融资融券4 融资净买入(万元) 融券净卖出(股)
14--暂无,原 发行价 指标移至 股票的单个数据(非序列)
15--涨跌停 涨跌停状态 封单金额(万元)[注:涨停取2,曾涨停取1,跌停取-2,曾跌停取-1;跌停和曾跌停时,封单金额取负值]
16--总市值 总市值(万元)
17--龙虎榜营业部数据 买入金额(万元) 卖出金额(万元)
18--龙虎榜沪深股通数据 买入金额(万元) 卖出金额(万元)
GPJYONE 股票交易类数据(指定日期)
引用某天某种类型的股票交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
GPJYONE(ID,N,Y,MMDD),ID为数据编号,N表示第几个数据,Y和MMDD表示年和月日.
如果Y为0,MMDD为0,表示最新数据,MMDD为1,2,3...,表示倒数第2,3,4...个数据
股票交易类数据函数, 数据编号如下:
1--股东人数 股东户数(户)
2--龙虎榜 买入总计(万元) 卖出总计(万元)[注:该指标展示最近一年的数据]
3--融资融券1 融资余额(万元) 融券余量(股)
4--大宗交易 成交均价(元) 成交额(万元)
5--增减持 成交均价(元) 变动股数(股)
6--陆股通持股量 持股数量(股)
7--陆股通市场成交净额 陆股通市场净买入(万元)[注:官方只公布了每日的前十名数据]
8--龙虎榜机构(卖方)数据 卖方机构个数 机构卖出金额(万元)
9--龙虎榜机构(买方)数据 买方机构个数 机构买入金额(万元)
10--近3月机构调研情况 近3月机构调研次数 近3月调研机构数量
11--融资融券2 融资买入额(万元) 融资偿还额(万元)
12--融资融券3 融券卖出量(股) 融券偿还量(股)
13--融资融券4 融资净买入(万元) 融券净卖出(股)
14--暂无,原 发行价 指标移至 股票的单个数据(非序列)
15--涨跌停 涨跌停状态 封单金额(万元)[注:涨停取2,曾涨停取1,跌停取-2,曾跌停取-1;跌停和曾跌停时,封单金额取负值]
16--总市值 总市值(万元)
17--龙虎榜营业部数据 买入金额(万元) 卖出金额(万元)
18--龙虎榜沪深股通数据 买入金额(万元) 卖出金额(万元)
BKJYVALUE 板块交易类数据(序列)
引用板块交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
BKJYVALUE(ID,N,TYPE),ID为数据编号,N表示第几个数据,TYPE:为1表示做平滑处理,没有数据的周期返回上一周期的值;为0表示不做平滑处理;2表示没有数据则为0.
板块交易类数据函数, 数据编号如下:
几个主要板块指数和通达信二级行业板块指数指标
5--市盈率TTM 整体法 算术平均
6--市净率MRQ 整体法 算术平均
7--市销率TTM 整体法 算术平均
8--市现率TTM 整体法 算术平均
BKJYONE 板块交易类数据(指定日期)
引用某天某种类型的板块交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
BKJYONE(ID,N,Y,MMDD),ID为数据编号,N表示第几个数据,Y和MMDD表示年和月日.
如果Y为0,MMDD为0,表示最新数据,MMDD为1,2,3...,表示倒数第2,3,4...个数据
板块交易类数据函数, 数据编号如下:
几个主要板块指数和通达信二级行业板块指数指标
5--市盈率TTM 整体法 算术平均
6--市净率MRQ 整体法 算术平均
7--市销率TTM 整体法 算术平均
8--市现率TTM 整体法 算术平均
SCJYVALUE 市场交易类数据(序列)
引用市场总的交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
SCJYVALUE(ID,N,TYPE),ID为数据编号,N表示第几个数据,TYPE:为1表示做平滑处理,没有数据的周期返回上一周期的值;为0表示不做平滑处理;2表示没有数据则为0.
市场交易类数据函数, 数据编号如下:
1--融资融券 沪深融资余额(万元) 沪深融券余额(万元)
2--陆股通资金流入 沪股通流入金额(亿元) 深股通流入金额(亿元)
3--沪深涨停股个数 涨停股个数 曾涨停股个数 [注:该指标展示20160926日之后的数据]
4--沪深跌停股个数 跌停股个数 曾跌停股个数
5--上证50股指期货 净持仓(手)[注:该指标展示20171009日之后的数据]
6--沪深300股指期货 净持仓(手) [注:该指标展示20171009日之后的数据]
7--中证500股指期货 净持仓(手) [注:该指标展示20171009日之后的数据]
8--ETF基金规模数据 ETF基金规模(亿) ETF净申赎(亿)
9--每月新增投资者数量-日期 新增自然人数量(户)新增非自然人数量(户)
10--增减持统计 增持额(万元) 减持额(万元)[注:部分公司公告滞后,造成每天查看的数据可能会不一样]
11--大宗交易 溢价的大宗交易额(万元) 折价的大宗交易额(万元)
12--限售解禁 限售解禁计划额(亿元) 限售解禁股份实际上市金额(亿元)[注:该指标展示201802月之后的数据;部分股票的解禁日期延后, 造成不同日期提取的某天的计划额可能不同]
13--分红 市场总分红额(亿元)[注:除权派息日的A股市场总分红额]
14--募资 市场总募资额(亿元)[注:发行日期/除权日期的首发, 配股和增发的总募资额]
15--打板资金 封板成功资金(亿元) 封板失败资金(亿元) [注:该指标展示20160926日之后的数据]
16--龙虎榜 买入总金额(亿元) 卖出总金额(亿元)
17--龙虎榜机构数据 买入金额(亿元) 卖出金额(亿元)
18--龙虎榜营业部数据 买入金额(亿元) 卖出金额(亿元)
19--龙虎榜沪深股通数据 买入金额(亿元) 卖出金额(亿元)
SCJYONE 市场交易类数据(指定日期)
引用某天某种类型的市场总的交易类数据.如果指标支持云数据函数,则不需要[专业财务数据]下载.
SCJYONE(ID,N,Y,MMDD),ID为数据编号,N表示第几个数据,Y和MMDD表示年和月日.
如果Y为0,MMDD为0,表示最新数据,MMDD为1,2,3...,表示倒数第2,3,4...个数据
市场交易类数据函数, 数据编号如下:
1--融资融券 沪深融资余额(万元) 沪深融券余额(万元)
2--陆股通资金流入 沪股通流入金额(亿元) 深股通流入金额(亿元)
3--沪深涨停股个数 涨停股个数 曾涨停股个数 [注:该指标展示20160926日之后的数据]
4--沪深跌停股个数 跌停股个数 曾跌停股个数
5--上证50股指期货 净持仓(手)[注:该指标展示20171009日之后的数据]
6--沪深300股指期货 净持仓(手) [注:该指标展示20171009日之后的数据]
7--中证500股指期货 净持仓(手) [注:该指标展示20171009日之后的数据]
8--ETF基金规模数据 ETF基金规模(亿) ETF净申赎(亿)
9--每月新增投资者数量-日期 新增自然人数量(户)新增非自然人数量(户)
10--增减持统计 增持额(万元) 减持额(万元)[注:部分公司公告滞后,造成每天查看的数据可能会不一样]
11--大宗交易 溢价的大宗交易额(万元) 折价的大宗交易额(万元)
12--限售解禁 限售解禁计划额(亿元) 限售解禁股份实际上市金额(亿元)[注:该指标展示201802月之后的数据;部分股票的解禁日期延后, 造成不同日期提取的某天的计划额可能不同]
13--分红 市场总分红额(亿元)[注:除权派息日的A股市场总分红额]
14--募资 市场总募资额(亿元)[注:发行日期/除权日期的首发, 配股和增发的总募资额]
15--打板资金 封板成功资金(亿元) 封板失败资金(亿元) [注:该指标展示20160926日之后的数据]
16--龙虎榜 买入总金额(亿元) 卖出总金额(亿元)
17--龙虎榜机构数据 买入金额(亿元) 卖出金额(亿元)
18--龙虎榜营业部数据 买入金额(亿元) 卖出金额(亿元)
19--龙虎榜沪深股通数据 买入金额(亿元) 卖出金额(亿元)
GPONEDAT 股票的单个数据(非序列)
引用股票的某种数据.
GPONEDAT(ID),ID为数据编号
数据编号如下:
1--发行价(元)
2--总发行数量(万股)
3--一致预期目标价(元)
4--一致预期T年度
5--一致预期T年每股收益
6--一致预期T+1年每股收益
7--一致预期T+2年每股收益
8--一致预期T年净利润(万元)
9--一致预期T+1年净利润(万元)
10--一致预期T+2年净利润(万元)
11--一致预期T年营业收入(万元)
12--一致预期T+1年营业收入(万元)
13--一致预期T+2年营业收入(万元)
14--一致预期T年营业利润(万元)
15--一致预期T+1年营业利润(万元)
16--一致预期T+2年营业利润(万元)
17--一致预期T年每股净资产(元)
18--一致预期T+1年每股净资产(元)
19--一致预期T+2年每股净资产(元)
20--一致预期T年净资产收益率(%)
21--一致预期T+1年净资产收益率(%)
22--一致预期T+2年净资产收益率(%)
23--一致预期T年PE
24--一致预期T+1年PE
25--一致预期T+2年PE

## 即时行情函数

DYNAINFO(3) 前收盘价(即时行情数据) 期货和期权品种为昨结算价
DYNAINFO(4) 开盘价(即时行情数据) 在开盘前,值为0,在使用时需要判断
DYNAINFO(5) 最高价(即时行情数据) 在开盘前,值为0,在使用时需要判断
DYNAINFO(6) 最低价(即时行情数据) 在开盘前,值为0,在使用时需要判断
DYNAINFO(7) 现价(即时行情数据) 在开盘前,值为0,在使用时需要判断
DYNAINFO(8) 总量(即时行情数据)
DYNAINFO(9) 现量(即时行情数据)
DYNAINFO(10) 总金额(即时行情数据)
DYNAINFO(11) 均价(即时行情数据)
DYNAINFO(12) 日涨跌(即时行情数据)
DYNAINFO(13) 振幅(即时行情数据)
DYNAINFO(14) 涨幅 即时行情数据(沪深早盘竞价期间使用匹配价的涨幅) 转换成幅度需要乘100
DYNAINFO(15) 开盘时的成交金额 即时行情数据
DYNAINFO(16) 前5日每分钟均量 盘中不变化
DYNAINFO(17) 量比(即时行情数据)
DYNAINFO(18) 上涨家数(对沪深指数和通达信板块指数有效) 即时行情数据
DYNAINFO(19) 下跌家数(对沪深指数和通达信板块指数有效) 即时行情数据
DYNAINFO(20) 最新买价, 即买价一. 也称最新买价(即时行情数据)
DYNAINFO(21) 最新卖价, 即卖价一. 也称最新卖价(即时行情数据)
DYNAINFO(22) 内盘(即时行情数据)
DYNAINFO(23) 外盘(即时行情数据)
SELLVOL 返回内盘,即DYNAINFO(22) 即时行情数据
BUYVOL 返回外盘,即DYNAINFO(23) 即时行情数据
DYNAINFO(24) 返回涨速 即时行情数据 转换成幅度需要乘100
DYNAINFO(25) 返回几分钟前的价格,周期由涨速周期决定,一般为5分钟(即时行情数据)
DYNAINFO(37) 换手率 转换成幅度需要乘100 比如DYNAINFO(37)>0.25表示换手超过25%
DYNAINFO(38) 静态市盈率 沪深,港股和美股品种等有效
DYNAINFO(39) 市盈(动)
动态市盈率(即时行情数据) ,沪深品种有效
DYNAINFO(40) 市盈率(TTM)(根据最近12个月的每股收益得到的市盈率) 即时行情数据 沪深品种有效
DYNAINFO(49) 成交方向
成交方向 即时行情数据 0:主动买 1:主动卖 2:中性单
DYNAINFO(50) 采样点数(分笔数)
采样点数,即分时成交明细个数,相当于报价中的活跃度(即时行情数据)
DYNAINFO(51) 内外比(即时行情数据)
DYNAINFO(52) 港股资金流向 单位为万(即时行情数据)
DYNAINFO(53) 应计利息/某些基金的昨日净值(100份) 即时行情数据
DYNAINFO(54) 某些基金的单位净值 即时行情数据
DYNAINFO(57) 笔涨跌(即时行情数据)
DYNAINFO(58) 最新叫买量即买一量. (即时行情数据)
DYNAINFO(59) 最新叫卖量即卖一量. (即时行情数据)
DYNAINFO(60) 沪深总上涨家数(即时行情数据)
DYNAINFO(61) 沪深总下跌家数 (即时行情数据)
DYNAINFO(62) 沪深总成交金额(即时行情数据)
DYNAINFO(71) 买二价 TCI后台使用的行情数据
DYNAINFO(72) 买二量 TCI后台使用的行情数据
DYNAINFO(73) 卖二价 TCI后台使用的行情数据
DYNAINFO(74) 卖二量 TCI后台使用的行情数据
DYNAINFO(75) 买三价 TCI后台使用的行情数据
DYNAINFO(76) 买三量 TCI后台使用的行情数据
DYNAINFO(77) 卖三价 TCI后台使用的行情数据
DYNAINFO(78) 卖三量 TCI后台使用的行情数据
DYNAINFO(79) 买四价 TCI后台使用的行情数据
DYNAINFO(80) 买四量 TCI后台使用的行情数据
DYNAINFO(81) 卖四价 TCI后台使用的行情数据
DYNAINFO(82) 卖四量 TCI后台使用的行情数据
DYNAINFO(83) 买五价 TCI后台使用的行情数据
DYNAINFO(84) 买五量 TCI后台使用的行情数据
DYNAINFO(85) 卖五价 TCI后台使用的行情数据
DYNAINFO(86) 卖五量 TCI后台使用的行情数据
ISBUYORDER 主动性买单
返回当前成交是否为主动性买单.
用法:
ISBUYORDER
当本笔成交为主动性买盘时,返回1,否则为0
BETAVALUE 返回当前品种的贝塔系数
SHAPE_SHORT 短期形态值 返回当前品种的短期形态值(1,2,..14)
SHAPE_MID 返回当前品种的中期形态值(1,2,..14)
SHAPE_LONG 返回当前品种的长期形态值(1,2,..14)

## 线型和资源等

COLOR 自定义色
格式为COLOR+"BBGGRR":BB, GG, RR表示蓝色, 绿色和红色的分量, 每种颜色的取值范围是00-FF, 采用了16进制. 
例如:MA5: MA(CLOSE,5),COLOR00FFFF 表示纯红色与纯绿色的混合色: COLOR808000 表示淡蓝色和淡绿色的混合色. 
COLORBLACK 画黑色
COLORBLUE 画蓝色
COLORGREEN 画绿色
COLORCYAN 画青色
COLORRED 画红色
COLORMAGENTA 画洋红色
COLORBROWN 画棕色
COLORLIGRAY 画淡灰色
COLORGRAY 画深灰色
COLORLIBLUE 画淡蓝色
COLORLIGREEN 画淡绿色
COLORLICYAN 画淡青色
COLORLIRED 画淡红色
COLORLIMAGENTA 画淡洋红色
COLORYELLOW 画黄色
COLORWHITE 画白色
LINETHICK 线型粗细
格式"LINETHICK+(1-9)";
参数的取值范围在1—9之间, "LINETHICK1"表示最细的线, 而"LINETHICK9"表示最粗的线;
DRAWABOVE 显示在位置之上
显示在位置之上,对于DRAWTEXT和DRAWNUMBER等函数有用,放在语句的最后面(不能与LINETHICK等函数共用),比如:
DRAWNUMBER(CLOSE>OPEN,HIGH,CLOSE),DRAWABOVE;
NOFRAME 不显示边框
不显示边框,对于DRAWRECTREL等函数有用,放在语句的最后面
STICK 画柱状线
COLORSTICK 画彩色柱状线
画彩色柱状线. 数据为正数时, 向上画红色柱状线, 反之向下画绿线
VOLSTICK 成交量柱状线
当股价上涨时显示红色空心柱, 反之则显示绿色实心柱
LINESTICK 同时画出柱状线和指标线
CROSSDOT 画小叉线
CIRCLEDOT 画小圆圈线
POINTDOT 画小圆点线
DOTLINE 画虚线
NODRAW 空线条——不画该线
PLAYSOUND1 播放1号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND2 播放2号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND3 播放3号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND4 播放4号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND5 播放5号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND6 播放6号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND7 播放7号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND8 播放8号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND9 播放9号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND10 播放10号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND11 播放11号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND12 播放12号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND13 播放13号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND14 播放14号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND15 播放15号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND16 播放16号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND17 播放17号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND18 播放18号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND19 播放19号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
PLAYSOUND20 播放20号 声音和动画在[插入资源]中设置 最后一个数据满足条件后播放(只播放一次)
NOTEXT 不显示输出线数据
输出线名称前带有NOTEXT字样时,不显示输出线数据
??MOVE? 指标线向后偏移N个单位
输出线名称中带有MOVE字段时,比如TMPMOVE3,表示整个输出线向后偏移3个单位,画线进入未来时间,N不应超过4 注:使用MOVE后,不能再使用线型
??MOVER?
输出线名称中带有MOVE字段时,比如TMPMOVER3,表示整个输出线向前偏移3个单位,注:使用MOVER后,不能再使用线型

## 操作符

+ 加. 例如; X+Y
- 减. 例如 : X - Y
* 乘. 例如 : X * Y
/ 除. 例如 : X / Y
< 小于. 例如 : X < Y
> 大于. 例如 : X > Y
<= 小于等于. 例如 : X <= Y
>=大于等于. 例如 : X>= Y
＝ 等于. 例如 : X = Y
!=不等于. 例如 : X != Y
〈〉不等于. 与!=的用法一样
{ 注释符号
例如 {注释部分}
AND 并且. 例如 : X>Y AND Y>Z
OR 或者. 例如 : X>Y OR Y>Z
&& 并且. 与 AND 的用法一样
︱︳ 或者. 与 OR 的用法一致
$ 引用特定数据. 
例如:"000014$CLOSE",表示取000014的收盘价,注意加入双引号.
可在前面加SZ(深市),SH(沪市),或市场_,,"SZ000001$CLOSE"表示平安银行,"47_IFL8$CLOSE"表示沪深主力合约,
注意:引用品种的对应周期的数据必须要先下载到本地
( 括号. 例如 :HIGH/(CLOSE+OPEN)
) 反括号. 例如 :HIGH/(CLOSE+OPEN)
, 逗号.  例如: MA(ClOSE,3)
: 输出. 例如:输出:CLOSE+OPEN
:= 赋值. 例如 : 变量 1:=HIGH
" 双引号. 例如:"000014$CLOSE",表示取000014的收盘价
. 引用指标输出. 例如: KDJ.K 表示输入KDJ指标的K输出值(公式名不支持带运算符,比如-号)
:分号. 例如 : A:=CLOSE;
#跨周期引用符号. 
#后可用MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR
例如:TMP1:=CLOSE#WEEK;
{非指标引用时只可用于OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK等,当前周期不支持多秒线,多分钟线和多日线,并且引用周期必须要高于当前周期,5秒线只支持引用1分钟线和5分钟线,周期数据转换得到}
TMP2:=KDJ.K#WEEK;
{跨周期指标引用,引用品种的对应周期的数据必须要先下载到本地}
跨周期指标引用不支持带参数
提示:跨周期时,可能会引用到未来数据
MIN1 引用1分钟线
用于跨周期1分钟线引用
MIN5 引用5分钟线
用于跨周期5分钟线引用
MIN15 引用15分钟线
用于跨周期15分钟线引用
MIN30 引用30分钟线
用于跨周期30分钟线引用
MIN60 引用60分钟线
用于跨周期60分钟线引用
WEEK 引用周线
用于跨周期周线引用
SEASON 引用季线
用于跨周期季线引用

## 交易信号函数

BUY 买入开仓
多头建仓(买入开仓).
参数1为触发条件,参数2为标记放置位置.
例如:
BUY(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
SELL 卖出平仓
多头平仓(卖出平仓).
参数1为触发条件,参数2为标记放置位置.
例如:
SELL(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
SELLSHORT 卖出开仓
空头建仓(卖出开仓).
参数1为触发条件,参数2为标记放置位置.
例如:
SELLSHORT(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
BUYSHORT 买入平仓
空头平仓(买入平仓).
参数1为触发条件,参数2为标记放置位置.
例如:
BUYSHORT(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
BUYSHORT_BUY 先平空仓再开多仓
参数1为触发条件,参数2为标记放置位置.
例如:
BUYSHORT_BUY(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
独立池时,反手时平掉所有的原来仓位
SELL_SELLSHORT
先平多仓再开空仓.
参数1为触发条件,参数2为标记放置位置.
例如:
SELL_SELLSHORT(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
独立池时,反手时平掉所有的原来仓位
CLOSEALLD 清多头仓
平掉所有多头仓位.
参数1为触发条件,参数2为标记放置位置.
例如:
CLOSEALLD(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
CLOSEALLK 清空头仓
平掉所有空头仓位.
参数1为触发条件,参数2为标记放置位置.
例如:
CLOSEALLK(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
AUTOFILTER 自动过滤交易信号
对交易信号(BUY,SELL,SELLSHORT,BUYSHORT,BUYSHORT_BUY,SELL_SELLSHORT,CLOSEALLD,CLOSEALLK等)按照开平配对原则过滤.
1.连续的同方向指令只有第一个有效,其他的将被过滤;
2.交易信号必须配对出现(比如前面已经有了买开指令,则后面只允许出现卖平指令,其他的指令都被过滤掉)
注:使用AUTOFILTER后,就不要再使用其它的信号过滤方式了
ISLASTBUY 上个信号是否买入开仓(此函数会逐K线计算,请勿与未来函数同时使用)
ISLASTSELL 上个信号是否卖出平仓(此函数会逐K线计算,请勿与未来函数同时使用)
ISLASTSELLSHORT 上个信号是否卖出开仓(此函数会逐K线计算,请勿与未来函数同时使用)
ISLASTBUYSHORT 上个信号是否买入平仓(此函数会逐K线计算,请勿与未来函数同时使用)
LASTSIGNAL 上一次的信号类型
上一次的信号类型
1:买入开仓 2:卖出平仓 3:卖出开仓 4:买入平仓 7:清多头仓 8:清空头仓
(此函数会逐K线计算,请勿与未来函数同时使用)
BUYPRICE 买入开仓信号时的价格
买入开仓信号时的价格,当时数据品种的K线的收盘价
(此函数会逐K线计算,请勿与未来函数同时使用)
BUYBARS 买入开仓信号距离当前k线数(此函数会逐K线计算,请勿与未来函数同时使用)
SELLSHORTPRICE 卖出开仓信号时的价格
开仓卖出信号时的价格,当时数据品种的K线的收盘价
(此函数会逐K线计算,请勿与未来函数同时使用)
SELLSHORTBARS 卖开仓出信号距离当前k线数(此函数会逐K线计算,请勿与未来函数同时使用)
SELLPRICE 卖出平仓信号时的价格
卖出平仓信号时的价格,当时数据品种的K线的收盘价
(此函数会逐K线计算,请勿与未来函数同时使用)
SELLBARS 卖出平仓信号距离当前K线数(此函数会逐K线计算,请勿与未来函数同时使用)
BUYSHORTPRICE 买入平仓信号时的价格
买入平仓信号时的价格,当时数据品种的K线的收盘价
(此函数会逐K线计算,请勿与未来函数同时使用)
BUYSHORTBARS 买入平仓信号距离当前K线数(此函数会逐K线计算,请勿与未来函数同时使用)

## 帐户函数

BUYPOSITION 买持仓
买持仓的数量(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
TODAYBUY 今买持仓
今日买入持仓的数量(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
BUYAVGPRICE 买均价
买持仓的持仓均价(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
BUYPROFITLOSS 买持仓盈利
买持仓的浮动盈亏(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
SELLPOSITION 卖持仓
卖持仓的数量(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
TODAYSELL 今卖持仓
今日卖出持仓的数量(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
SELLAVGPRICE 卖均价
卖持仓的持仓均价(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
SELLPROFITLOSS 卖持仓盈利
卖持仓的浮动盈亏(期货),针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
TOTALPOSITION 总持仓
总持仓,针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
CANUSEPOSITION 总可用持仓
总可用的持仓,针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
TOTALAVGPRICE 总持仓均价
总持仓均价,针对当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
FREEMONEY 总可用资金量
总可用资金量,针对当前交易帐户
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
CURRENTEQUITY 动态权益
动态权益(期货),针对当前交易帐户
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
PREVIOUSEQUITY 昨日结存权益
昨日结存的权益(期货),针对当前交易帐户
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
PROFITLOSS 持仓盈亏
持仓盈亏(期货),针对当前交易帐户的当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
CLOSEPROFIT 平仓盈亏
平仓盈亏(期货),针对当前交易帐户的当前品种
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
TOTALMARGIN 持仓保证金
持仓保证金(期货),针对当前交易帐户
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
FEERATE 合约手续费
合约手续费比例(百分比),(具体交易策略中设置)
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
MARGINRATE 合约保证金
合约保证金比例(百分比),(具体交易策略中设置)
(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)

## 其他新函数

SIGNALS_USER 引用自定义序列数据.
读取个人目录下的signals目录下面的[signals_user_?]目录,请用自定义数据管理器来维护.
SIGNALS_USER(11,TYPE):表示读当前品种的11数据号的序列数据(自定义数据需按日期从小到大排序),TYPE:1表示做平滑处理,没有自定义数据的周期返回上一周期的值;0表示不做平滑处理;2表示没有数据则为0.
EXTERNSTR(TYPE,ID) 引用自定义外部数据字符串数据
TYPE为1表示是系统保留数据,
TYPE为0表示是自定义外部数据,读取signals目录下面的的extern_user.txt,请用自定义数据管理器来维护
extern_user.txt为文本结构,如下 1|600717|1|好股|0.33
市场(0:深圳,1:上海)|品种代码|数据号|文字串|数值 如果是导出格式,则不需要数据号
EXTERNVALUE(TYPE, ID) 引用自定义外部数值数据
用法同EXTERNSTR类似
以上函数都是为把其他股软的自定义数据拿来改成通达信格式的数据, 然后用自定义管理器导入, 供通达信软件使用的实现外部引用功能的. 
下面来介绍导入数据并利用这些函数实现对外部数据应用的例子:
自定义数据导入方法图例:(把外部数据转换成通达信外部引入数据的形式然后导入到自定义数据管理器中)
一, 导入数据
二 引用后的效果图
引用脚本:DRAWTEXT_FIX(CURRBARSCOUNT=1,0,0,0,EXTERNSTR(0,1));(命名为ZTTZ的主图指标)
同时 DRAWNUMBER(CURRBARSCOUNT=1,HIGH,EXTERNVALUE(TYPE,ID));也可以显示相关的数字来. 
AA:SIGNALS_USER(4,1); 可以用来显示同一个品种序列数据数字的平滑直线出来. 

## 最新函数

4.12版公式编辑器新增函数如下:
1.CODELIKE, NAMELIKE, INBLOCK多用于选股. 
CODELIKE 用法:
CODELIKE(代码前缀字符串);
返回值为1, 表示代码以该字符串开头;
为0, 表示代码不以该字符串开头. 
CODELIKE('600') AND C>O; {股票代码以600开头且收阳线}
NAMELIKE 用法:
NAMELIKE(名称前缀字符串);
返回值为1, 表示股票名称以该字符串开头;
为0, 表示股票名称不以该字符串开头. 
NAMELIKE('ST') AND C>O; {股票名称以ST开头且收阳线}
INBLOCK 用法:
INBLOCK(板块名称);
返回值为1, 表示属于该板块;
为0, 表示不属于该板块. 
INBLOCK('沪深300') AND C>O; {是沪深300成份且收阳线}
2.TMA类似于SMA,但TMA参数不一定是整数. 
TMA 用法:
TMA(X,N,M), 求X的递归移动平均, N, M为权重. 
算法:
若Y=TMA(X,N,M) 则 Y=(N*Y'+M*X), 其中Y'表示上一周期Y值. 初值为M*X
例如:
TMA(CLOSE,0.9,0.1). 
3.DotLine, 画虚线
4.DYNAINFO(58) 最新叫买量
DYNAINFO(59) 最新叫卖量

## 最新学习资料
欢迎喜欢通达信公式平台的朋友, 登录通达信论坛 "公式天堂"板块获取最新的学习资料及软件升级信息. 
http://tdx.com.cn/index.asp?boardid=12
最新的公式平台学习资料如下:
红宝书8 - 公式系统(初级)
http://www.tdx.com.cn/products/learn/gs_step1.rar
红宝书9 - 公式系统(中级)
http://www.tdx.com.cn/products/learn/gs_step2.rar
红宝书10 - 公式系统(高级)
http://www.tdx.com.cn/products/learn/gs_step3.rar
原来老版本的公式教程
http://www.tdx.com.cn/products/learn/gsjc.rar
